{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"rounded-lg border bg-card text-card-foreground shadow-sm\", className)} {...props} />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\n  ),\n);\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h3 ref={ref} className={cn(\"text-2xl font-semibold leading-none tracking-tight\", className)} {...props} />\n  ),\n);\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => (\n    <p ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n  ),\n);\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />,\n);\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn(\"flex items-center p-6 pt-0\", className)} {...props} />\n  ),\n);\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,gRAAgB,CAAuD,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5G,2SAAC;QAAI,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,4DAA4D;QAAa,GAAG,KAAK;;;;;;AAEhH,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,gRAAgB,CACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,2SAAC;QAAI,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAGvF,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,gRAAgB,CAChC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,2SAAC;QAAG,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;AAG3G,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,gRAAgB,CACtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,2SAAC;QAAE,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAGrF,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,gRAAgB,CAClC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAAQ,2SAAC;QAAI,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAElG,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,gRAAgB,CACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,2SAAC;QAAI,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;AAGpF,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,oOAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAKF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBAAO,2SAAC;QAAI,WAAW,IAAA,sLAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAC7E","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/progress.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\"relative h-4 w-full overflow-hidden rounded-full bg-secondary\", className)}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,yBAAW,gRAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,2SAAC,yOAAsB;QACrB,KAAK;QACL,WAAW,IAAA,sLAAE,EAAC,iEAAiE;QAC9E,GAAG,KAAK;kBAET,cAAA,2SAAC,8OAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,yOAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/lib/displayNames.ts"],"sourcesContent":["// Utility functions for display names\n\nexport const getPersonDisplayName = (fornavn: string, etternavn: string): string => {\n  if (!fornavn || !etternavn) return \"\";\n  const etternavnInitial = etternavn.charAt(0).toUpperCase();\n  return `${fornavn} ${etternavnInitial}`;\n};\n\nexport const formatTimeValue = (timer?: number): string => {\n  if (typeof timer !== \"number\" || Number.isNaN(timer)) return \"0,00\";\n  return timer.toFixed(2).replace(\".\", \",\");\n};\n\nexport const parseTimeValue = (value: string): number => {\n  const parsed = parseFloat(value.replace(\",\", \".\"));\n  return Number.isNaN(parsed) ? 0 : Math.round(parsed * 4) / 4;\n};\n\nexport const validateTimeStep = (timer: number): boolean => {\n  return (timer * 4) % 1 === 0;\n};\n\nexport const getWeekNumber = (date: Date): number => {\n  const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\n  const dayNum = d.getUTCDay() || 7;\n  d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n  const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n  const weekNumber = Math.ceil((((d.getTime() - yearStart.getTime()) / 86400000) + 1) / 7);\n\n  if (weekNumber === 0) {\n    return 53;\n  }\n\n  return weekNumber;\n};\n\nexport const getDateFromWeek = (year: number, week: number): Date => {\n  const simple = new Date(year, 0, 1 + (week - 1) * 7);\n  const dow = simple.getDay();\n  const ISOweekStart = simple;\n  if (dow <= 4) {\n    ISOweekStart.setDate(simple.getDate() - simple.getDay() + 1);\n  } else {\n    ISOweekStart.setDate(simple.getDate() + 8 - simple.getDay());\n  }\n  return ISOweekStart;\n};\n\nexport const isHoliday = async (date: Date): Promise<{ isHoliday: boolean; name?: string }> => {\n  const dayOfWeek = date.getDay();\n  const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\n\n  return {\n    isHoliday: isWeekend,\n    name: isWeekend ? (dayOfWeek === 0 ? \"Søndag\" : \"Lørdag\") : undefined,\n  };\n};\n\nexport const generateProjectColor = (projectId: number): string => {\n  const colors = [\n    \"#3B82F6\",\n    \"#8B5CF6\",\n    \"#10B981\",\n    \"#F59E0B\",\n    \"#EF4444\",\n    \"#06B6D4\",\n    \"#84CC16\",\n    \"#F97316\",\n    \"#EC4899\",\n    \"#6366F1\",\n  ];\n\n  return colors[projectId % colors.length];\n};\n\nexport const getContrastColor = (hexColor: string): string => {\n  const r = parseInt(hexColor.slice(1, 3), 16);\n  const g = parseInt(hexColor.slice(3, 5), 16);\n  const b = parseInt(hexColor.slice(5, 7), 16);\n\n  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n\n  return luminance > 0.5 ? \"#000000\" : \"#FFFFFF\";\n};\n\nexport const getExpectedHoursForDate = (\n  date: Date,\n  defaultHours: number = 8,\n  holidayHours: number = 0,\n  isHoliday: boolean = false\n): number => {\n  if (isHoliday) {\n    return holidayHours;\n  }\n\n  const dayOfWeek = date.getDay();\n  if (dayOfWeek === 0 || dayOfWeek === 6) {\n    return 0;\n  }\n\n  return defaultHours;\n};\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;;;;;;;;;;;;;;;;;;AAE/B,MAAM,uBAAuB,CAAC,SAAiB;IACpD,IAAI,CAAC,WAAW,CAAC,WAAW,OAAO;IACnC,MAAM,mBAAmB,UAAU,MAAM,CAAC,GAAG,WAAW;IACxD,OAAO,GAAG,QAAQ,CAAC,EAAE,kBAAkB;AACzC;AAEO,MAAM,kBAAkB,CAAC;IAC9B,IAAI,OAAO,UAAU,YAAY,OAAO,KAAK,CAAC,QAAQ,OAAO;IAC7D,OAAO,MAAM,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK;AACvC;AAEO,MAAM,iBAAiB,CAAC;IAC7B,MAAM,SAAS,WAAW,MAAM,OAAO,CAAC,KAAK;IAC7C,OAAO,OAAO,KAAK,CAAC,UAAU,IAAI,KAAK,KAAK,CAAC,SAAS,KAAK;AAC7D;AAEO,MAAM,mBAAmB,CAAC;IAC/B,OAAO,AAAC,QAAQ,IAAK,MAAM;AAC7B;AAEO,MAAM,gBAAgB,CAAC;IAC5B,MAAM,IAAI,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,WAAW,IAAI,KAAK,QAAQ,IAAI,KAAK,OAAO;IAC7E,MAAM,SAAS,EAAE,SAAS,MAAM;IAChC,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK,IAAI;IAClC,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,GAAG;IAC3D,MAAM,aAAa,KAAK,IAAI,CAAC,CAAC,AAAC,CAAC,EAAE,OAAO,KAAK,UAAU,OAAO,EAAE,IAAI,WAAY,CAAC,IAAI;IAEtF,IAAI,eAAe,GAAG;QACpB,OAAO;IACT;IAEA,OAAO;AACT;AAEO,MAAM,kBAAkB,CAAC,MAAc;IAC5C,MAAM,SAAS,IAAI,KAAK,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI;IAClD,MAAM,MAAM,OAAO,MAAM;IACzB,MAAM,eAAe;IACrB,IAAI,OAAO,GAAG;QACZ,aAAa,OAAO,CAAC,OAAO,OAAO,KAAK,OAAO,MAAM,KAAK;IAC5D,OAAO;QACL,aAAa,OAAO,CAAC,OAAO,OAAO,KAAK,IAAI,OAAO,MAAM;IAC3D;IACA,OAAO;AACT;AAEO,MAAM,YAAY,OAAO;IAC9B,MAAM,YAAY,KAAK,MAAM;IAC7B,MAAM,YAAY,cAAc,KAAK,cAAc;IAEnD,OAAO;QACL,WAAW;QACX,MAAM,YAAa,cAAc,IAAI,WAAW,WAAY;IAC9D;AACF;AAEO,MAAM,uBAAuB,CAAC;IACnC,MAAM,SAAS;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,OAAO,MAAM,CAAC,YAAY,OAAO,MAAM,CAAC;AAC1C;AAEO,MAAM,mBAAmB,CAAC;IAC/B,MAAM,IAAI,SAAS,SAAS,KAAK,CAAC,GAAG,IAAI;IACzC,MAAM,IAAI,SAAS,SAAS,KAAK,CAAC,GAAG,IAAI;IACzC,MAAM,IAAI,SAAS,SAAS,KAAK,CAAC,GAAG,IAAI;IAEzC,MAAM,YAAY,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI;IAExD,OAAO,YAAY,MAAM,YAAY;AACvC;AAEO,MAAM,0BAA0B,CACrC,MACA,eAAuB,CAAC,EACxB,eAAuB,CAAC,EACxB,YAAqB,KAAK;IAE1B,IAAI,WAAW;QACb,OAAO;IACT;IAEA,MAAM,YAAY,KAAK,MAAM;IAC7B,IAAI,cAAc,KAAK,cAAc,GAAG;QACtC,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className,\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left\", className)} {...props} />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)} {...props} />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,SAAS,uOAAoB;AAEnC,MAAM,gBAAgB,0OAAuB;AAE7C,MAAM,eAAe,yOAAsB;AAE3C,MAAM,cAAc,wOAAqB;AAEzC,MAAM,8BAAgB,gRAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,0OAAuB;QACtB,KAAK;QACL,WAAW,IAAA,sLAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,0OAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,gRAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,2SAAC;;0BACC,2SAAC;;;;;0BACD,2SAAC,0OAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,sLAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,2SAAC,wOAAqB;wBAAC,WAAU;;0CAC/B,2SAAC,8PAAC;gCAAC,WAAU;;;;;;0CACb,2SAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,0OAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBACjF,2SAAC;QAAI,WAAW,IAAA,sLAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;AAEhG,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBACjF,2SAAC;QAAI,WAAW,IAAA,sLAAE,EAAC,iEAAiE;QAAa,GAAG,KAAK;;;;;;AAE3G,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,gRAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,wOAAqB;QACpB,KAAK;QACL,WAAW,IAAA,sLAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,wOAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,gRAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,8OAA2B;QAAC,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAE7G,kBAAkB,WAAW,GAAG,8OAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst labelVariants = cva(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\");\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,oOAAG,EAAC;AAE1B,MAAM,sBAAQ,gRAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,sOAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;AAErF,MAAM,WAAW,GAAG,sOAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>;\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  );\n});\nTextarea.displayName = \"Textarea\";\n\nexport { Textarea };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,yBAAW,gRAAgB,CAAqC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC9F,qBACE,2SAAC;QACC,WAAW,IAAA,sLAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className,\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label ref={ref} className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)} {...props} />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground\",\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator ref={ref} className={cn(\"-mx-1 my-1 h-px bg-muted\", className)} {...props} />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,uOAAoB;AAEnC,MAAM,cAAc,wOAAqB;AAEzC,MAAM,cAAc,wOAAqB;AAEzC,MAAM,8BAAgB,gRAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,2SAAC,0OAAuB;QACtB,KAAK;QACL,WAAW,IAAA,sLAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,2SAAC,uOAAoB;gBAAC,OAAO;0BAC3B,cAAA,2SAAC,gSAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,0OAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,gRAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,iPAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,sLAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,2SAAC,0RAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,iPAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,gRAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,mPAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,sLAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,2SAAC,gSAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAAG,mPAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,gRAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,2SAAC,yOAAsB;kBACrB,cAAA,2SAAC,0OAAuB;YACtB,KAAK;YACL,WAAW,IAAA,sLAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,2SAAC;;;;;8BACD,2SAAC,2OAAwB;oBACvB,WAAW,IAAA,sLAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,2SAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,0OAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,gRAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,wOAAqB;QAAC,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;AAEhH,YAAY,WAAW,GAAG,wOAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,gRAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,2SAAC,uOAAoB;QACnB,KAAK;QACL,WAAW,IAAA,sLAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,2SAAC;gBAAK,WAAU;0BACd,cAAA,2SAAC,gPAA6B;8BAC5B,cAAA,2SAAC,0QAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,2SAAC,2OAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,uOAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,gRAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,4OAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;AAEtG,gBAAgB,WAAW,GAAG,4OAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/TimeEntry.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Clock, MessageSquare, Paperclip, ChevronUp, ChevronDown } from 'lucide-react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useToast } from '@/hooks/use-toast';\nimport { formatTimeValue, validateTimeStep } from '@/lib/displayNames';\n\ninterface TimeEntryProps {\n  vaktId: string;\n  orgId: string;\n  onSave?: () => void;\n  defaultTimer?: number;\n  existingEntry?: {\n    id: string;\n    timer: number;\n    aktivitet_id: string;\n    notat: string;\n    status: string;\n    original_timer?: number;\n    original_aktivitet_id?: string;\n    original_notat?: string;\n    original_status?: string;\n  };\n}\n\ninterface Activity {\n  id: string;\n  navn: string;\n}\n\nconst TimeEntry = ({ vaktId, orgId, onSave, defaultTimer = 0.0, existingEntry }: TimeEntryProps) => {\n  const [hours, setHours] = useState(Math.floor(existingEntry?.timer || defaultTimer));\n  const [minutes, setMinutes] = useState(Math.round(((existingEntry?.timer || defaultTimer) % 1) * 60));\n  const [aktivitetId, setAktivitetId] = useState(existingEntry?.aktivitet_id || '');\n  const [notat, setNotat] = useState(existingEntry?.notat || '');\n  const [status, setStatus] = useState<'utkast' | 'sendt' | 'godkjent'>((existingEntry?.status as 'utkast' | 'sendt' | 'godkjent') || 'utkast');\n  const [activities, setActivities] = useState<Activity[]>([]);\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Separate overtime time entries for 100% and 50%\n  const [overtime100Hours, setOvertime100Hours] = useState(0);\n  const [overtime100Minutes, setOvertime100Minutes] = useState(0);\n  const [overtime50Hours, setOvertime50Hours] = useState(0);\n  const [overtime50Minutes, setOvertime50Minutes] = useState(0);\n  const [showOvertime, setShowOvertime] = useState(false); // Collapsed by default\n\n  // Calculate total timer value from hours and minutes\n  const timer = hours + (minutes / 60);\n  const overtime100Timer = overtime100Hours + (overtime100Minutes / 60);\n  const overtime50Timer = overtime50Hours + (overtime50Minutes / 60);\n  const totalOvertimeTimer = overtime100Timer + overtime50Timer;\n\n  const loadActivities = useCallback(async () => {\n    try {\n      console.log('Loading activities for orgId:', orgId);\n      \n      // First, let's check what data exists in the table\n      const { data: allData, error: allError } = await supabase\n        .from('ttx_activity_cache')\n        .select('id, navn, aktiv, org_id')\n        .eq('org_id', orgId);\n      \n      console.log('All activities for org:', allData);\n      console.log('All activities error:', allError);\n      \n      if (allError) {\n        console.error('Supabase error loading all activities:', allError);\n        throw allError;\n      }\n      \n      // Now try the filtered query\n      const { data, error } = await supabase\n        .from('ttx_activity_cache')\n        .select('id, navn')\n        .eq('org_id', orgId)\n        .eq('aktiv', true)\n        .order('navn');\n\n      console.log('Filtered activities (aktiv=true):', data);\n      console.log('Filtered activities error:', error);\n\n      if (error) {\n        console.error('Supabase error loading activities:', error);\n        throw error;\n      }\n      \n      // If no active activities found, try without the aktiv filter\n      if (!data || data.length === 0) {\n        console.log('No active activities found, trying without aktiv filter...');\n        const { data: allActiveData, error: allActiveError } = await supabase\n          .from('ttx_activity_cache')\n          .select('id, navn')\n          .eq('org_id', orgId)\n          .order('navn');\n        \n        console.log('All activities without aktiv filter:', allActiveData);\n        \n        if (!allActiveError && allActiveData && allActiveData.length > 0) {\n          console.log('Found activities without aktiv filter, using them');\n          // Filter out overtime activities from the fallback data too\n          const filteredFallbackData = allActiveData.filter(activity => {\n            const navn = activity.navn?.toLowerCase() || '';\n            return !navn.includes('overtid') && \n                   !navn.includes('overtime') && \n                   !navn.includes('50%') && \n                   !navn.includes('100%');\n          });\n          setActivities(filteredFallbackData);\n          return;\n        }\n      }\n      \n      // Filter out overtime activities from the main dropdown\n      const filteredData = (data || []).filter(activity => {\n        const navn = activity.navn?.toLowerCase() || '';\n        return !navn.includes('overtid') && \n               !navn.includes('overtime') && \n               !navn.includes('50%') && \n               !navn.includes('100%');\n      });\n      \n      setActivities(filteredData);\n      \n      if (!filteredData || filteredData.length === 0) {\n        console.log('No non-overtime activities found for orgId:', orgId);\n        toast({\n          title: \"Ingen aktiviteter funnet\",\n          description: \"Det er ingen aktive aktiviteter konfigurert for denne organisasjonen.\",\n          variant: \"destructive\"\n        });\n      } else {\n        console.log(`Successfully loaded ${filteredData.length} activities (overtime activities filtered out)`);\n      }\n    } catch (error) {\n      console.error('Error loading activities:', error);\n      toast({\n        title: \"Feil ved lasting av aktiviteter\",\n        description: error instanceof Error ? error.message : \"Kunne ikke laste aktiviteter.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [orgId, toast]);\n\n  useEffect(() => {\n    // Load activities when component mounts\n    loadActivities();\n  }, [loadActivities]);\n\n  useEffect(() => {\n    // Load all existing timer entries and update state when existingEntry changes\n    const loadData = async () => {\n      // Reset all state before loading\n      setOvertime100Hours(0);\n      setOvertime100Minutes(0);\n      setOvertime50Hours(0);\n      setOvertime50Minutes(0);\n      setShowOvertime(false);\n\n      // Load ALL existing timer entries for this vakt (both regular and overtime)\n      try {\n        const { data, error } = await supabase\n          .from('vakt_timer')\n          .select('timer, is_overtime, lonnstype, aktivitet_id, notat, status, original_timer, original_aktivitet_id, original_notat, original_status')\n          .eq('vakt_id', vaktId);\n\n        if (error) throw error;\n\n        if (data && data.length > 0) {\n          // Separate regular time and overtime\n          let totalRegularTime = 0;\n          let totalOvertime50 = 0;\n          let totalOvertime100 = 0;\n          const firstEntry = data[0]; // Use first entry for activity, note, status\n          \n          data.forEach(entry => {\n            const timer = entry.timer ?? 0;\n            const lonnstype = entry.lonnstype || '';\n            \n            if (entry.is_overtime) {\n              // Use lonnstype to determine overtime type\n              if (lonnstype === 'overtid_50') {\n                totalOvertime50 += timer;\n              } else if (lonnstype === 'overtid_100') {\n                totalOvertime100 += timer;\n              } else {\n                // Fallback for old entries without specific overtime type\n                if (timer <= 4) {\n                  totalOvertime50 += timer;\n                } else {\n                  totalOvertime100 += timer;\n                }\n              }\n            } else {\n              totalRegularTime += timer;\n            }\n          });\n\n          // Set regular time\n          setHours(Math.max(0, Math.min(8, Math.floor(totalRegularTime))));\n          setMinutes(Math.max(0, Math.min(45, Math.round((totalRegularTime % 1) * 60 / 15) * 15)));\n\n          // Set 50% overtime\n          if (totalOvertime50 > 0) {\n            setOvertime50Hours(Math.floor(totalOvertime50));\n            setOvertime50Minutes(Math.max(0, Math.min(45, Math.round((totalOvertime50 % 1) * 60 / 15) * 15)));\n          }\n\n          // Set 100% overtime\n          if (totalOvertime100 > 0) {\n            setOvertime100Hours(Math.floor(totalOvertime100));\n            setOvertime100Minutes(Math.max(0, Math.min(45, Math.round((totalOvertime100 % 1) * 60 / 15) * 15)));\n          }\n\n          // Show overtime section if any overtime exists\n          if (totalOvertime50 > 0 || totalOvertime100 > 0) {\n            setShowOvertime(true);\n          }\n\n          // Set activity, note, and status from first entry (use original values if available)\n          setAktivitetId((firstEntry.original_aktivitet_id ?? firstEntry.aktivitet_id) || '');\n          setNotat((firstEntry.original_notat ?? firstEntry.notat) || '');\n          setStatus(((firstEntry.original_status ?? firstEntry.status) || 'utkast') as 'utkast' | 'sendt' | 'godkjent');\n        } else {\n          // For new entries, reset to default values\n          setHours(Math.floor(defaultTimer));\n          setMinutes(Math.max(0, Math.min(45, Math.round((defaultTimer % 1) * 60 / 15) * 15)));\n          setAktivitetId('');\n          setNotat('');\n          setStatus('utkast');\n        }\n      } catch (error) {\n        console.error('Error loading existing timer entries:', error);\n        // Fallback to existingEntry if database load fails\n        if (existingEntry) {\n          const baseTimer = existingEntry.original_timer ?? existingEntry.timer ?? defaultTimer;\n          const baseHours = Math.floor(baseTimer);\n          const baseMinutes = Math.round((baseTimer % 1) * 60);\n\n          setHours(Math.max(0, Math.min(8, baseHours)));\n          setMinutes(Math.max(0, Math.min(45, Math.round(baseMinutes / 15) * 15)));\n          setAktivitetId((existingEntry.original_aktivitet_id ?? existingEntry.aktivitet_id) || '');\n          setNotat((existingEntry.original_notat ?? existingEntry.notat) || '');\n          setStatus(((existingEntry.original_status ?? existingEntry.status) || 'utkast') as 'utkast' | 'sendt' | 'godkjent');\n        }\n      }\n    };\n\n    loadData();\n  }, [vaktId, existingEntry, defaultTimer]);\n\n  const adjustHours = (delta: number) => {\n    const newHours = Math.max(0, Math.min(8, hours + delta));\n    setHours(newHours);\n  };\n\n  const adjustMinutes = (delta: number) => {\n    const newMinutes = Math.max(0, Math.min(45, minutes + delta));\n    // Ensure minutes are in 15-minute intervals\n    const roundedMinutes = Math.round(newMinutes / 15) * 15;\n    setMinutes(roundedMinutes);\n  };\n\n  const adjustOvertime100Hours = (delta: number) => {\n    const newHours = Math.max(0, Math.min(12, overtime100Hours + delta));\n    setOvertime100Hours(newHours);\n  };\n\n  const adjustOvertime100Minutes = (delta: number) => {\n    const newMinutes = Math.max(0, Math.min(45, overtime100Minutes + delta));\n    const roundedMinutes = Math.round(newMinutes / 15) * 15;\n    setOvertime100Minutes(roundedMinutes);\n  };\n\n  const adjustOvertime50Hours = (delta: number) => {\n    const newHours = Math.max(0, Math.min(12, overtime50Hours + delta));\n    setOvertime50Hours(newHours);\n  };\n\n  const adjustOvertime50Minutes = (delta: number) => {\n    const newMinutes = Math.max(0, Math.min(45, overtime50Minutes + delta));\n    const roundedMinutes = Math.round(newMinutes / 15) * 15;\n    setOvertime50Minutes(roundedMinutes);\n  };\n\n  const handleSave = async (nextStatus: 'utkast' | 'sendt' | 'godkjent' = status) => {\n    console.log('handleSave called with:', { aktivitetId, timer, nextStatus, activities: activities.length });\n    \n    if (!aktivitetId) {\n      toast({\n        title: \"Aktivitet påkrevd\",\n        description: \"Du må velge en aktivitet før du kan lagre.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (activities.length === 0) {\n      toast({\n        title: \"Ingen aktiviteter tilgjengelig\",\n        description: \"Det er ingen aktive aktiviteter konfigurert. Kontakt administrator.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Verify the selected activity exists\n    const selectedActivity = activities.find(a => a.id === aktivitetId);\n    if (!selectedActivity) {\n      toast({\n        title: \"Ugyldig aktivitet\",\n        description: \"Den valgte aktiviteten eksisterer ikke lenger.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (!validateTimeStep(timer)) {\n      toast({\n        title: \"Ugyldig timesteg\",\n        description: \"Timer må være i 0,25-steg (f.eks. 7,25, 7,50, 7,75, 8,00).\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Find specific overtime activities (50% and 100%)\n    let overtime50ActivityId = null;\n    let overtime100ActivityId = null;\n    \n    if (overtime100Timer > 0 || overtime50Timer > 0) {\n      try {\n        // Look for specific overtime activities\n        const { data: overtimeActivities, error: overtimeError } = await supabase\n          .from('ttx_activity_cache')\n          .select('id, navn, ttx_id')\n          .eq('org_id', orgId)\n          .eq('aktiv', true)\n          .ilike('navn', '%overtid%');\n\n        if (overtimeError) {\n          console.error('Error loading overtime activities:', overtimeError);\n        } else if (overtimeActivities && overtimeActivities.length > 0) {\n          console.log('Available overtime activities:', overtimeActivities.map(a => ({ id: a.id, navn: a.navn })));\n          \n          // Find specific overtime activities with more flexible search\n          const overtime50Activity = overtimeActivities.find(act => \n            act.navn && (\n              act.navn.toLowerCase().includes('50%') ||\n              act.navn.toLowerCase().includes('50') ||\n              act.navn.toLowerCase().includes('halv')\n            )\n          );\n          const overtime100Activity = overtimeActivities.find(act => \n            act.navn && (\n              act.navn.toLowerCase().includes('100%') ||\n              act.navn.toLowerCase().includes('100') ||\n              act.navn.toLowerCase().includes('full') ||\n              act.navn.toLowerCase().includes('hel')\n            )\n          );\n          \n          if (overtime50Activity) {\n            overtime50ActivityId = overtime50Activity.id;\n            console.log('Found 50% overtime activity:', overtime50Activity);\n          }\n          if (overtime100Activity) {\n            overtime100ActivityId = overtime100Activity.id;\n            console.log('Found 100% overtime activity:', overtime100Activity);\n          }\n        } else {\n          console.log('No overtime activities found in cache - edge function will create them automatically');\n        }\n      } catch (error) {\n        console.error('Error finding overtime activities:', error);\n      }\n    }\n\n    if (!validateTimeStep(timer)) {\n      toast({\n        title: \"Ugyldig tidsverdi\",\n        description: \"Timer må være i 0,25-steg (f.eks. 7,25, 7,50, 7,75, 8,00).\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (\n      totalOvertimeTimer > 0 &&\n      (!validateTimeStep(overtime100Timer) || !validateTimeStep(overtime50Timer))\n    ) {\n      toast({\n        title: \"Ugyldig overtidstidsverdi\",\n        description: \"Overtidstimer må være i 0,25-steg (f.eks. 1,25, 2,50, 3,75, 4,00).\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const previousStatus = status;\n    setStatus(nextStatus);\n    setLoading(true);\n    try {\n      // Delete all existing timer entries for this vakt to avoid duplicates\n      await supabase\n        .from('vakt_timer')\n        .delete()\n        .eq('vakt_id', vaktId);\n\n      // Save normal time entry\n      const normalTimeData = {\n        vakt_id: vaktId,\n        org_id: orgId,\n        timer,\n        aktivitet_id: aktivitetId || null, // Convert empty string to null\n        notat: notat || null,\n        status: nextStatus,\n        is_overtime: false\n      };\n\n      const result = await supabase\n        .from('vakt_timer')\n        .insert(normalTimeData);\n\n      if (result.error) throw result.error;\n\n      // Insert overtime entries if they exist\n      if (overtime100Timer > 0) {\n        const overtime100Data = {\n          vakt_id: vaktId,\n          org_id: orgId,\n          timer: overtime100Timer,\n          aktivitet_id: aktivitetId || null, // Convert empty string to null\n          overtime_aktivitet_id: overtime100ActivityId || null, // Use specific 100% overtime activity\n          notat: notat || null,\n          status: nextStatus,\n          is_overtime: true,\n          lonnstype: 'overtid_100' // Mark as 100% overtime\n        };\n\n        const overtime100Result = await supabase\n          .from('vakt_timer')\n          .insert(overtime100Data);\n\n        if (overtime100Result.error) throw overtime100Result.error;\n      }\n\n      if (overtime50Timer > 0) {\n        const overtime50Data = {\n          vakt_id: vaktId,\n          org_id: orgId,\n          timer: overtime50Timer,\n          aktivitet_id: aktivitetId || null, // Convert empty string to null\n          overtime_aktivitet_id: overtime50ActivityId || null, // Use specific 50% overtime activity\n          notat: notat || null,\n          status: nextStatus,\n          is_overtime: true,\n          lonnstype: 'overtid_50' // Mark as 50% overtime\n        };\n\n        const overtime50Result = await supabase\n          .from('vakt_timer')\n          .insert(overtime50Data);\n\n        if (overtime50Result.error) throw overtime50Result.error;\n      }\n\n      toast({\n        title: \"Lagret\",\n        description: `Timeføring lagret${totalOvertimeTimer > 0 ? ` med ${formatTimeValue(totalOvertimeTimer)} overtid` : ''}.`\n      });\n\n      onSave?.();\n    } catch (error: unknown) {\n      toast({\n        title: \"Lagring feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n      setStatus(previousStatus);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = () => {\n    switch (status) {\n      case 'godkjent':\n        return <Badge className=\"bg-green-500\">🟢 Godkjent</Badge>;\n      case 'sendt':\n        return <Badge className=\"bg-blue-500\">🔵 Sendt</Badge>;\n      default:\n        return <Badge variant=\"outline\">📝 Utkast</Badge>;\n    }\n  };\n\n  return (\n    <Card className=\"mb-4\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between\">\n          <span className=\"flex items-center gap-2\">\n            <Clock className=\"h-4 w-4\" />\n            Timeføring\n          </span>\n          {getStatusBadge()}\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"space-y-3\">\n          <Label>Timer</Label>\n          <div className=\"flex items-center justify-center gap-6 p-4 border rounded-lg bg-muted/20\">\n            {/* Hours Section */}\n            <div className=\"flex flex-col items-center space-y-2\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustHours(1)}\n                disabled={hours >= 8}\n              >\n                <ChevronUp className=\"h-4 w-4\" />\n              </Button>\n              <div className=\"text-3xl font-bold w-16 text-center\">\n                {hours.toString().padStart(2, '0')}\n                <div className=\"text-xs text-muted-foreground font-normal mt-1\">T</div>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustHours(-1)}\n                disabled={hours <= 0}\n              >\n                <ChevronDown className=\"h-4 w-4\" />\n              </Button>\n            </div>\n\n            {/* Minutes Section */}\n            <div className=\"flex flex-col items-center space-y-2\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustMinutes(15)}\n                disabled={minutes >= 45}\n              >\n                <ChevronUp className=\"h-4 w-4\" />\n              </Button>\n              <div className=\"text-3xl font-bold w-16 text-center\">\n                {minutes.toString().padStart(2, '0')}\n                <div className=\"text-xs text-muted-foreground font-normal mt-1\">M</div>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustMinutes(-15)}\n                disabled={minutes <= 0}\n              >\n                <ChevronDown className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n          <div className=\"text-center text-sm text-muted-foreground\">\n            Total: {formatTimeValue(timer)} timer\n            {totalOvertimeTimer > 0 && (\n              <span className=\"ml-2 text-yellow-600 font-bold\">\n                + {formatTimeValue(totalOvertimeTimer)} overtid ⚡\n              </span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"aktivitet\">Aktivitet *</Label>\n          <Select \n            value={aktivitetId} \n            onValueChange={(value) => {\n              console.log('Activity selected:', value);\n              setAktivitetId(value);\n            }}\n            disabled={activities.length === 0}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder={activities.length === 0 ? \"Ingen aktiviteter tilgjengelig\" : \"Velg aktivitet\"} />\n            </SelectTrigger>\n            <SelectContent className=\"bg-background border z-50\">\n              {activities.length === 0 ? (\n                <div className=\"px-2 py-1.5 text-sm text-muted-foreground\">\n                  Ingen aktiviteter tilgjengelig\n                </div>\n              ) : (\n                activities.map((activity) => (\n                  <SelectItem key={activity.id} value={activity.id}>\n                    {activity.navn}\n                  </SelectItem>\n                ))\n              )}\n            </SelectContent>\n          </Select>\n          {activities.length === 0 && (\n            <p className=\"text-sm text-muted-foreground\">\n              Kontakt administrator for å få aktiviteter konfigurert.\n            </p>\n          )}\n        </div>\n\n        {/* Overtime Section */}\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              Overtid\n            </Label>\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setShowOvertime(!showOvertime)}\n              className=\"min-h-[44px] w-full sm:w-auto text-xs\"\n            >\n              {showOvertime ? 'Skjul' : 'Vis'}\n            </Button>\n          </div>\n          \n          {showOvertime && (\n            <div className=\"space-y-4 p-4 border rounded-lg bg-yellow-50 border-yellow-200\">\n              {/* 100% Overtime */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-blue-600 font-medium\">Overtidstillegg 100%</Label>\n                <div className=\"flex items-center justify-center gap-6\">\n                  {/* 100% Hours */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Hours(1)}\n                      disabled={overtime100Hours >= 12}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime100Hours.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">T</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Hours(-1)}\n                      disabled={overtime100Hours <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n\n                  {/* 100% Minutes */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Minutes(15)}\n                      disabled={overtime100Minutes >= 45}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime100Minutes.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">M</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Minutes(-15)}\n                      disabled={overtime100Minutes <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n\n              {/* 50% Overtime */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-blue-600 font-medium\">Overtidstillegg 50%</Label>\n                <div className=\"flex items-center justify-center gap-6\">\n                  {/* 50% Hours */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Hours(1)}\n                      disabled={overtime50Hours >= 12}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime50Hours.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">T</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Hours(-1)}\n                      disabled={overtime50Hours <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n\n                  {/* 50% Minutes */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Minutes(15)}\n                      disabled={overtime50Minutes >= 45}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime50Minutes.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">M</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Minutes(-15)}\n                      disabled={overtime50Minutes <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          {showOvertime && (\n            <div className=\"text-center text-sm text-muted-foreground\">\n              Overtid: {formatTimeValue(totalOvertimeTimer)} timer\n              {totalOvertimeTimer > 0 && <span className=\"ml-2 text-yellow-600 font-bold\">⚡</span>}\n            </div>\n          )}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"notat\">Notat</Label>\n          <Textarea\n            id=\"notat\"\n            value={notat}\n            onChange={(e) => setNotat(e.target.value)}\n            placeholder=\"Valgfritt notat...\"\n            rows={3}\n          />\n        </div>\n\n        <div className=\"flex gap-2\">\n          <Button\n            onClick={() => handleSave('utkast')}\n            disabled={loading}\n            variant=\"outline\"\n          >\n            {loading && status === 'utkast' ? 'Lagrer...' : 'Lagre utkast'}\n          </Button>\n          <Button\n            onClick={() => handleSave('sendt')}\n            disabled={loading}\n          >\n            {loading && status === 'sendt' ? 'Sender...' : 'Send til godkjenning'}\n          </Button>\n          {existingEntry && (\n            <div className=\"flex gap-1\">\n              <Button variant=\"outline\" size=\"icon\">\n                <MessageSquare className=\"h-4 w-4\" />\n              </Button>\n              <Button variant=\"outline\" size=\"icon\">\n                <Paperclip className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default TimeEntry;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1873, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/command.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { type DialogProps } from \"@radix-ui/react-dialog\";\nimport { Command as CommandPrimitive } from \"cmdk\";\nimport { Search } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\nCommand.displayName = CommandPrimitive.displayName;\n\ntype CommandDialogProps = DialogProps;\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  </div>\n));\n\nCommandInput.displayName = CommandPrimitive.Input.displayName;\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n));\n\nCommandList.displayName = CommandPrimitive.List.displayName;\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />);\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\n));\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandItem.displayName = CommandPrimitive.Item.displayName;\n\nconst CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\n  return <span className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)} {...props} />;\n};\nCommandShortcut.displayName = \"CommandShortcut\";\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AACA;;;;;;;AAEA,MAAM,wBAAU,gRAAgB,CAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,8MAAgB;QACf,KAAK;QACL,WAAW,IAAA,sLAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;AAGb,QAAQ,WAAW,GAAG,8MAAgB,CAAC,WAAW;AAIlD,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,GAAG,OAA2B;IAC/D,qBACE,2SAAC,yMAAM;QAAE,GAAG,KAAK;kBACf,cAAA,2SAAC,gNAAa;YAAC,WAAU;sBACvB,cAAA,2SAAC;gBAAQ,WAAU;0BAChB;;;;;;;;;;;;;;;;AAKX;AAEA,MAAM,6BAAe,gRAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC;QAAI,WAAU;QAAkC,sBAAmB;;0BAClE,2SAAC,6QAAM;gBAAC,WAAU;;;;;;0BAClB,2SAAC,8MAAgB,CAAC,KAAK;gBACrB,KAAK;gBACL,WAAW,IAAA,sLAAE,EACX,0JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAKf,aAAa,WAAW,GAAG,8MAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,4BAAc,gRAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,8MAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,sLAAE,EAAC,mDAAmD;QAChE,GAAG,KAAK;;;;;;AAIb,YAAY,WAAW,GAAG,8MAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,6BAAe,gRAAgB,CAGnC,CAAC,OAAO,oBAAQ,2SAAC,8MAAgB,CAAC,KAAK;QAAC,KAAK;QAAK,WAAU;QAA4B,GAAG,KAAK;;;;;;AAElG,aAAa,WAAW,GAAG,8MAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,6BAAe,gRAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,8MAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAW,IAAA,sLAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;AAIb,aAAa,WAAW,GAAG,8MAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,iCAAmB,gRAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,8MAAgB,CAAC,SAAS;QAAC,KAAK;QAAK,WAAW,IAAA,sLAAE,EAAC,wBAAwB;QAAa,GAAG,KAAK;;;;;;AAEnG,iBAAiB,WAAW,GAAG,8MAAgB,CAAC,SAAS,CAAC,WAAW;AAErE,MAAM,4BAAc,gRAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,2SAAC,8MAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,sLAAE,EACX,2PACA;QAED,GAAG,KAAK;;;;;;AAIb,YAAY,WAAW,GAAG,8MAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,kBAAkB,CAAC,EAAE,SAAS,EAAE,GAAG,OAA8C;IACrF,qBAAO,2SAAC;QAAK,WAAW,IAAA,sLAAE,EAAC,yDAAyD;QAAa,GAAG,KAAK;;;;;;AAC3G;AACA,gBAAgB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2032, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Popover = PopoverPrimitive.Root;\n\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className,\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n));\nPopoverContent.displayName = PopoverPrimitive.Content.displayName;\n\nexport { Popover, PopoverTrigger, PopoverContent };\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,wOAAqB;AAErC,MAAM,iBAAiB,2OAAwB;AAE/C,MAAM,+BAAiB,gRAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,2SAAC,0OAAuB;kBACtB,cAAA,2SAAC,2OAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,sLAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,2OAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2073, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ProjectSelector.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from '@/components/ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Check, ChevronsUpDown } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface Project {\n  id: string;\n  project_name: string | null;\n  project_number: number | null;\n  tripletex_project_id: number | null;\n  customer_name?: string | null;\n}\n\ninterface ProjectSelectorProps {\n  value?: string;\n  onValueChange: (projectId: string) => void;\n  orgId: string;\n  personId?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  excludeProjectIds?: string[]; // Projects to exclude from the list\n}\n\nconst ProjectSelector = ({ \n  value, \n  onValueChange, \n  orgId, \n  personId, \n  placeholder = \"Velg prosjekt...\",\n  disabled = false,\n  excludeProjectIds = []\n}: ProjectSelectorProps) => {\n  const [open, setOpen] = useState(false);\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n\n  const loadProjects = useCallback(async () => {\n    if (!orgId) return;\n    \n    setLoading(true);\n    try {\n      const query = supabase\n        .from('ttx_project_cache')\n        .select(`\n          id,\n          project_name,\n          project_number,\n          tripletex_project_id,\n          customer_name\n        `)\n        .eq('org_id', orgId)\n        .eq('is_active', true)\n        .order('project_name');\n\n      // If personId is provided, show all active projects (not just assigned ones)\n      // This allows assigning new projects to people\n      const { data, error } = await query;\n\n      if (error) {\n        throw error;\n      }\n      \n      // Filter out excluded projects\n      const filteredProjects = (data || []).filter(project => \n        !excludeProjectIds.includes(project.id)\n      );\n      \n      setProjects(filteredProjects);\n      \n      if (!data || data.length === 0) {\n        toast({\n          title: \"Ingen aktive prosjekter funnet\",\n          description: \"Det finnes ingen aktive prosjekter i systemet.\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Error loading projects:', error);\n      toast({\n        title: \"Feil ved lasting av prosjekter\",\n        description: error instanceof Error ? error.message : \"Kunne ikke laste prosjekter.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [orgId, personId, toast, excludeProjectIds]);\n\n  useEffect(() => {\n    if (open) {\n      loadProjects();\n    }\n  }, [open, loadProjects]);\n\n  const selectedProject = projects.find(p => p.id === value);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className=\"w-full justify-between\"\n          disabled={disabled}\n        >\n          {selectedProject ? (\n            <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n              <span className=\"break-words hyphens-auto leading-tight text-left\">{selectedProject.project_name}</span>\n              {selectedProject.project_number && (\n                <Badge variant=\"secondary\" className=\"text-xs flex-shrink-0\">\n                  #{selectedProject.project_number}\n                </Badge>\n              )}\n            </div>\n          ) : (\n            <span className=\"text-muted-foreground\">{placeholder}</span>\n          )}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-full p-0\" align=\"start\">\n        <Command>\n          <CommandInput placeholder=\"Søk prosjekter...\" />\n          <CommandList>\n            <CommandEmpty>\n              {loading ? (\n                \"Laster prosjekter...\"\n              ) : projects.length === 0 ? (\n                \"Ingen prosjekter funnet\"\n              ) : (\n                \"Ingen prosjekter matcher søket\"\n              )}\n            </CommandEmpty>\n            <CommandGroup>\n              {projects.map((project) => (\n                <CommandItem\n                  key={project.id}\n                  value={`${project.project_name} ${project.project_number} ${project.customer_name || ''}`}\n                  onSelect={() => {\n                    onValueChange(project.id);\n                    setOpen(false);\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 h-4 w-4\",\n                      value === project.id ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  <div className=\"flex flex-col gap-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">{project.project_name}</span>\n                      {project.project_number && (\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          #{project.project_number}\n                        </Badge>\n                      )}\n                    </div>\n                    {project.customer_name && (\n                      <span className=\"text-sm text-muted-foreground\">\n                        {project.customer_name}\n                      </span>\n                    )}\n                  </div>\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default ProjectSelector;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2344, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ProjectSearchDialog.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Calendar, User, Building } from 'lucide-react';\nimport { getPersonDisplayName } from '@/lib/displayNames';\nimport ProjectSelector from './ProjectSelector';\n\ninterface ProjectSearchDialogProps {\n  open: boolean;\n  onClose: () => void;\n  date: string;\n  personId: string;\n  orgId: string;\n  onProjectAssigned: () => void;\n}\n\ninterface Person {\n  fornavn: string;\n  etternavn: string;\n}\n\nconst ProjectSearchDialog = ({ open, onClose, date, personId, orgId, onProjectAssigned }: ProjectSearchDialogProps) => {\n  const [person, setPerson] = useState<Person | null>(null);\n  const [selectedProjectId, setSelectedProjectId] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n  const [existingProjectIds, setExistingProjectIds] = useState<string[]>([]);\n  const { toast } = useToast();\n\n  const loadPerson = useCallback(async () => {\n    if (!personId) return;\n    \n    try {\n      const { data, error } = await supabase\n        .from('person')\n        .select('fornavn, etternavn')\n        .eq('id', personId)\n        .single();\n\n      if (error) throw error;\n      setPerson(data);\n    } catch (error) {\n      console.error('Error loading person:', error);\n    }\n  }, [personId]);\n\n  const loadExistingProjects = useCallback(async () => {\n    if (!personId || !date || !orgId) return;\n    \n    try {\n      const { data, error } = await supabase\n        .from('vakt')\n        .select('project_id')\n        .eq('person_id', personId)\n        .eq('dato', date)\n        .eq('org_id', orgId);\n\n      if (error) throw error;\n      \n      const projectIds = (data || []).map(v => v.project_id).filter(Boolean);\n      setExistingProjectIds(projectIds);\n    } catch (error) {\n      console.error('Error loading existing projects:', error);\n    }\n  }, [personId, date, orgId]);\n\n  useEffect(() => {\n    if (open) {\n      loadPerson();\n      loadExistingProjects();\n      setSelectedProjectId('');\n    }\n  }, [open, loadPerson, loadExistingProjects]);\n\n  const assignProject = async () => {\n    if (!selectedProjectId) {\n      toast({\n        title: \"Prosjekt påkrevd\",\n        description: \"Du må velge et prosjekt før du kan tilordne det.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const { error } = await supabase\n        .from('vakt')\n        .insert({\n          dato: date,\n          person_id: personId,\n          project_id: selectedProjectId,\n          org_id: orgId\n        });\n\n      if (error) throw error;\n\n      toast({\n        title: \"Prosjekt tilordnet\",\n        description: \"Prosjektet har blitt tilordnet til denne dagen.\",\n      });\n\n      onProjectAssigned();\n      onClose();\n    } catch (error) {\n      console.error('Error assigning project:', error);\n      toast({\n        title: \"Feil ved tilordning\",\n        description: error instanceof Error ? error.message : \"Kunne ikke tilordne prosjekt.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setSelectedProjectId('');\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"w-full max-w-lg mx-4 sm:mx-0 sm:w-auto sm:max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Calendar className=\"h-5 w-5\" />\n            Finn prosjekt\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* Person info */}\n          {person && (\n            <div className=\"flex items-center gap-2 p-3 bg-muted rounded-lg\">\n              <User className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-sm font-medium\">\n                {getPersonDisplayName(person.fornavn, person.etternavn)}\n              </span>\n            </div>\n          )}\n\n          {/* Date info */}\n          <div className=\"flex items-center gap-2 p-3 bg-muted rounded-lg\">\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"text-sm\">\n              {new Date(date).toLocaleDateString('no-NO', { \n                weekday: 'long', \n                day: 'numeric', \n                month: 'long' \n              })}\n            </span>\n          </div>\n\n          {/* Project selector */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">Velg prosjekt</label>\n            <ProjectSelector\n              value={selectedProjectId}\n              onValueChange={setSelectedProjectId}\n              orgId={orgId}\n              personId={personId}\n              placeholder=\"Søk og velg prosjekt...\"\n              excludeProjectIds={existingProjectIds}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              {existingProjectIds.length > 0 \n                ? `${existingProjectIds.length} prosjekt(er) allerede lagt til for denne dagen og vises ikke.`\n                : \"Alle aktive prosjekter vil vises.\"\n              }\n            </p>\n          </div>\n\n          {/* Action buttons */}\n          <div className=\"flex gap-2 pt-4\">\n            <Button\n              onClick={assignProject}\n              disabled={!selectedProjectId || loading}\n              className=\"flex-1\"\n            >\n              {loading ? \"Tilordner...\" : \"Tilordne prosjekt\"}\n            </Button>\n            <Button variant=\"outline\" onClick={handleClose}>\n              Avbryt\n            </Button>\n          </div>\n\n          {/* Info about admin request */}\n          <div className=\"text-xs text-muted-foreground text-center p-3 bg-muted rounded-lg\">\n            <Building className=\"h-4 w-4 mx-auto mb-1\" />\n            <p>\n              Hvis du ikke finner prosjektet du leter etter, kan du be administrator om å tilordne det.\n            </p>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ProjectSearchDialog;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2646, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ProjectDetailDialog.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Building, User, Phone, Mail, FileText, Calendar } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\n\ninterface ProjectDetailDialogProps {\n  open: boolean;\n  onClose: () => void;\n  project: {\n    project_name: string | null;\n    project_number: number | null;\n    tripletex_project_id: number | null;\n  };\n  orgId: string;\n}\n\ninterface ProjectDetails {\n  id: number;\n  name: string;\n  number: number;\n  description?: string;\n  startDate?: string;\n  endDate?: string;\n  customer: {\n    name: string;\n    email?: string;\n    phoneNumber?: string;\n  };\n  projectManager?: {\n    firstName: string;\n    lastName: string;\n    email?: string;\n    phoneNumber?: string;\n  };\n  department?: {\n    name: string;\n  };\n  isClosed: boolean;\n  displayName: string;\n}\n\nconst ProjectDetailDialog = ({ open, onClose, project, orgId }: ProjectDetailDialogProps) => {\n  const [projectDetails, setProjectDetails] = useState<ProjectDetails | null>(null);\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n\n  const loadProjectDetails = useCallback(async () => {\n    setLoading(true);\n    try {\n      // Call Tripletex API through our edge function using Supabase client\n      const { data, error } = await supabase.functions.invoke('tripletex-api', {\n        body: {\n          action: 'get_project_details',\n          project_id: project.tripletex_project_id,\n          orgId: orgId\n        }\n      });\n\n      if (error) {\n        console.error('Supabase function error:', error);\n        throw new Error(error.message || 'Failed to load project details');\n      }\n\n      if (!data?.success) {\n        throw new Error(data?.error || 'Failed to load project details');\n      }\n\n      setProjectDetails(data.data);\n    } catch (error) {\n      console.error('Error loading project details:', error);\n      toast({\n        title: \"Kunne ikke laste prosjektdetaljer\", \n        description: error instanceof Error ? error.message : \"Det oppstod en feil ved lasting av prosjektinformasjon fra Tripletex.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [project, orgId, toast]);\n\n  useEffect(() => {\n    if (open && project) {\n      loadProjectDetails();\n    }\n  }, [open, project, loadProjectDetails]);\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"w-full max-w-md mx-4 sm:mx-0 sm:w-auto sm:max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5\" />\n            Prosjektdetaljer\n          </DialogTitle>\n        </DialogHeader>\n\n        {loading ? (\n          <div className=\"py-8 text-center text-muted-foreground\">\n            Laster prosjektinformasjon...\n          </div>\n        ) : projectDetails ? (\n          <div className=\"space-y-6\">\n            {/* Project Overview */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center justify-between\">\n                  <span className=\"break-words hyphens-auto leading-tight\">{projectDetails.displayName}</span>\n                  <Badge variant={projectDetails.isClosed ? \"secondary\" : \"default\"} className=\"ml-2 flex-shrink-0\">\n                    {projectDetails.isClosed ? \"Avsluttet\" : \"Aktiv\"}\n                  </Badge>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3 w-full overflow-hidden\">\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <span className=\"font-medium\">Prosjektnummer:</span>\n                    <p>{projectDetails.number}</p>\n                  </div>\n                  <div>\n                    <span className=\"font-medium\">Prosjekt-ID:</span>\n                    <p>{projectDetails.id}</p>\n                  </div>\n                </div>\n                \n                {projectDetails.description && (\n                  <div className=\"w-full\">\n                    <span className=\"font-medium text-sm\">Beskrivelse:</span>\n                    <p className=\"text-sm text-muted-foreground mt-1 break-all overflow-wrap-anywhere word-break-break-all leading-relaxed whitespace-pre-wrap\">{projectDetails.description}</p>\n                  </div>\n                )}\n\n                {(projectDetails.startDate || projectDetails.endDate) && (\n                  <div className=\"flex items-center gap-4 text-sm\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <div className=\"flex gap-4\">\n                      {projectDetails.startDate && (\n                        <div>\n                          <span className=\"font-medium\">Start:</span>\n                          <span className=\"ml-1\">{new Date(projectDetails.startDate).toLocaleDateString('no-NO')}</span>\n                        </div>\n                      )}\n                      {projectDetails.endDate && (\n                        <div>\n                          <span className=\"font-medium\">Slutt:</span>\n                          <span className=\"ml-1\">{new Date(projectDetails.endDate).toLocaleDateString('no-NO')}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Customer Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Building className=\"h-4 w-4\" />\n                  Kundeinformasjon\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div>\n                  <span className=\"font-medium\">Kunde:</span>\n                  <p>{projectDetails.customer.name}</p>\n                </div>\n                \n                {projectDetails.customer.email && (\n                  <div className=\"flex items-center gap-2\">\n                    <Mail className=\"h-4 w-4 flex-shrink-0\" />\n                    <a \n                      href={`mailto:${projectDetails.customer.email}`}\n                      className=\"text-blue-600 hover:text-blue-800 underline break-all\"\n                    >\n                      {projectDetails.customer.email}\n                    </a>\n                  </div>\n                )}\n                \n                {projectDetails.customer.phoneNumber && (\n                  <div className=\"flex items-center gap-2\">\n                    <Phone className=\"h-4 w-4 flex-shrink-0\" />\n                    <a \n                      href={`tel:${projectDetails.customer.phoneNumber}`}\n                      className=\"text-blue-600 hover:text-blue-800 underline\"\n                    >\n                      {projectDetails.customer.phoneNumber}\n                    </a>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Project Manager */}\n            {projectDetails.projectManager && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <User className=\"h-4 w-4\" />\n                    Prosjektleder\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <div>\n                    <span className=\"font-medium\">Navn:</span>\n                    <p>{projectDetails.projectManager.firstName} {projectDetails.projectManager.lastName}</p>\n                  </div>\n                  \n                  {projectDetails.projectManager.email && (\n                    <div className=\"flex items-center gap-2\">\n                      <Mail className=\"h-4 w-4 flex-shrink-0\" />\n                      <a \n                        href={`mailto:${projectDetails.projectManager.email}`}\n                        className=\"text-blue-600 hover:text-blue-800 underline break-all\"\n                      >\n                        {projectDetails.projectManager.email}\n                      </a>\n                    </div>\n                  )}\n                  \n                  {projectDetails.projectManager.phoneNumber && (\n                    <div className=\"flex items-center gap-2\">\n                      <Phone className=\"h-4 w-4 flex-shrink-0\" />\n                      <a \n                        href={`tel:${projectDetails.projectManager.phoneNumber}`}\n                        className=\"text-blue-600 hover:text-blue-800 underline\"\n                      >\n                        {projectDetails.projectManager.phoneNumber}\n                      </a>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Department */}\n            {projectDetails.department && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Avdeling</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <p>{projectDetails.department.name}</p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        ) : (\n          <div className=\"py-8 text-center text-muted-foreground\">\n            Kunne ikke laste prosjektinformasjon\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ProjectDetailDialog;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3253, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/DayCard.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogTrigger } from '@/components/ui/dialog';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { Copy, Plus, MessageSquare, Paperclip } from 'lucide-react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useToast } from '@/hooks/use-toast';\nimport { formatTimeValue, getPersonDisplayName, generateProjectColor } from '@/lib/displayNames';\nimport { toLocalDateString } from '@/lib/utils';\nimport TimeEntry from './TimeEntry';\nimport ProjectSearchDialog from './ProjectSearchDialog';\nimport ProjectDetailDialog from './ProjectDetailDialog';\n\ninterface DayCardProps {\n  date: Date;\n  orgId: string;\n  personId?: string;\n  forventetTimer?: number;\n  calendarDays?: Array<{\n    dato: string;\n    is_holiday: boolean;\n    is_weekend: boolean;\n    holiday_name: string | null;\n  }>;\n}\n\ninterface VaktWithTimer {\n  id: string;\n  project_id: string | null;\n  person: {\n    fornavn: string;\n    etternavn: string;\n    forventet_dagstimer: number | null;\n  };\n  ttx_project_cache: {\n    project_name: string | null;\n    project_number: number | null;\n    tripletex_project_id: number | null;\n  } | null;\n  vakt_timer: Array<{\n    id: string;\n    timer: number;\n    status: string | null;\n    aktivitet_id?: string | null;\n    tripletex_synced_at?: string | null;\n    tripletex_entry_id?: number | null;\n    ttx_activity_cache: {\n      navn: string;\n    } | null;\n    notat: string | null;\n    lonnstype: string | null;\n    is_overtime: boolean | null;\n  }>;\n}\n\ninterface ProjectColor {\n  tripletex_project_id: number;\n  hex: string;\n}\n\nconst DayCard = ({ date, orgId, personId, forventetTimer = 8.0, calendarDays }: DayCardProps) => {\n  const [vakter, setVakter] = useState<VaktWithTimer[]>([]);\n  const [projectColors, setProjectColors] = useState<Record<number, string>>({});\n  const [loading, setLoading] = useState(true);\n  const [activeVaktId, setActiveVaktId] = useState<string | null>(null);\n  const [selectedTimer, setSelectedTimer] = useState<VaktWithTimer['vakt_timer'][number] | null>(null);\n  const [selectedProject, setSelectedProject] = useState<{\n    project_name: string | null;\n    project_number: number | null;\n    tripletex_project_id: number | null;\n  } | null>(null);\n  const [showProjectDialog, setShowProjectDialog] = useState(false);\n  const { toast } = useToast();\n\n\n  const loadDayData = useCallback(async () => {\n    if (!personId) {\n      setVakter([]);\n      setLoading(false);\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const query = supabase\n        .from('vakt')\n        .select(`\n          id,\n          project_id,\n          person:person_id (\n            fornavn, \n            etternavn, \n            forventet_dagstimer\n          ),\n          ttx_project_cache:project_id (\n            project_name,\n            project_number,\n            tripletex_project_id\n          ),\n          vakt_timer (\n            id,\n            timer,\n            status,\n            notat,\n            lonnstype,\n            is_overtime,\n            aktivitet_id,\n            tripletex_synced_at,\n            tripletex_entry_id,\n            ttx_activity_cache!aktivitet_id (\n              navn\n            )\n          )\n        `)\n        .eq('org_id', orgId)\n        .eq('dato', toLocalDateString(date))\n        .eq('person_id', personId);\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n      setVakter(data || []);\n    } catch (error) {\n      console.error('Error loading day data:', error);\n      // Toast will be handled by the component that calls this function\n    } finally {\n      setLoading(false);\n    }\n  }, [date, orgId, personId]);\n\n  const loadProjectColors = useCallback(async () => {\n    try {\n      const { data, error } = await supabase\n        .from('project_color')\n        .select('tripletex_project_id, hex')\n        .eq('org_id', orgId);\n\n      if (error) throw error;\n      \n      const colorMap: Record<number, string> = {};\n      data?.forEach((color: ProjectColor) => {\n        colorMap[color.tripletex_project_id] = color.hex;\n      });\n      \n      setProjectColors(colorMap);\n    } catch (error) {\n      console.error('Error loading project colors:', error);\n    }\n  }, [orgId]);\n\n  useEffect(() => {\n    loadDayData();\n    loadProjectColors();\n  }, [loadDayData, loadProjectColors]);\n\n  const getProjectColor = (tripletexProjectId?: number) => {\n    if (!tripletexProjectId) return '#94a3b8';\n    return projectColors[tripletexProjectId] || generateProjectColor(tripletexProjectId);\n  };\n\n  const copyFromPreviousDay = async () => {\n    if (!personId) {\n      toast({\n        title: \"Kan ikke kopiere\",\n        description: \"Fant ikke ansatt-ID for denne visningen.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const previousDay = new Date(date);\n    previousDay.setDate(previousDay.getDate() - 1);\n\n      const previousDateStr = toLocalDateString(previousDay);\n      const todayDateStr = toLocalDateString(date);\n\n    try {\n      const { data: prevEntries, error } = await supabase\n        .from('vakt_timer')\n        .select(`\n          timer,\n          aktivitet_id,\n          lonnstype,\n          notat,\n          is_overtime,\n          vakt:vakt_id (\n            person_id,\n            project_id,\n            id\n          )\n        `)\n        .eq('vakt.dato', previousDateStr)\n        .eq('vakt.org_id', orgId)\n        .eq('vakt.person_id', personId);\n\n      if (error) throw error;\n\n      if (!prevEntries || prevEntries.length === 0) {\n        toast({\n          title: \"Ingen data å kopiere\",\n          description: \"Fant ingen timeføringer å kopiere fra forrige dag.\"\n        });\n        return;\n      }\n\n      const entriesByProject = new Map<string, Array<(typeof prevEntries)[number]>>();\n      prevEntries.forEach(entry => {\n        const projectId = entry.vakt?.project_id;\n        if (!projectId) return;\n        const existing = entriesByProject.get(projectId) ?? [];\n        existing.push(entry);\n        entriesByProject.set(projectId, existing);\n      });\n\n      let insertedCount = 0;\n\n      for (const [projectId, entries] of entriesByProject) {\n        const matchingVakt = vakter.find(v => v.project_id === projectId);\n        let targetVaktId = matchingVakt?.id;\n\n        if (!targetVaktId) {\n          const { data: newVakt, error: createError } = await supabase\n            .from('vakt')\n            .insert({\n              person_id: personId,\n              project_id: projectId,\n              dato: todayDateStr,\n              org_id: orgId\n            })\n            .select('id')\n            .single();\n\n          if (createError) throw createError;\n          targetVaktId = newVakt?.id;\n        }\n\n        if (!targetVaktId) {\n          continue;\n        }\n\n        for (const entry of entries) {\n          const alreadyExists = matchingVakt?.vakt_timer?.some(timer => {\n            return (\n              timer.aktivitet_id === entry.aktivitet_id &&\n              Number(timer.timer) === Number(entry.timer)\n            );\n          });\n\n          if (alreadyExists) {\n            continue;\n          }\n\n          const { error: insertError } = await supabase\n            .from('vakt_timer')\n            .insert({\n              vakt_id: targetVaktId,\n              org_id: orgId,\n              timer: entry.timer,\n              aktivitet_id: entry.aktivitet_id,\n              lonnstype: entry.lonnstype,\n              notat: entry.notat,\n              status: 'utkast',\n              is_overtime: entry.is_overtime ?? false\n            });\n\n          if (insertError) throw insertError;\n          insertedCount += 1;\n        }\n      }\n\n      if (insertedCount > 0) {\n        toast({\n          title: \"Kopiert fra forrige dag\",\n          description: `${insertedCount} timeføring${insertedCount === 1 ? '' : 'er'} kopiert.`\n        });\n      } else {\n        toast({\n          title: \"Ingen nye timeføringer\",\n          description: \"Timeføringer fra forrige dag finnes allerede i dag.\"\n        });\n      }\n\n      loadDayData();\n    } catch (error: unknown) {\n      toast({\n        title: \"Kopiering feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const getTotalHours = () => {\n    return vakter.reduce((total, vakt) => {\n      return total + vakt.vakt_timer.reduce((vaktTotal, timer) => vaktTotal + timer.timer, 0);\n    }, 0);\n  };\n\n  const getOvertimeHours = () => {\n    return vakter.reduce((total, vakt) => {\n      return total + vakt.vakt_timer.reduce((vaktTotal, timer) => {\n        return vaktTotal + (timer.is_overtime ? timer.timer : 0);\n      }, 0);\n    }, 0);\n  };\n\n  const getExpectedHours = () => {\n    if (vakter.length === 0) return forventetTimer;\n    \n    // Check against kalender_dag table for holidays\n    const dateStr = toLocalDateString(date);\n      const calendarDay = calendarDays?.find(d => d.dato === dateStr);\n    \n    if (calendarDay?.is_holiday || calendarDay?.is_weekend) {\n      // TODO: Get from admin settings - default_expected_hours_on_holidays\n      return 0;\n    }\n    \n    return vakter[0]?.person?.forventet_dagstimer || forventetTimer;\n  };\n\n  const getStatusChip = () => {\n    // Don't show status chips - employees can see actual hours per day\n    return null;\n  };\n\n  const isToday = () => {\n    const today = new Date();\n    return date.toDateString() === today.toDateString();\n  };\n\n  if (loading) {\n    return (\n      <Card>\n        <CardContent className=\"p-4\">\n          <div className=\"text-center text-muted-foreground\">Laster...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!personId) {\n    return (\n      <Card className=\"h-full\">\n        <CardContent className=\"p-4\">\n          <div className=\"text-center text-muted-foreground\">\n            <p className=\"text-sm\">Ingen ansatt valgt</p>\n            <p className=\"text-xs mt-1\">Velg en ansatt for å se dagdata</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card \n      className={`h-full ${isToday() ? 'ring-2 ring-primary bg-blue-50/50' : ''}`}\n      id={`day-${date.toISOString().split('T')[0]}`}\n    >\n      <CardHeader className=\"pb-2\">\n        <CardTitle className=\"flex items-center justify-between text-base\">\n          <span className=\"text-base font-medium capitalize\">\n            {date.toLocaleDateString('no-NO', { weekday: 'long', day: '2-digit', month: '2-digit' }).replace(/\\.$/, '')}\n            {isToday() && (\n              <span className=\"ml-2 text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full\">\n                I dag\n              </span>\n            )}\n          </span>\n          {getStatusChip()}\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-2 text-sm\">\n        <div className=\"text-center text-xs\">\n          <div className=\"flex justify-center items-center gap-2\">\n            <span className=\"text-muted-foreground\">Timer ført:</span>\n            <span className=\"font-medium text-lg\">\n              {formatTimeValue(getTotalHours())}\n              {getOvertimeHours() > 0 && (\n                <span className=\"ml-1 text-yellow-600 font-bold\" title={`${formatTimeValue(getOvertimeHours())} overtid`}>⚡</span>\n              )}\n            </span>\n          </div>\n        </div>\n\n        {vakter.length > 0 && (\n          <div className=\"space-y-2\">\n            <h4 className=\"text-xs font-medium\">Dagens oppdrag:</h4>\n            {vakter.map((vakt) => (\n              <div key={vakt.id} className=\"space-y-1\">\n                <div className=\"text-xs flex items-center gap-1\">\n                  <span className=\"text-muted-foreground text-xs truncate\">\n                    {vakt.person && getPersonDisplayName(vakt.person.fornavn, vakt.person.etternavn)}\n                  </span>\n                </div>\n                {vakt.ttx_project_cache ? (\n                  <Button\n                    variant=\"ghost\"\n                    className=\"w-full h-auto p-3 justify-start text-left relative\"\n                    style={{ backgroundColor: getProjectColor(vakt.ttx_project_cache.tripletex_project_id || 0) }}\n                    onClick={() => setSelectedProject(vakt.ttx_project_cache)}\n                  >\n                    <div className=\"text-white w-full pr-6\">\n                      {/* Main project info - smart project number handling with truncation and tooltip */}\n                      <TooltipProvider>\n                        <Tooltip>\n                          <TooltipTrigger asChild>\n                            <div className=\"font-semibold text-base leading-tight truncate cursor-help\">\n                              {(() => {\n                                const projectNumber = vakt.ttx_project_cache.project_number;\n                                const projectName = vakt.ttx_project_cache.project_name || `Prosjekt ${projectNumber}`;\n                                \n                                // Check if project name already starts with the project number\n                                if (projectName.startsWith(`${projectNumber} `)) {\n                                  // Project name already includes the number, just show the name\n                                  return projectName;\n                                } else {\n                                  // Project name doesn't include the number, add it\n                                  return `${projectNumber} ${projectName}`;\n                                }\n                              })()}\n                            </div>\n                          </TooltipTrigger>\n                          <TooltipContent>\n                            <p className=\"max-w-xs\">\n                              {(() => {\n                                const projectNumber = vakt.ttx_project_cache.project_number;\n                                const projectName = vakt.ttx_project_cache.project_name || `Prosjekt ${projectNumber}`;\n                                \n                                // Check if project name already starts with the project number\n                                if (projectName.startsWith(`${projectNumber} `)) {\n                                  return projectName;\n                                } else {\n                                  return `${projectNumber} ${projectName}`;\n                                }\n                              })()}\n                            </p>\n                          </TooltipContent>\n                        </Tooltip>\n                      </TooltipProvider>\n                      {/* Compact time summary with status */}\n                      <div className=\"text-sm text-white opacity-95 mt-0.5 flex items-center justify-between\">\n                        <span className=\"font-semibold\">\n                          {(() => {\n                            // Smart time formatting function\n                            const formatTimeSmart = (hours: number): string => {\n                              if (hours === 0) return '0t';\n                              \n                              // Check if it's a whole number\n                              if (hours % 1 === 0) {\n                                return `${hours}t`;\n                              }\n                              \n                              // Check if it's .5 (half hour)\n                              if (hours % 1 === 0.5) {\n                                return `${Math.floor(hours)},5t`;\n                              }\n                              \n                              // For other decimals, show 2 decimal places but remove trailing zeros\n                              return `${hours.toFixed(2).replace(/\\.?0+$/, '')}t`;\n                            };\n\n                            const regularHours = vakt.vakt_timer\n                              .filter(timer => !timer.is_overtime)\n                              .reduce((sum, timer) => sum + (timer.timer || 0), 0);\n                            const overtime100 = vakt.vakt_timer\n                              .filter(timer => timer.is_overtime && (timer.lonnstype === 'overtid_100' || timer.lonnstype === '100%'))\n                              .reduce((sum, timer) => sum + (timer.timer || 0), 0);\n                            const overtime50 = vakt.vakt_timer\n                              .filter(timer => timer.is_overtime && (timer.lonnstype === 'overtid_50' || timer.lonnstype === '50%'))\n                              .reduce((sum, timer) => sum + (timer.timer || 0), 0);\n\n                            // Build compact format with parentheses for overtime\n                            if (overtime100 === 0 && overtime50 === 0) {\n                              // Only regular hours\n                              return <span className=\"font-bold\">{formatTimeSmart(regularHours)}</span>;\n                            } else {\n                              // Regular hours + overtime in parentheses\n                              const overtimeParts = [];\n                              if (overtime100 > 0) {\n                                overtimeParts.push(`${formatTimeSmart(overtime100)} 100%`);\n                              }\n                              if (overtime50 > 0) {\n                                overtimeParts.push(`${formatTimeSmart(overtime50)} 50%`);\n                              }\n                              return <span><span className=\"font-bold\">{formatTimeSmart(regularHours)}</span> ({overtimeParts.join(', ')})</span>;\n                            }\n                          })()}\n                        </span>\n                        {/* Status indicator */}\n                        <span className={`text-xs px-2 py-1 rounded-full ${\n                          vakt.vakt_timer.length > 0 && vakt.vakt_timer.every(timer => \n                            timer.status === 'godkjent' || timer.tripletex_synced_at\n                          ) ? 'bg-green-500 text-white' : 'bg-yellow-500 text-black'\n                        }`}>\n                          {vakt.vakt_timer.length > 0 && vakt.vakt_timer.every(timer => \n                            timer.status === 'godkjent' || timer.tripletex_synced_at\n                          ) ? '✅' : '🔄'}\n                        </span>\n                      </div>\n                    </div>\n                  </Button>\n                ) : (\n                <div className=\"text-muted-foreground p-2 sm:p-3 text-center border border-dashed rounded text-xs\">\n                    Ikke tilordnet\n                  </div>\n                )}\n                <Dialog\n                  open={activeVaktId === vakt.id}\n                  onOpenChange={(open) => {\n                    if (!open) {\n                      setActiveVaktId(null);\n                      setSelectedTimer(null);\n                    }\n                  }}\n                >\n                  <DialogTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"w-full text-xs\"\n                      onClick={() => {\n                        setActiveVaktId(vakt.id);\n                        setSelectedTimer(null);\n                      }}\n                    >\n                      <Plus className=\"h-3 w-3 mr-1\" />\n                      {vakt.vakt_timer.length > 0 ? 'Legg til / Rediger timer' : 'Legg til timer'}\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent\n                    className=\"max-w-2xl h-[95vh] flex flex-col p-0\"\n                    style={{\n                      maxHeight: '95vh !important',\n                      height: '95vh !important',\n                      display: 'flex !important',\n                      flexDirection: 'column' as const,\n                      padding: '0 !important'\n                    }}\n                  >\n                    <div\n                      className=\"flex-1 overflow-y-auto p-6\"\n                      style={{ flex: 1, overflowY: 'auto' as const, padding: '1.5rem' }}\n                    >\n                      <DialogHeader className=\"pb-4\">\n                        <DialogTitle className=\"text-base sm:text-lg\">\n                          Timeføring - {vakt.ttx_project_cache?.project_name || 'Prosjekt'}\n                        </DialogTitle>\n                        <DialogDescription className=\"text-sm\">\n                          Legg til eller rediger timer for denne arbeidsoppgaven.\n                        </DialogDescription>\n                      </DialogHeader>\n                      <TimeEntry\n                        key={selectedTimer?.id ?? 'new'}\n                        vaktId={vakt.id}\n                        orgId={orgId}\n                        onSave={() => {\n                          loadDayData();\n                          setActiveVaktId(null);\n                          setSelectedTimer(null);\n                        }}\n                        defaultTimer={vakt.person?.forventet_dagstimer || 8.0}\n                        existingEntry={selectedTimer ? {\n                          id: selectedTimer.id,\n                          timer: selectedTimer.timer,\n                          aktivitet_id: selectedTimer.aktivitet_id || '',\n                          notat: selectedTimer.notat || '',\n                          status: selectedTimer.status || 'pending'\n                        } : undefined}\n                      />\n                    </div>\n                  </DialogContent>\n                </Dialog>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {personId && (\n          <div className=\"space-y-2\">\n            {vakter.length === 0 && (\n              <div className=\"text-xs text-muted-foreground text-center py-2\">\n                Ingen arbeidsoppdrag planlagt\n              </div>\n            )}\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              className=\"w-full text-xs\"\n              onClick={() => setShowProjectDialog(true)}\n            >\n              <Plus className=\"h-3 w-3 mr-1\" />\n              {vakter.length === 0 ? 'Finn prosjekt' : 'Legg til prosjekt'}\n            </Button>\n            <ProjectSearchDialog\n              open={showProjectDialog}\n              onClose={() => setShowProjectDialog(false)}\n              date={toLocalDateString(date)}\n              orgId={orgId}\n              personId={personId}\n              onProjectAssigned={loadDayData}\n            />\n          </div>\n        )}\n\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"w-full text-[10px]\"\n          onClick={copyFromPreviousDay}\n        >\n          <Copy className=\"h-3 w-3 mr-1\" />\n          Kopier forrige dag\n        </Button>\n\n        {/* Project Detail Dialog */}\n        {selectedProject && (\n          <ProjectDetailDialog\n            open={!!selectedProject}\n            onClose={() => setSelectedProject(null)}\n            project={selectedProject}\n            orgId={orgId}\n          />\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default DayCard;\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4089, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,gRAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,2SAAC;QACC,MAAM;QACN,WAAW,IAAA,sLAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4117, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/OnboardingDialog.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useAuth } from '@/hooks/useAuth';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Building2, User, CheckCircle } from 'lucide-react';\n\ninterface OnboardingDialogProps {\n  onComplete: () => void;\n}\n\nconst OnboardingDialog = ({ onComplete }: OnboardingDialogProps) => {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    orgName: '',\n    orgNumber: '',\n    displayName: '',\n    role: 'admin'\n  });\n\n  const handleSetup = async () => {\n    if (!user || !formData.orgName.trim() || !formData.displayName.trim()) {\n      toast({\n        title: \"Manglende informasjon\",\n        description: \"Vennligst fyll inn organisasjonsnavn og ditt navn.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const { data, error } = await supabase.functions.invoke('onboarding-setup', {\n        body: {\n          orgName: formData.orgName.trim(),\n          orgNumber: formData.orgNumber.trim() || null,\n          displayName: formData.displayName.trim(),\n          role: formData.role,\n        },\n      });\n\n      if (error) throw error;\n\n      if (!data?.ok) {\n        throw new Error(data?.message || 'Kunne ikke fullføre oppsett');\n      }\n\n      toast({\n        title: 'Velkommen!',\n        description: `${formData.orgName} er opprettet og du er nå klar til å bruke systemet.`,\n      });\n\n      onComplete();\n    } catch (error: unknown) {\n      console.error('Setup error:', error);\n      toast({\n        title: 'Feil ved oppsett',\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <CardTitle className=\"flex items-center justify-center gap-2 text-2xl\">\n            <CheckCircle className=\"h-6 w-6 text-primary\" />\n            Velkommen!\n          </CardTitle>\n          <p className=\"text-muted-foreground\">\n            La oss sette opp din organisasjon og profil\n          </p>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"orgName\" className=\"flex items-center gap-2\">\n              <Building2 className=\"h-4 w-4\" />\n              Organisasjonsnavn *\n            </Label>\n            <Input\n              id=\"orgName\"\n              value={formData.orgName}\n              onChange={(e) => setFormData({ ...formData, orgName: e.target.value })}\n              placeholder=\"Min Bedrift AS\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"orgNumber\">Organisasjonsnummer (valgfritt)</Label>\n            <Input\n              id=\"orgNumber\"\n              value={formData.orgNumber}\n              onChange={(e) => setFormData({ ...formData, orgNumber: e.target.value })}\n              placeholder=\"123456789\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"displayName\" className=\"flex items-center gap-2\">\n              <User className=\"h-4 w-4\" />\n              Ditt navn *\n            </Label>\n            <Input\n              id=\"displayName\"\n              value={formData.displayName}\n              onChange={(e) => setFormData({ ...formData, displayName: e.target.value })}\n              placeholder=\"Fornavn Etternavn\"\n            />\n          </div>\n\n          <div className=\"bg-muted/50 p-3 rounded-lg text-sm\">\n            <h4 className=\"font-medium mb-2\">🔄 Tripletex-integrasjon</h4>\n            <p className=\"text-muted-foreground\">\n              Etter oppsettet kan du koble til Tripletex via Admin → Integrasjoner. \n              Dette synkroniserer ansatte, prosjekter og aktiviteter automatisk.\n            </p>\n          </div>\n\n          <Button \n            onClick={handleSetup} \n            disabled={loading}\n            className=\"w-full\"\n          >\n            {loading ? \"Oppretter...\" : \"Opprett organisasjon\"}\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default OnboardingDialog;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4402, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/app/min/uke/%5Byear%5D/%5Bweek%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nexport const dynamic = 'force-dynamic';\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useRouter, useSearchParams } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport type { Database } from \"@/integrations/supabase/types\";\nimport {\n  ChevronLeft,\n  ChevronRight,\n  Calendar,\n  Eye,\n  Users,\n  BarChart3,\n  Clock,\n  CheckCircle,\n  AlertCircle,\n  Download,\n  Send,\n  Copy,\n} from \"lucide-react\";\nimport { getDateFromWeek, getWeekNumber, getPersonDisplayName, formatTimeValue } from \"@/lib/displayNames\";\nimport { toLocalDateString } from \"@/lib/utils\";\nimport DayCard from \"@/components/DayCard\";\nimport OnboardingDialog from \"@/components/OnboardingDialog\";\n\ntype PersonRow = Database['public']['Tables']['person']['Row'];\n\ninterface Profile {\n  id: string;\n  user_id: string;\n  org_id: string;\n  org?: {\n    name: string;\n  };\n}\n\ntype Person = Pick<\n  PersonRow,\n  'id' | 'fornavn' | 'etternavn' | 'forventet_dagstimer' | 'epost' | 'aktiv' | 'person_type'\n>;\n\ninterface WeeklySummary {\n  totalHours: number;\n  totalOvertime: number;\n  totalExpected: number;\n  completionPercentage: number;\n  daysCompleted: number;\n  daysWithEntries: number;\n  totalDays: number;\n  status: 'complete' | 'partial' | 'missing' | 'empty';\n  projects: Array<{\n    project_name: string;\n    project_number: number;\n    totalHours: number;\n    days: number;\n  }>;\n}\n\nconst MinUke = () => {\n  const params = useParams<{ year: string; week: string }>();\n  const router = useRouter();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const searchParams = useSearchParams();\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [person, setPerson] = useState<Person | null>(null);\n  const [showFullWeek, setShowFullWeek] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [showOnboarding, setShowOnboarding] = useState(false);\n  const [isSimulation, setIsSimulation] = useState(false);\n  const [simulatedPersonName, setSimulatedPersonName] = useState<string | null>(null);\n  const [weeklySummary, setWeeklySummary] = useState<WeeklySummary | null>(null);\n  const [calendarDays, setCalendarDays] = useState<Array<{\n    dato: string;\n    is_holiday: boolean;\n    is_weekend: boolean;\n    holiday_name: string | null;\n  }>>([]);\n\n  const currentYear = parseInt(params?.year || new Date().getFullYear().toString(), 10);\n  const currentWeek = parseInt(params?.week || getWeekNumber(new Date()).toString(), 10);\n  const formattedWeek = currentWeek.toString().padStart(2, '0');\n  const simulatePersonId = searchParams?.get('simulatePersonId') || null;\n\n  const getWeeksInYear = (targetYear: number) => {\n    // Use ISO week calculation to get the correct number of weeks\n    const dec28 = new Date(targetYear, 11, 28); // December 28th is always in the last week\n    return getWeekNumber(dec28);\n  };\n\n  // Define getWeekDays early to avoid initialization issues\n  const getWeekDays = useCallback(() => {\n    const startDate = getDateFromWeek(currentYear, currentWeek);\n    const days = [];\n    \n    for (let i = 0; i < 7; i++) {\n      const date = new Date(startDate);\n      date.setDate(startDate.getDate() + i);\n      days.push(date);\n    }\n    \n    return days;\n  }, [currentYear, currentWeek]);\n\n  const loadUserData = useCallback(async () => {\n    if (!user) return;\n\n    try {\n      const toPerson = (data: PersonRow): Person => ({\n        id: data.id,\n        fornavn: data.fornavn,\n        etternavn: data.etternavn,\n        forventet_dagstimer: data.forventet_dagstimer ?? null,\n        epost: data.epost ?? null,\n        aktiv: data.aktiv ?? undefined,\n        person_type: data.person_type ?? null\n      });\n\n      // Load user profile\n      const { data: profileData, error: profileError } = await supabase\n        .from('profiles')\n        .select('*, org:org_id (name)')\n        .eq('user_id', user.id)\n        .maybeSingle();\n\n      if (profileError && profileError.code !== 'PGRST116') {\n        throw profileError;\n      }\n\n      if (!profileData) {\n        console.warn('No profile found for user');\n        setShowOnboarding(true);\n        setLoading(false);\n        return;\n      }\n\n      setProfile(profileData);\n\n      setIsSimulation(false);\n      setSimulatedPersonName(null);\n\n      if (simulatePersonId) {\n        if (!['admin', 'manager'].includes(profileData.role || '')) {\n          console.warn('User lacks permission to simulate other persons');\n          // Toast will be handled by UI if needed\n        } else {\n          const { data: simulatedPerson, error: simulatedPersonError } = await supabase\n            .from('person')\n            .select('*')\n            .eq('id', simulatePersonId)\n            .eq('org_id', profileData.org_id)\n            .maybeSingle();\n\n          if (simulatedPersonError && simulatedPersonError.code !== 'PGRST116') {\n            console.warn('Error loading simulated person', simulatePersonId, simulatedPersonError);\n          } else if (!simulatedPerson) {\n            console.warn('Could not find simulated person:', simulatePersonId);\n            // Toast will be handled by UI if needed\n          } else {\n            setPerson(toPerson(simulatedPerson));\n            setIsSimulation(true);\n            setSimulatedPersonName(\n              getPersonDisplayName(simulatedPerson.fornavn, simulatedPerson.etternavn)\n            );\n            return;\n          }\n        }\n      }\n\n      if (user.email) {\n        const normalizedEmail = user.email.toLowerCase();\n\n        const { data: personData, error: personError } = await supabase\n          .from('person')\n          .select('*')\n          .eq('org_id', profileData.org_id)\n          .ilike('epost', normalizedEmail)\n          .maybeSingle();\n\n        if (personError && personError.code !== 'PGRST116') {\n          console.warn('Error loading person for email', normalizedEmail, personError);\n        } else {\n          setPerson(personData ? toPerson(personData) : null);\n        }\n      } else {\n        setPerson(null);\n      }\n    } catch (error) {\n      console.error('Error loading user data:', error);\n      setShowOnboarding(true);\n    } finally {\n      setLoading(false);\n    }\n  }, [user, simulatePersonId]);\n\n  const loadWeeklySummary = useCallback(async () => {\n    if (!person?.id || !profile?.org_id) {\n      setWeeklySummary(null);\n      return;\n    }\n\n    try {\n      const startDate = getDateFromWeek(currentYear, currentWeek);\n      const endDate = new Date(startDate);\n      endDate.setDate(startDate.getDate() + 6);\n\n      // Load all vakt entries for the week\n      const { data: vakter, error } = await supabase\n        .from('vakt')\n        .select(`\n          id,\n          dato,\n          project_id,\n          ttx_project_cache:project_id (\n            project_name,\n            project_number,\n            tripletex_project_id\n          ),\n          vakt_timer (\n            id,\n            timer,\n            status,\n            is_overtime,\n            lonnstype\n          )\n        `)\n        .eq('org_id', profile.org_id)\n        .eq('person_id', person.id)\n        .gte('dato', toLocalDateString(startDate))\n        .lte('dato', toLocalDateString(endDate));\n\n      if (error) throw error;\n\n      // Calculate summary\n      let totalHours = 0;\n      let totalOvertime = 0;\n      let totalExpected = 0;\n      let daysCompleted = 0;\n      let daysWithEntries = 0;\n      const projectMap = new Map<string, { project_name: string; project_number: number; totalHours: number; days: number }>();\n\n      // Generate week days directly to avoid initialization issues\n      const weekDays = [];\n      for (let i = 0; i < 7; i++) {\n        const date = new Date(startDate);\n        date.setDate(startDate.getDate() + i);\n        weekDays.push(date);\n      }\n      \n      const workingDays = weekDays.filter(day => {\n        const dayOfWeek = day.getDay();\n        return dayOfWeek >= 1 && dayOfWeek <= 5; // Monday to Friday\n      });\n\n      // Calculate totalExpected for the entire week (not just days with entries)\n      // Use 7.5 hours per day for a 37.5 hour work week\n      weekDays.forEach(day => {\n        const dayOfWeek = day.getDay();\n        let dayExpected = 7.5; // Standard 37.5 hour work week\n        \n        // Check if it's a weekend or holiday\n        if (dayOfWeek === 0 || dayOfWeek === 6) {\n          dayExpected = 0; // Weekend\n        }\n        \n        totalExpected += dayExpected;\n      });\n\n      weekDays.forEach(day => {\n        const dayStr = toLocalDateString(day);\n        const dayVakter = vakter?.filter(v => v.dato === dayStr) || [];\n        \n        if (dayVakter.length > 0) {\n          daysWithEntries++;\n          \n          let dayHours = 0;\n          let dayOvertime = 0;\n          let dayExpected = 7.5; // Standard 37.5 hour work week\n          \n          // Check if it's a weekend or holiday\n          const dayOfWeek = day.getDay();\n          if (dayOfWeek === 0 || dayOfWeek === 6) {\n            dayExpected = 0; // Weekend\n          }\n          \n      dayVakter.forEach((vakt) => {\n        vakt.vakt_timer.forEach((timer) => {\n              dayHours += timer.timer;\n              if (timer.is_overtime) {\n                dayOvertime += timer.timer;\n              }\n              \n              // Track project hours\n              if (vakt.ttx_project_cache) {\n                const projectKey = vakt.ttx_project_cache.tripletex_project_id?.toString() || 'unknown';\n                const existing = projectMap.get(projectKey) || {\n                  project_name: vakt.ttx_project_cache.project_name || 'Ukjent prosjekt',\n                  project_number: vakt.ttx_project_cache.project_number || 0,\n                  totalHours: 0,\n                  days: 0\n                };\n                existing.totalHours += timer.timer;\n                if (!projectMap.has(projectKey)) {\n                  existing.days = 1;\n                  projectMap.set(projectKey, existing);\n                }\n              }\n            });\n          });\n          \n          totalHours += dayHours;\n          totalOvertime += dayOvertime;\n          // totalExpected is already calculated above for the entire week\n          \n          if (dayHours >= dayExpected && dayExpected > 0) {\n            daysCompleted++;\n          }\n        }\n      });\n\n      const completionPercentage = totalExpected > 0 ? Math.round((totalHours / totalExpected) * 100) : 0;\n      \n      let status: WeeklySummary['status'] = 'empty';\n      if (daysWithEntries === 0) {\n        status = 'empty';\n      } else if (completionPercentage >= 100) {\n        status = 'complete';\n      } else if (completionPercentage >= 50) {\n        status = 'partial';\n      } else {\n        status = 'missing';\n      }\n\n      setWeeklySummary({\n        totalHours,\n        totalOvertime,\n        totalExpected,\n        completionPercentage,\n        daysCompleted,\n        daysWithEntries,\n        totalDays: workingDays.length,\n        status,\n        projects: Array.from(projectMap.values()).sort((a, b) => b.totalHours - a.totalHours)\n      });\n    } catch (error) {\n      console.error('Error loading weekly summary:', error);\n      // Toast will be handled by higher-level error boundary if needed\n    } finally {\n      // setLoadingSummary(false); // This line is removed\n    }\n  }, [currentYear, currentWeek, person?.id, profile?.org_id]);\n\n  const loadCalendarDays = useCallback(async () => {\n    if (!profile?.org_id) return;\n\n    try {\n      const startDate = getDateFromWeek(currentYear, currentWeek);\n      const endDate = new Date(startDate);\n      endDate.setDate(startDate.getDate() + 6);\n\n      const { data, error } = await supabase\n        .from('kalender_dag')\n        .select('dato, is_holiday, is_weekend, holiday_name')\n        .gte('dato', toLocalDateString(startDate))\n        .lte('dato', toLocalDateString(endDate));\n\n      if (error) throw error;\n      setCalendarDays(data || []);\n    } catch (error) {\n      console.error('Error loading calendar days:', error);\n      // Don't show error toast for calendar days as it's not critical\n    }\n  }, [profile?.org_id, currentYear, currentWeek]);\n\n  useEffect(() => {\n    if (user) {\n      loadUserData();\n    }\n  }, [user, loadUserData]);\n\n  useEffect(() => {\n    if (person && profile) {\n      loadWeeklySummary();\n    }\n  }, [person, profile, loadWeeklySummary]);\n\n  useEffect(() => {\n    if (profile) {\n      loadCalendarDays();\n    }\n  }, [profile, loadCalendarDays]);\n\n  const handleOnboardingComplete = () => {\n    setShowOnboarding(false);\n    loadUserData();\n  };\n\n  const navigateWeek = (delta: number) => {\n    let newYear = currentYear;\n    let newWeek = currentWeek + delta;\n    let weeksInYear = getWeeksInYear(newYear);\n\n    while (newWeek > weeksInYear) {\n      newWeek -= weeksInYear;\n      newYear += 1;\n      weeksInYear = getWeeksInYear(newYear);\n    }\n\n    while (newWeek < 1) {\n      newYear -= 1;\n      weeksInYear = getWeeksInYear(newYear);\n      newWeek += weeksInYear;\n    }\n\n    router.push(`/min/uke/${newYear}/${newWeek.toString().padStart(2, \"0\")}`);\n  };\n\n  const exitSimulation = () => {\n    router.replace(`/min/uke/${currentYear}/${formattedWeek}`);\n  };\n\n  const isToday = (date: Date) => {\n    const today = new Date();\n    return date.toDateString() === today.toDateString();\n  };\n\n  // Auto-scroll to today's date when the component loads\n  useEffect(() => {\n    if (!loading && person && weeklySummary) {\n      const today = new Date();\n      const todayElement = document.getElementById(`day-${today.toISOString().split('T')[0]}`);\n      \n      if (todayElement) {\n        // Small delay to ensure the page is fully rendered\n        setTimeout(() => {\n          todayElement.scrollIntoView({ \n            behavior: 'smooth', \n            block: 'center',\n            inline: 'nearest'\n          });\n        }, 100);\n      }\n    }\n  }, [loading, person, weeklySummary]);\n\n  if (showOnboarding) {\n    return <OnboardingDialog onComplete={handleOnboardingComplete} />;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background p-4\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"text-center\">Laster...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"min-h-screen bg-background p-4\">\n        <div className=\"max-w-7xl mx-auto\">\n          <Card>\n            <CardContent className=\"p-6 text-center space-y-4\">\n              <h2 className=\"text-xl font-semibold\">Profil mangler</h2>\n              <p className=\"text-muted-foreground\">\n                Du må opprette en profil og være tilknyttet en organisasjon for å bruke &quot;Min uke&quot;.\n              </p>\n              <Button onClick={() => setShowOnboarding(true)}>\n                Sett opp organisasjon\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n  const missingPersonRecord = !person;\n\n  return (\n    <div className=\"min-h-screen bg-background p-2\">\n      <div className=\"max-w-md mx-auto space-y-3\">\n        {/* Header */}\n        <div className=\"space-y-3\">\n          <div className=\"text-center\">\n            <h1 className=\"text-xl font-bold\">Min uke</h1>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              {profile.org?.name}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Uke {currentWeek}, {currentYear}\n              {person && ` - ${getPersonDisplayName(person.fornavn, person.etternavn)}`}\n            </p>\n            {isSimulation && simulatedPersonName && (\n              <div className=\"mt-2 flex flex-col sm:flex-row sm:items-center sm:gap-2\">\n                <Badge className=\"w-fit bg-blue-100 text-blue-800\" variant=\"secondary\">\n                  Simulerer {simulatedPersonName}\n                </Badge>\n                <Button \n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"mt-2 sm:mt-0\"\n                  onClick={exitSimulation}\n                >\n                  Avslutt simulering\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {missingPersonRecord && (\n            <Card className=\"bg-amber-50 border-amber-200\">\n              <CardContent className=\"p-4 text-sm text-amber-900\">\n                <p className=\"font-medium\">Ingen ansattprofil funnet</p>\n                <p className=\"mt-1\">\n                  Vi fant ingen registrert ansatt med e-postadressen {user?.email}. Be administratoren knytte Tripletex-ansatte til brukere,\n                  eller legg inn e-post på riktig person i bemanningssystemet.\n                </p>\n              </CardContent>\n            </Card>\n          )}\n          \n          {/* Action Buttons - Always Mobile Style */}\n          <div className=\"space-y-2\">\n            <div className=\"flex gap-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                className=\"flex-1 h-10\"\n                onClick={() => setShowFullWeek(!showFullWeek)}\n              >\n                <Eye className=\"h-4 w-4 mr-1\" />\n{showFullWeek ? 'Relevante dager' : 'Denne uken'}\n              </Button>\n              {isSimulation && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"flex-1 h-10\"\n                  onClick={exitSimulation}\n                >\n                  Avslutt simulering\n                </Button>\n              )}\n            </div>\n            <div className=\"flex justify-center\">\n              <Badge variant=\"outline\" className=\"text-xs\">\n                <Calendar className=\"h-3 w-3 mr-1\" />\n                {showFullWeek ? 'Relevante dager (7 dager)' : `Uke ${currentWeek} (7 dager)`}\n              </Badge>\n            </div>\n          </div>\n        </div>\n\n        {/* Week Navigation */}\n        <div className=\"flex items-center justify-center gap-4\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => navigateWeek(-1)}\n            className=\"h-10 w-12\"\n          >\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n          <div className=\"text-lg font-medium text-center px-2 min-w-[120px]\">\n            Uke {currentWeek}, {currentYear}\n          </div>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => navigateWeek(1)}\n            className=\"h-10 w-12\"\n          >\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {/* Weekly Summary - Compact Mobile Style */}\n        {person && weeklySummary && (\n          <Card className=\"mb-4\">\n            <CardContent className=\"p-4\">\n              {/* Compact Progress Overview */}\n              <div className=\"text-center space-y-2\">\n                <div className=\"flex items-center justify-center gap-4\">\n                  <div>\n                    <div className=\"text-3xl font-bold text-primary\">\n                      {formatTimeValue(weeklySummary.totalHours)}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">Timer ført</div>\n                  </div>\n                  <div className=\"text-gray-300\">/</div>\n                  <div>\n                    <div className=\"text-3xl font-bold text-muted-foreground\">\n                      {formatTimeValue(weeklySummary.totalExpected)}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">Forventet</div>\n                  </div>\n                </div>\n                \n                {weeklySummary.totalOvertime > 0 && (\n                  <div className=\"text-sm text-yellow-600\">\n                    +{formatTimeValue(weeklySummary.totalOvertime)} overtid\n                  </div>\n                )}\n\n                {/* Progress Bar */}\n                <div className=\"space-y-1\">\n                  <div className=\"flex justify-between text-xs\">\n                    <span>Ukesfremgang</span>\n                    <span>{weeklySummary.completionPercentage}% fullført</span>\n                  </div>\n                  <Progress \n                    value={weeklySummary.completionPercentage} \n                    className=\"h-2\"\n                  />\n                </div>\n\n                {/* Status Badge */}\n                <div className=\"flex justify-center\">\n                  {weeklySummary.status === 'complete' && (\n                    <Badge className=\"bg-green-500 text-white text-xs\">\n                      <CheckCircle className=\"h-3 w-3 mr-1\" />\n                      Uke fullført\n                    </Badge>\n                  )}\n                  {weeklySummary.status === 'partial' && (\n                    <Badge className=\"bg-yellow-500 text-white text-xs\">\n                      <AlertCircle className=\"h-3 w-3 mr-1\" />\n                      Delvis fullført\n                    </Badge>\n                  )}\n                  {weeklySummary.status === 'missing' && (\n                    <Badge className=\"bg-red-500 text-white text-xs\">\n                      <AlertCircle className=\"h-3 w-3 mr-1\" />\n                      Mangler timer\n                    </Badge>\n                  )}\n                  {weeklySummary.status === 'empty' && (\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      <Clock className=\"h-3 w-3 mr-1\" />\n                      Ingen timer ført\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Week View */}\n        {!person ? (\n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"text-muted-foreground\">\n                <Users className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <h3 className=\"text-lg font-medium mb-2\">Ingen ansatt-profil funnet</h3>\n                <p className=\"text-sm mb-4\">\n                  Din brukerkonto er ikke koblet til en ansatt-profil i systemet.\n                </p>\n                <p className=\"text-xs text-muted-foreground\">\n                  Kontakt administrator for å få tilgang til timeføring.\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        ) : showFullWeek ? (\n          <div className=\"space-y-2\">\n            {getWeekDays()\n              .filter(date => {\n                // Show today and 3 days before and after (7 days total)\n                const today = new Date();\n                const daysDiff = Math.ceil((date.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n                return daysDiff >= -3 && daysDiff <= 3;\n              })\n              .map((date, index) => (\n                <div key={index}>\n                  <DayCard\n                    date={date}\n                    orgId={profile.org_id}\n                    personId={person?.id}\n                    forventetTimer={person?.forventet_dagstimer || 8.0}\n                    calendarDays={calendarDays}\n                  />\n                </div>\n              ))}\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {getWeekDays().map((date, index) => (\n              <div key={index}>\n                <DayCard\n                  date={date}\n                  orgId={profile.org_id}\n                  personId={person?.id}\n                  forventetTimer={person?.forventet_dagstimer || 8.0}\n                  calendarDays={calendarDays}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Quick Actions */}\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"grid grid-cols-2 gap-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"text-xs h-10\"\n                onClick={() => {\n                  const today = new Date();\n                  const todayElement = document.getElementById(`day-${today.toISOString().split('T')[0]}`);\n                  if (todayElement) {\n                    todayElement.scrollIntoView({ \n                      behavior: 'smooth', \n                      block: 'center',\n                      inline: 'nearest'\n                    });\n                  }\n                }}\n              >\n                <Calendar className=\"h-3 w-3 mr-1\" />\n                Gå til i dag\n              </Button>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"text-xs h-10\"\n                onClick={() => {\n                  if (weeklySummary) {\n                    toast({\n                      title: \"Ukessammendrag\",\n                      description: `Du har ført ${formatTimeValue(weeklySummary.totalHours)} av ${formatTimeValue(weeklySummary.totalExpected)} timer (${weeklySummary.completionPercentage}% fullført)`,\n                    });\n                  }\n                }}\n              >\n                <BarChart3 className=\"h-3 w-3 mr-1\" />\n                Ukeoversikt\n              </Button>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"text-xs h-10\"\n                onClick={() => {\n                  toast({\n                    title: \"Kopier uke\",\n                    description: \"Funksjonen kommer snart!\",\n                  });\n                }}\n              >\n                <Copy className=\"h-3 w-3 mr-1\" />\n                Kopier uka\n              </Button>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"text-xs h-10\"\n                onClick={() => {\n                  toast({\n                    title: \"Send til godkjenning\",\n                    description: \"Funksjonen kommer snart!\",\n                  });\n                }}\n              >\n                <Send className=\"h-3 w-3 mr-1\" />\n                Send til godkjenning\n              </Button>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"text-xs h-10\"\n                onClick={() => {\n                  toast({\n                    title: \"Eksporter\",\n                    description: \"Funksjonen kommer snart!\",\n                  });\n                }}\n              >\n                <Download className=\"h-3 w-3 mr-1\" />\n                Eksporter\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default MinUke;\n"],"names":[],"mappings":"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","debugId":null}}]
}