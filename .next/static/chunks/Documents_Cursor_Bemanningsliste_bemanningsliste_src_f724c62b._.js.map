{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,wOAAgB,MAC5B,QAAgC;QAA/B,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO;IAC5B,qBACE,0PAAC;QACC,MAAM;QACN,WAAW,IAAA,yLAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"rounded-lg border bg-card text-card-foreground shadow-sm\", className)} {...props} />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\n  ),\n);\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h3 ref={ref} className={cn(\"text-2xl font-semibold leading-none tracking-tight\", className)} {...props} />\n  ),\n);\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => (\n    <p ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n  ),\n);\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />,\n);\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn(\"flex items-center p-6 pt-0\", className)} {...props} />\n  ),\n);\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,wOAAgB,MAAuD,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBAC1G,0PAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,4DAA4D;QAAa,GAAG,KAAK;;;;;;;;AAEhH,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,wOAAgB,OACjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,0PAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;;AAGvF,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,wOAAgB,OAChC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,0PAAC;QAAG,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;;;AAG3G,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,wOAAgB,OACtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,0PAAC;QAAE,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;;AAGrF,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,wOAAgB,OAClC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBAAU,0PAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;;AAElG,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,wOAAgB,QACjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,0PAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;;;AAGpF,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className,\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left\", className)} {...props} />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)} {...props} />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,SAAS,0OAAoB;AAEnC,MAAM,gBAAgB,6OAAuB;AAE7C,MAAM,eAAe,4OAAsB;AAE3C,MAAM,cAAc,2OAAqB;AAEzC,MAAM,8BAAgB,wOAAgB,CAGpC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,6OAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yLAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,6OAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,wOAAgB,OAGpC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,0PAAC;;0BACC,0PAAC;;;;;0BACD,0PAAC,6OAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,yLAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,0PAAC,2OAAqB;wBAAC,WAAU;;0CAC/B,0PAAC,iQAAC;gCAAC,WAAU;;;;;;0CACb,0PAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6OAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe;QAAC,EAAE,SAAS,EAAE,GAAG,OAA6C;yBACjF,0PAAC;QAAI,WAAW,IAAA,yLAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;;MAD1F;AAGN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe;QAAC,EAAE,SAAS,EAAE,GAAG,OAA6C;yBACjF,0PAAC;QAAI,WAAW,IAAA,yLAAE,EAAC,iEAAiE;QAAa,GAAG,KAAK;;;;;;;MADrG;AAGN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,wOAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,2OAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yLAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG,2OAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,wOAAgB,OAGxC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,iPAA2B;QAAC,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;;AAE7G,kBAAkB,WAAW,GAAG,iPAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 341, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\";\nimport { Check } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator className={cn(\"flex items-center justify-center text-current\")}>\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\n\nexport { Checkbox };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,yBAAW,wOAAgB,MAG/B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,4OAAsB;QACrB,KAAK;QACL,WAAW,IAAA,yLAAE,EACX,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,0PAAC,iPAA2B;YAAC,WAAW,IAAA,yLAAE,EAAC;sBACzC,cAAA,0PAAC,6QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,4OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/lib/displayNames.ts"],"sourcesContent":["// Utility functions for display names\n\nexport const getPersonDisplayName = (fornavn: string, etternavn: string): string => {\n  if (!fornavn || !etternavn) return \"\";\n  const etternavnInitial = etternavn.charAt(0).toUpperCase();\n  return `${fornavn} ${etternavnInitial}`;\n};\n\nexport const formatTimeValue = (timer?: number): string => {\n  if (typeof timer !== \"number\" || Number.isNaN(timer)) return \"0,00\";\n  return timer.toFixed(2).replace(\".\", \",\");\n};\n\nexport const parseTimeValue = (value: string): number => {\n  const parsed = parseFloat(value.replace(\",\", \".\"));\n  return Number.isNaN(parsed) ? 0 : Math.round(parsed * 4) / 4;\n};\n\nexport const validateTimeStep = (timer: number): boolean => {\n  return (timer * 4) % 1 === 0;\n};\n\nexport const getWeekNumber = (date: Date): number => {\n  const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\n  const dayNum = d.getUTCDay() || 7;\n  d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n  const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n  const weekNumber = Math.ceil((((d.getTime() - yearStart.getTime()) / 86400000) + 1) / 7);\n\n  if (weekNumber === 0) {\n    return 53;\n  }\n\n  return weekNumber;\n};\n\nexport const getDateFromWeek = (year: number, week: number): Date => {\n  const simple = new Date(year, 0, 1 + (week - 1) * 7);\n  const dow = simple.getDay();\n  const ISOweekStart = simple;\n  if (dow <= 4) {\n    ISOweekStart.setDate(simple.getDate() - simple.getDay() + 1);\n  } else {\n    ISOweekStart.setDate(simple.getDate() + 8 - simple.getDay());\n  }\n  return ISOweekStart;\n};\n\nexport const isHoliday = async (date: Date): Promise<{ isHoliday: boolean; name?: string }> => {\n  const dayOfWeek = date.getDay();\n  const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\n\n  return {\n    isHoliday: isWeekend,\n    name: isWeekend ? (dayOfWeek === 0 ? \"Søndag\" : \"Lørdag\") : undefined,\n  };\n};\n\nexport const generateProjectColor = (projectId: number): string => {\n  const colors = [\n    \"#3B82F6\",\n    \"#8B5CF6\",\n    \"#10B981\",\n    \"#F59E0B\",\n    \"#EF4444\",\n    \"#06B6D4\",\n    \"#84CC16\",\n    \"#F97316\",\n    \"#EC4899\",\n    \"#6366F1\",\n  ];\n\n  return colors[projectId % colors.length];\n};\n\nexport const getContrastColor = (hexColor: string): string => {\n  const r = parseInt(hexColor.slice(1, 3), 16);\n  const g = parseInt(hexColor.slice(3, 5), 16);\n  const b = parseInt(hexColor.slice(5, 7), 16);\n\n  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n\n  return luminance > 0.5 ? \"#000000\" : \"#FFFFFF\";\n};\n\nexport const getExpectedHoursForDate = (\n  date: Date,\n  defaultHours: number = 8,\n  holidayHours: number = 0,\n  isHoliday: boolean = false\n): number => {\n  if (isHoliday) {\n    return holidayHours;\n  }\n\n  const dayOfWeek = date.getDay();\n  if (dayOfWeek === 0 || dayOfWeek === 6) {\n    return 0;\n  }\n\n  return defaultHours;\n};\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;;;;;;;;;;;;;;;;;;AAE/B,MAAM,uBAAuB,CAAC,SAAiB;IACpD,IAAI,CAAC,WAAW,CAAC,WAAW,OAAO;IACnC,MAAM,mBAAmB,UAAU,MAAM,CAAC,GAAG,WAAW;IACxD,OAAO,AAAC,GAAa,OAAX,SAAQ,KAAoB,OAAjB;AACvB;AAEO,MAAM,kBAAkB,CAAC;IAC9B,IAAI,OAAO,UAAU,YAAY,OAAO,KAAK,CAAC,QAAQ,OAAO;IAC7D,OAAO,MAAM,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK;AACvC;AAEO,MAAM,iBAAiB,CAAC;IAC7B,MAAM,SAAS,WAAW,MAAM,OAAO,CAAC,KAAK;IAC7C,OAAO,OAAO,KAAK,CAAC,UAAU,IAAI,KAAK,KAAK,CAAC,SAAS,KAAK;AAC7D;AAEO,MAAM,mBAAmB,CAAC;IAC/B,OAAO,AAAC,QAAQ,IAAK,MAAM;AAC7B;AAEO,MAAM,gBAAgB,CAAC;IAC5B,MAAM,IAAI,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,WAAW,IAAI,KAAK,QAAQ,IAAI,KAAK,OAAO;IAC7E,MAAM,SAAS,EAAE,SAAS,MAAM;IAChC,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK,IAAI;IAClC,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,GAAG;IAC3D,MAAM,aAAa,KAAK,IAAI,CAAC,CAAC,AAAC,CAAC,EAAE,OAAO,KAAK,UAAU,OAAO,EAAE,IAAI,WAAY,CAAC,IAAI;IAEtF,IAAI,eAAe,GAAG;QACpB,OAAO;IACT;IAEA,OAAO;AACT;AAEO,MAAM,kBAAkB,CAAC,MAAc;IAC5C,MAAM,SAAS,IAAI,KAAK,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI;IAClD,MAAM,MAAM,OAAO,MAAM;IACzB,MAAM,eAAe;IACrB,IAAI,OAAO,GAAG;QACZ,aAAa,OAAO,CAAC,OAAO,OAAO,KAAK,OAAO,MAAM,KAAK;IAC5D,OAAO;QACL,aAAa,OAAO,CAAC,OAAO,OAAO,KAAK,IAAI,OAAO,MAAM;IAC3D;IACA,OAAO;AACT;AAEO,MAAM,YAAY,OAAO;IAC9B,MAAM,YAAY,KAAK,MAAM;IAC7B,MAAM,YAAY,cAAc,KAAK,cAAc;IAEnD,OAAO;QACL,WAAW;QACX,MAAM,YAAa,cAAc,IAAI,WAAW,WAAY;IAC9D;AACF;AAEO,MAAM,uBAAuB,CAAC;IACnC,MAAM,SAAS;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,OAAO,MAAM,CAAC,YAAY,OAAO,MAAM,CAAC;AAC1C;AAEO,MAAM,mBAAmB,CAAC;IAC/B,MAAM,IAAI,SAAS,SAAS,KAAK,CAAC,GAAG,IAAI;IACzC,MAAM,IAAI,SAAS,SAAS,KAAK,CAAC,GAAG,IAAI;IACzC,MAAM,IAAI,SAAS,SAAS,KAAK,CAAC,GAAG,IAAI;IAEzC,MAAM,YAAY,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI;IAExD,OAAO,YAAY,MAAM,YAAY;AACvC;AAEO,MAAM,0BAA0B,SACrC;QACA,gFAAuB,GACvB,gFAAuB,GACvB,6EAAqB;IAErB,IAAI,WAAW;QACb,OAAO;IACT;IAEA,MAAM,YAAY,KAAK,MAAM;IAC7B,IAAI,cAAc,KAAK,cAAc,GAAG;QACtC,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 503, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/command.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { type DialogProps } from \"@radix-ui/react-dialog\";\nimport { Command as CommandPrimitive } from \"cmdk\";\nimport { Search } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\nCommand.displayName = CommandPrimitive.displayName;\n\ntype CommandDialogProps = DialogProps;\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  </div>\n));\n\nCommandInput.displayName = CommandPrimitive.Input.displayName;\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n));\n\nCommandList.displayName = CommandPrimitive.List.displayName;\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />);\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\n));\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandItem.displayName = CommandPrimitive.Item.displayName;\n\nconst CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\n  return <span className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)} {...props} />;\n};\nCommandShortcut.displayName = \"CommandShortcut\";\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AACA;;;;;;;AAEA,MAAM,wBAAU,wOAAgB,CAG9B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,iNAAgB;QACf,KAAK;QACL,WAAW,IAAA,yLAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;;KAVP;AAaN,QAAQ,WAAW,GAAG,iNAAgB,CAAC,WAAW;AAIlD,MAAM,gBAAgB;QAAC,EAAE,QAAQ,EAAE,GAAG,OAA2B;IAC/D,qBACE,0PAAC,4MAAM;QAAE,GAAG,KAAK;kBACf,cAAA,0PAAC,mNAAa;YAAC,WAAU;sBACvB,cAAA,0PAAC;gBAAQ,WAAU;0BAChB;;;;;;;;;;;;;;;;AAKX;MAVM;AAYN,MAAM,6BAAe,wOAAgB,OAGnC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC;QAAI,WAAU;QAAkC,sBAAmB;;0BAClE,0PAAC,gRAAM;gBAAC,WAAU;;;;;;0BAClB,0PAAC,iNAAgB,CAAC,KAAK;gBACrB,KAAK;gBACL,WAAW,IAAA,yLAAE,EACX,0JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;;AAKf,aAAa,WAAW,GAAG,iNAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,4BAAc,wOAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,iNAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,yLAAE,EAAC,mDAAmD;QAChE,GAAG,KAAK;;;;;;;;AAIb,YAAY,WAAW,GAAG,iNAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,6BAAe,wOAAgB,OAGnC,CAAC,OAAO,oBAAQ,0PAAC,iNAAgB,CAAC,KAAK;QAAC,KAAK;QAAK,WAAU;QAA4B,GAAG,KAAK;;;;;;;AAElG,aAAa,WAAW,GAAG,iNAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,6BAAe,wOAAgB,OAGnC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,iNAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAW,IAAA,yLAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;;;AAIb,aAAa,WAAW,GAAG,iNAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,iCAAmB,wOAAgB,QAGvC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,iNAAgB,CAAC,SAAS;QAAC,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,wBAAwB;QAAa,GAAG,KAAK;;;;;;;;AAEnG,iBAAiB,WAAW,GAAG,iNAAgB,CAAC,SAAS,CAAC,WAAW;AAErE,MAAM,4BAAc,wOAAgB,QAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,iNAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,yLAAE,EACX,2PACA;QAED,GAAG,KAAK;;;;;;;;AAIb,YAAY,WAAW,GAAG,iNAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,kBAAkB;QAAC,EAAE,SAAS,EAAE,GAAG,OAA8C;IACrF,qBAAO,0PAAC;QAAK,WAAW,IAAA,yLAAE,EAAC,yDAAyD;QAAa,GAAG,KAAK;;;;;;AAC3G;OAFM;AAGN,gBAAgB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 710, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Popover = PopoverPrimitive.Root;\n\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className,\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n));\nPopoverContent.displayName = PopoverPrimitive.Content.displayName;\n\nexport { Popover, PopoverTrigger, PopoverContent };\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,2OAAqB;AAErC,MAAM,iBAAiB,8OAAwB;AAE/C,MAAM,+BAAiB,wOAAgB,MAGrC,QAA4D;QAA3D,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO;yBAC1D,0PAAC,6OAAuB;kBACtB,cAAA,0PAAC,8OAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,yLAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,8OAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uOAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAKF,SAAS,MAAM,KAA4C;QAA5C,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB,GAA5C;IACb,qBAAO,0PAAC;QAAI,WAAW,IAAA,yLAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAC7E;KAFS","debugId":null}},
    {"offset": {"line": 810, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ProjectSelector.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from '@/components/ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Check, ChevronsUpDown } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface Project {\n  id: string;\n  project_name: string | null;\n  project_number: number | null;\n  tripletex_project_id: number | null;\n  customer_name?: string | null;\n}\n\ninterface ProjectSelectorProps {\n  value?: string;\n  onValueChange: (projectId: string) => void;\n  orgId: string;\n  personId?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  excludeProjectIds?: string[]; // Projects to exclude from the list\n}\n\nconst ProjectSelector = ({ \n  value, \n  onValueChange, \n  orgId, \n  personId, \n  placeholder = \"Velg prosjekt...\",\n  disabled = false,\n  excludeProjectIds = []\n}: ProjectSelectorProps) => {\n  const [open, setOpen] = useState(false);\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n\n  const loadProjects = useCallback(async () => {\n    if (!orgId) return;\n    \n    setLoading(true);\n    try {\n      const query = supabase\n        .from('ttx_project_cache')\n        .select(`\n          id,\n          project_name,\n          project_number,\n          tripletex_project_id,\n          customer_name\n        `)\n        .eq('org_id', orgId)\n        .eq('is_active', true)\n        .order('project_name');\n\n      // If personId is provided, show all active projects (not just assigned ones)\n      // This allows assigning new projects to people\n      const { data, error } = await query;\n\n      if (error) {\n        throw error;\n      }\n      \n      // Filter out excluded projects\n      const filteredProjects = (data || []).filter(project => \n        !excludeProjectIds.includes(project.id)\n      );\n      \n      setProjects(filteredProjects);\n      \n      if (!data || data.length === 0) {\n        toast({\n          title: \"Ingen aktive prosjekter funnet\",\n          description: \"Det finnes ingen aktive prosjekter i systemet.\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Error loading projects:', error);\n      toast({\n        title: \"Feil ved lasting av prosjekter\",\n        description: error instanceof Error ? error.message : \"Kunne ikke laste prosjekter.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [orgId, personId, toast, excludeProjectIds]);\n\n  useEffect(() => {\n    if (open) {\n      loadProjects();\n    }\n  }, [open, loadProjects]);\n\n  const selectedProject = projects.find(p => p.id === value);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className=\"w-full justify-between\"\n          disabled={disabled}\n        >\n          {selectedProject ? (\n            <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n              <span className=\"break-words hyphens-auto leading-tight text-left\">{selectedProject.project_name}</span>\n              {selectedProject.project_number && (\n                <Badge variant=\"secondary\" className=\"text-xs flex-shrink-0\">\n                  #{selectedProject.project_number}\n                </Badge>\n              )}\n            </div>\n          ) : (\n            <span className=\"text-muted-foreground\">{placeholder}</span>\n          )}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-full p-0\" align=\"start\">\n        <Command>\n          <CommandInput placeholder=\"Søk prosjekter...\" />\n          <CommandList>\n            <CommandEmpty>\n              {loading ? (\n                \"Laster prosjekter...\"\n              ) : projects.length === 0 ? (\n                \"Ingen prosjekter funnet\"\n              ) : (\n                \"Ingen prosjekter matcher søket\"\n              )}\n            </CommandEmpty>\n            <CommandGroup>\n              {projects.map((project) => (\n                <CommandItem\n                  key={project.id}\n                  value={`${project.project_name} ${project.project_number} ${project.customer_name || ''}`}\n                  onSelect={() => {\n                    onValueChange(project.id);\n                    setOpen(false);\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 h-4 w-4\",\n                      value === project.id ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  <div className=\"flex flex-col gap-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">{project.project_name}</span>\n                      {project.project_number && (\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          #{project.project_number}\n                        </Badge>\n                      )}\n                    </div>\n                    {project.customer_name && (\n                      <span className=\"text-sm text-muted-foreground\">\n                        {project.customer_name}\n                      </span>\n                    )}\n                  </div>\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default ProjectSelector;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1095, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ProjectSearchDialog.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Calendar, User, Building } from 'lucide-react';\nimport { getPersonDisplayName } from '@/lib/displayNames';\nimport ProjectSelector from './ProjectSelector';\n\ninterface ProjectSearchDialogProps {\n  open: boolean;\n  onClose: () => void;\n  date: string;\n  personId: string;\n  orgId: string;\n  onProjectAssigned: () => void;\n}\n\ninterface Person {\n  fornavn: string;\n  etternavn: string;\n}\n\nconst ProjectSearchDialog = ({ open, onClose, date, personId, orgId, onProjectAssigned }: ProjectSearchDialogProps) => {\n  const [person, setPerson] = useState<Person | null>(null);\n  const [selectedProjectId, setSelectedProjectId] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n  const [existingProjectIds, setExistingProjectIds] = useState<string[]>([]);\n  const { toast } = useToast();\n\n  const loadPerson = useCallback(async () => {\n    if (!personId) return;\n    \n    try {\n      const { data, error } = await supabase\n        .from('person')\n        .select('fornavn, etternavn')\n        .eq('id', personId)\n        .single();\n\n      if (error) throw error;\n      setPerson(data);\n    } catch (error) {\n      console.error('Error loading person:', error);\n    }\n  }, [personId]);\n\n  const loadExistingProjects = useCallback(async () => {\n    if (!personId || !date || !orgId) return;\n    \n    try {\n      const { data, error } = await supabase\n        .from('vakt')\n        .select('project_id')\n        .eq('person_id', personId)\n        .eq('dato', date)\n        .eq('org_id', orgId);\n\n      if (error) throw error;\n      \n      const projectIds = (data || []).map(v => v.project_id).filter(Boolean);\n      setExistingProjectIds(projectIds);\n    } catch (error) {\n      console.error('Error loading existing projects:', error);\n    }\n  }, [personId, date, orgId]);\n\n  useEffect(() => {\n    if (open) {\n      loadPerson();\n      loadExistingProjects();\n      setSelectedProjectId('');\n    }\n  }, [open, loadPerson, loadExistingProjects]);\n\n  const assignProject = async () => {\n    if (!selectedProjectId) {\n      toast({\n        title: \"Prosjekt påkrevd\",\n        description: \"Du må velge et prosjekt før du kan tilordne det.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const { error } = await supabase\n        .from('vakt')\n        .insert({\n          dato: date,\n          person_id: personId,\n          project_id: selectedProjectId,\n          org_id: orgId\n        });\n\n      if (error) throw error;\n\n      toast({\n        title: \"Prosjekt tilordnet\",\n        description: \"Prosjektet har blitt tilordnet til denne dagen.\",\n      });\n\n      onProjectAssigned();\n      onClose();\n    } catch (error) {\n      console.error('Error assigning project:', error);\n      toast({\n        title: \"Feil ved tilordning\",\n        description: error instanceof Error ? error.message : \"Kunne ikke tilordne prosjekt.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setSelectedProjectId('');\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"w-full max-w-lg mx-4 sm:mx-0 sm:w-auto sm:max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Calendar className=\"h-5 w-5\" />\n            Finn prosjekt\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* Person info */}\n          {person && (\n            <div className=\"flex items-center gap-2 p-3 bg-muted rounded-lg\">\n              <User className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-sm font-medium\">\n                {getPersonDisplayName(person.fornavn, person.etternavn)}\n              </span>\n            </div>\n          )}\n\n          {/* Date info */}\n          <div className=\"flex items-center gap-2 p-3 bg-muted rounded-lg\">\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"text-sm\">\n              {new Date(date).toLocaleDateString('no-NO', { \n                weekday: 'long', \n                day: 'numeric', \n                month: 'long' \n              })}\n            </span>\n          </div>\n\n          {/* Project selector */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">Velg prosjekt</label>\n            <ProjectSelector\n              value={selectedProjectId}\n              onValueChange={setSelectedProjectId}\n              orgId={orgId}\n              personId={personId}\n              placeholder=\"Søk og velg prosjekt...\"\n              excludeProjectIds={existingProjectIds}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              {existingProjectIds.length > 0 \n                ? `${existingProjectIds.length} prosjekt(er) allerede lagt til for denne dagen og vises ikke.`\n                : \"Alle aktive prosjekter vil vises.\"\n              }\n            </p>\n          </div>\n\n          {/* Action buttons */}\n          <div className=\"flex gap-2 pt-4\">\n            <Button\n              onClick={assignProject}\n              disabled={!selectedProjectId || loading}\n              className=\"flex-1\"\n            >\n              {loading ? \"Tilordner...\" : \"Tilordne prosjekt\"}\n            </Button>\n            <Button variant=\"outline\" onClick={handleClose}>\n              Avbryt\n            </Button>\n          </div>\n\n          {/* Info about admin request */}\n          <div className=\"text-xs text-muted-foreground text-center p-3 bg-muted rounded-lg\">\n            <Building className=\"h-4 w-4 mx-auto mb-1\" />\n            <p>\n              Hvis du ikke finner prosjektet du leter etter, kan du be administrator om å tilordne det.\n            </p>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ProjectSearchDialog;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1419, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst labelVariants = cva(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\");\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uOAAG,EAAC;AAE1B,MAAM,sBAAQ,wOAAgB,MAG5B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,yOAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;;;AAErF,MAAM,WAAW,GAAG,yOAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1459, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ColorPickerDialog.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { HexColorPicker } from 'react-colorful';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Palette, Check, X } from 'lucide-react';\n\ninterface ColorPickerDialogProps {\n  open: boolean;\n  onClose: () => void;\n  projectName: string;\n  projectNumber: number;\n  currentColor: string;\n  onColorChange: (color: string) => void;\n}\n\nconst PRESET_COLORS = [\n  '#ef4444', // red\n  '#f97316', // orange  \n  '#f59e0b', // amber\n  '#eab308', // yellow\n  '#84cc16', // lime\n  '#22c55e', // green\n  '#10b981', // emerald\n  '#06b6d4', // cyan\n  '#0ea5e9', // sky\n  '#3b82f6', // blue\n  '#6366f1', // indigo\n  '#8b5cf6', // violet\n  '#a855f7', // purple\n  '#d946ef', // fuchsia\n  '#ec4899', // pink\n  '#f43f5e', // rose\n  '#64748b', // slate\n  '#6b7280', // gray\n];\n\nconst ColorPickerDialog = ({ \n  open, \n  onClose, \n  projectName, \n  projectNumber, \n  currentColor, \n  onColorChange \n}: ColorPickerDialogProps) => {\n  const [selectedColor, setSelectedColor] = useState(currentColor);\n  const [customColor, setCustomColor] = useState(currentColor);\n\n  const handleSave = () => {\n    onColorChange(selectedColor);\n    onClose();\n  };\n\n  const handlePresetColorClick = (color: string) => {\n    setSelectedColor(color);\n    setCustomColor(color);\n  };\n\n  const handleColorInputChange = (value: string) => {\n    if (value.match(/^#[0-9A-Fa-f]{6}$/)) {\n      setSelectedColor(value);\n      setCustomColor(value);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Palette className=\"h-5 w-5\" />\n            Endre prosjektfarge\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Project Info */}\n          <div className=\"p-3 bg-muted rounded-lg\">\n            <div className=\"font-medium\">{projectName}</div>\n            <div className=\"text-sm text-muted-foreground\">Prosjekt #{projectNumber}</div>\n            <div className=\"text-xs text-muted-foreground mt-1\">\n              Fargen vil oppdateres på alle forekomster av dette prosjektet\n            </div>\n          </div>\n\n          {/* Current vs New Color Preview */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"text-center space-y-2\">\n              <Label className=\"text-sm\">Nåværende farge</Label>\n              <div \n                className=\"w-full h-12 rounded border\"\n                style={{ backgroundColor: currentColor }}\n              />\n              <div className=\"text-xs font-mono\">{currentColor}</div>\n            </div>\n            <div className=\"text-center space-y-2\">\n              <Label className=\"text-sm\">Ny farge</Label>\n              <div \n                className=\"w-full h-12 rounded border\"\n                style={{ backgroundColor: selectedColor }}\n              />\n              <div className=\"text-xs font-mono\">{selectedColor}</div>\n            </div>\n          </div>\n\n          {/* Preset Colors */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium\">Forhåndsdefinerte farger</Label>\n            <div className=\"grid grid-cols-6 gap-2\">\n              {PRESET_COLORS.map((color) => (\n                <button\n                  key={color}\n                  className={`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${\n                    selectedColor === color ? 'border-primary ring-2 ring-primary/20' : 'border-gray-300'\n                  }`}\n                  style={{ backgroundColor: color }}\n                  onClick={() => handlePresetColorClick(color)}\n                  title={color}\n                />\n              ))}\n            </div>\n          </div>\n\n          {/* Color Picker */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium\">Tilpasset farge</Label>\n            <div className=\"flex flex-col items-center space-y-3\">\n              <HexColorPicker \n                color={customColor} \n                onChange={(color) => {\n                  setCustomColor(color);\n                  setSelectedColor(color);\n                }}\n                style={{ width: '200px', height: '150px' }}\n              />\n              <div className=\"flex items-center gap-2 w-full\">\n                <Label htmlFor=\"hex-input\" className=\"text-sm\">Hex:</Label>\n                <Input\n                  id=\"hex-input\"\n                  value={customColor}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setCustomColor(value);\n                    handleColorInputChange(value);\n                  }}\n                  placeholder=\"#000000\"\n                  className=\"font-mono text-sm\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-2 pt-4 border-t\">\n            <Button variant=\"outline\" onClick={onClose}>\n              <X className=\"h-4 w-4 mr-1\" />\n              Avbryt\n            </Button>\n            <Button onClick={handleSave}>\n              <Check className=\"h-4 w-4 mr-1\" />\n              Lagre farge\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ColorPickerDialog;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1852, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>;\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  );\n});\nTextarea.displayName = \"Textarea\";\n\nexport { Textarea };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,yBAAW,wOAAgB,MAAqC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;IAC5F,qBACE,0PAAC;QACC,WAAW,IAAA,yLAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AACA,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1887, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className,\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label ref={ref} className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)} {...props} />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground\",\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator ref={ref} className={cn(\"-mx-1 my-1 h-px bg-muted\", className)} {...props} />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,0OAAoB;AAEnC,MAAM,cAAc,2OAAqB;AAEzC,MAAM,cAAc,2OAAqB;AAEzC,MAAM,8BAAgB,wOAAgB,MAGpC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,0PAAC,6OAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yLAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,0PAAC,0OAAoB;gBAAC,OAAO;0BAC3B,cAAA,0PAAC,mSAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,6OAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,wOAAgB,CAG3C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,oPAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,yLAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,0PAAC,6RAAS;YAAC,WAAU;;;;;;;;;;;;MATnB;AAYN,qBAAqB,WAAW,GAAG,oPAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,wOAAgB,CAG7C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,sPAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yLAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,0PAAC,mSAAW;YAAC,WAAU;;;;;;;;;;;;MATrB;AAYN,uBAAuB,WAAW,GAAG,sPAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,wOAAgB,OAGpC,QAAyD;QAAxD,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO;yBACvD,0PAAC,4OAAsB;kBACrB,cAAA,0PAAC,6OAAuB;YACtB,KAAK;YACL,WAAW,IAAA,yLAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,0PAAC;;;;;8BACD,0PAAC,8OAAwB;oBACvB,WAAW,IAAA,yLAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,0PAAC;;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,6OAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,wOAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,2OAAqB;QAAC,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;;;AAEhH,YAAY,WAAW,GAAG,2OAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,wOAAgB,OAGjC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,0PAAC,0OAAoB;QACnB,KAAK;QACL,WAAW,IAAA,yLAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,0PAAC;gBAAK,WAAU;0BACd,cAAA,0PAAC,mPAA6B;8BAC5B,cAAA,0PAAC,6QAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,0PAAC,8OAAwB;0BAAE;;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0OAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,wOAAgB,QAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,0PAAC,+OAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,yLAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;;;AAEtG,gBAAgB,WAAW,GAAG,+OAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2130, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/TimeEntry.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Clock, MessageSquare, Paperclip, ChevronUp, ChevronDown } from 'lucide-react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useToast } from '@/hooks/use-toast';\nimport { formatTimeValue, validateTimeStep } from '@/lib/displayNames';\n\ninterface TimeEntryProps {\n  vaktId: string;\n  orgId: string;\n  onSave?: () => void;\n  defaultTimer?: number;\n  existingEntry?: {\n    id: string;\n    timer: number;\n    aktivitet_id: string;\n    notat: string;\n    status: string;\n    original_timer?: number;\n    original_aktivitet_id?: string;\n    original_notat?: string;\n    original_status?: string;\n  };\n}\n\ninterface Activity {\n  id: string;\n  navn: string;\n}\n\nconst TimeEntry = ({ vaktId, orgId, onSave, defaultTimer = 0.0, existingEntry }: TimeEntryProps) => {\n  const [hours, setHours] = useState(Math.floor(existingEntry?.timer || defaultTimer));\n  const [minutes, setMinutes] = useState(Math.round(((existingEntry?.timer || defaultTimer) % 1) * 60));\n  const [aktivitetId, setAktivitetId] = useState(existingEntry?.aktivitet_id || '');\n  const [notat, setNotat] = useState(existingEntry?.notat || '');\n  const [status, setStatus] = useState<'utkast' | 'sendt' | 'godkjent'>((existingEntry?.status as 'utkast' | 'sendt' | 'godkjent') || 'utkast');\n  const [activities, setActivities] = useState<Activity[]>([]);\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n\n  // Separate overtime time entries for 100% and 50%\n  const [overtime100Hours, setOvertime100Hours] = useState(0);\n  const [overtime100Minutes, setOvertime100Minutes] = useState(0);\n  const [overtime50Hours, setOvertime50Hours] = useState(0);\n  const [overtime50Minutes, setOvertime50Minutes] = useState(0);\n  const [showOvertime, setShowOvertime] = useState(false); // Collapsed by default\n\n  // Calculate total timer value from hours and minutes\n  const timer = hours + (minutes / 60);\n  const overtime100Timer = overtime100Hours + (overtime100Minutes / 60);\n  const overtime50Timer = overtime50Hours + (overtime50Minutes / 60);\n  const totalOvertimeTimer = overtime100Timer + overtime50Timer;\n\n  const loadActivities = useCallback(async () => {\n    try {\n      console.log('Loading activities for orgId:', orgId);\n      \n      // First, let's check what data exists in the table\n      const { data: allData, error: allError } = await supabase\n        .from('ttx_activity_cache')\n        .select('id, navn, aktiv, org_id')\n        .eq('org_id', orgId);\n      \n      console.log('All activities for org:', allData);\n      console.log('All activities error:', allError);\n      \n      if (allError) {\n        console.error('Supabase error loading all activities:', allError);\n        throw allError;\n      }\n      \n      // Now try the filtered query\n      const { data, error } = await supabase\n        .from('ttx_activity_cache')\n        .select('id, navn')\n        .eq('org_id', orgId)\n        .eq('aktiv', true)\n        .order('navn');\n\n      console.log('Filtered activities (aktiv=true):', data);\n      console.log('Filtered activities error:', error);\n\n      if (error) {\n        console.error('Supabase error loading activities:', error);\n        throw error;\n      }\n      \n      // If no active activities found, try without the aktiv filter\n      if (!data || data.length === 0) {\n        console.log('No active activities found, trying without aktiv filter...');\n        const { data: allActiveData, error: allActiveError } = await supabase\n          .from('ttx_activity_cache')\n          .select('id, navn')\n          .eq('org_id', orgId)\n          .order('navn');\n        \n        console.log('All activities without aktiv filter:', allActiveData);\n        \n        if (!allActiveError && allActiveData && allActiveData.length > 0) {\n          console.log('Found activities without aktiv filter, using them');\n          // Filter out overtime activities from the fallback data too\n          const filteredFallbackData = allActiveData.filter(activity => {\n            const navn = activity.navn?.toLowerCase() || '';\n            return !navn.includes('overtid') && \n                   !navn.includes('overtime') && \n                   !navn.includes('50%') && \n                   !navn.includes('100%');\n          });\n          setActivities(filteredFallbackData);\n          return;\n        }\n      }\n      \n      // Filter out overtime activities from the main dropdown\n      const filteredData = (data || []).filter(activity => {\n        const navn = activity.navn?.toLowerCase() || '';\n        return !navn.includes('overtid') && \n               !navn.includes('overtime') && \n               !navn.includes('50%') && \n               !navn.includes('100%');\n      });\n      \n      setActivities(filteredData);\n      \n      if (!filteredData || filteredData.length === 0) {\n        console.log('No non-overtime activities found for orgId:', orgId);\n        toast({\n          title: \"Ingen aktiviteter funnet\",\n          description: \"Det er ingen aktive aktiviteter konfigurert for denne organisasjonen.\",\n          variant: \"destructive\"\n        });\n      } else {\n        console.log(`Successfully loaded ${filteredData.length} activities (overtime activities filtered out)`);\n      }\n    } catch (error) {\n      console.error('Error loading activities:', error);\n      toast({\n        title: \"Feil ved lasting av aktiviteter\",\n        description: error instanceof Error ? error.message : \"Kunne ikke laste aktiviteter.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [orgId, toast]);\n\n  useEffect(() => {\n    // Load activities when component mounts\n    loadActivities();\n  }, [loadActivities]);\n\n  useEffect(() => {\n    // Load all existing timer entries and update state when existingEntry changes\n    const loadData = async () => {\n      // Reset all state before loading\n      setOvertime100Hours(0);\n      setOvertime100Minutes(0);\n      setOvertime50Hours(0);\n      setOvertime50Minutes(0);\n      setShowOvertime(false);\n\n      // Load ALL existing timer entries for this vakt (both regular and overtime)\n      try {\n        const { data, error } = await supabase\n          .from('vakt_timer')\n          .select('timer, is_overtime, lonnstype, aktivitet_id, notat, status, original_timer, original_aktivitet_id, original_notat, original_status')\n          .eq('vakt_id', vaktId);\n\n        if (error) throw error;\n\n        if (data && data.length > 0) {\n          // Separate regular time and overtime\n          let totalRegularTime = 0;\n          let totalOvertime50 = 0;\n          let totalOvertime100 = 0;\n          const firstEntry = data[0]; // Use first entry for activity, note, status\n          \n          data.forEach(entry => {\n            const timer = entry.timer ?? 0;\n            const lonnstype = entry.lonnstype || '';\n            \n            if (entry.is_overtime) {\n              // Use lonnstype to determine overtime type\n              if (lonnstype === 'overtid_50') {\n                totalOvertime50 += timer;\n              } else if (lonnstype === 'overtid_100') {\n                totalOvertime100 += timer;\n              } else {\n                // Fallback for old entries without specific overtime type\n                if (timer <= 4) {\n                  totalOvertime50 += timer;\n                } else {\n                  totalOvertime100 += timer;\n                }\n              }\n            } else {\n              totalRegularTime += timer;\n            }\n          });\n\n          // Set regular time\n          setHours(Math.max(0, Math.min(8, Math.floor(totalRegularTime))));\n          setMinutes(Math.max(0, Math.min(45, Math.round((totalRegularTime % 1) * 60 / 15) * 15)));\n\n          // Set 50% overtime\n          if (totalOvertime50 > 0) {\n            setOvertime50Hours(Math.floor(totalOvertime50));\n            setOvertime50Minutes(Math.max(0, Math.min(45, Math.round((totalOvertime50 % 1) * 60 / 15) * 15)));\n          }\n\n          // Set 100% overtime\n          if (totalOvertime100 > 0) {\n            setOvertime100Hours(Math.floor(totalOvertime100));\n            setOvertime100Minutes(Math.max(0, Math.min(45, Math.round((totalOvertime100 % 1) * 60 / 15) * 15)));\n          }\n\n          // Show overtime section if any overtime exists\n          if (totalOvertime50 > 0 || totalOvertime100 > 0) {\n            setShowOvertime(true);\n          }\n\n          // Set activity, note, and status from first entry (use original values if available)\n          setAktivitetId((firstEntry.original_aktivitet_id ?? firstEntry.aktivitet_id) || '');\n          setNotat((firstEntry.original_notat ?? firstEntry.notat) || '');\n          setStatus(((firstEntry.original_status ?? firstEntry.status) || 'utkast') as 'utkast' | 'sendt' | 'godkjent');\n        } else {\n          // For new entries, reset to default values\n          setHours(Math.floor(defaultTimer));\n          setMinutes(Math.max(0, Math.min(45, Math.round((defaultTimer % 1) * 60 / 15) * 15)));\n          setAktivitetId('');\n          setNotat('');\n          setStatus('utkast');\n        }\n      } catch (error) {\n        console.error('Error loading existing timer entries:', error);\n        // Fallback to existingEntry if database load fails\n        if (existingEntry) {\n          const baseTimer = existingEntry.original_timer ?? existingEntry.timer ?? defaultTimer;\n          const baseHours = Math.floor(baseTimer);\n          const baseMinutes = Math.round((baseTimer % 1) * 60);\n\n          setHours(Math.max(0, Math.min(8, baseHours)));\n          setMinutes(Math.max(0, Math.min(45, Math.round(baseMinutes / 15) * 15)));\n          setAktivitetId((existingEntry.original_aktivitet_id ?? existingEntry.aktivitet_id) || '');\n          setNotat((existingEntry.original_notat ?? existingEntry.notat) || '');\n          setStatus(((existingEntry.original_status ?? existingEntry.status) || 'utkast') as 'utkast' | 'sendt' | 'godkjent');\n        }\n      }\n    };\n\n    loadData();\n  }, [vaktId, existingEntry, defaultTimer]);\n\n  const adjustHours = (delta: number) => {\n    const newHours = Math.max(0, Math.min(8, hours + delta));\n    setHours(newHours);\n  };\n\n  const adjustMinutes = (delta: number) => {\n    const newMinutes = Math.max(0, Math.min(45, minutes + delta));\n    // Ensure minutes are in 15-minute intervals\n    const roundedMinutes = Math.round(newMinutes / 15) * 15;\n    setMinutes(roundedMinutes);\n  };\n\n  const adjustOvertime100Hours = (delta: number) => {\n    const newHours = Math.max(0, Math.min(12, overtime100Hours + delta));\n    setOvertime100Hours(newHours);\n  };\n\n  const adjustOvertime100Minutes = (delta: number) => {\n    const newMinutes = Math.max(0, Math.min(45, overtime100Minutes + delta));\n    const roundedMinutes = Math.round(newMinutes / 15) * 15;\n    setOvertime100Minutes(roundedMinutes);\n  };\n\n  const adjustOvertime50Hours = (delta: number) => {\n    const newHours = Math.max(0, Math.min(12, overtime50Hours + delta));\n    setOvertime50Hours(newHours);\n  };\n\n  const adjustOvertime50Minutes = (delta: number) => {\n    const newMinutes = Math.max(0, Math.min(45, overtime50Minutes + delta));\n    const roundedMinutes = Math.round(newMinutes / 15) * 15;\n    setOvertime50Minutes(roundedMinutes);\n  };\n\n  const handleSave = async (nextStatus: 'utkast' | 'sendt' | 'godkjent' = status) => {\n    console.log('handleSave called with:', { aktivitetId, timer, nextStatus, activities: activities.length });\n    \n    if (!aktivitetId) {\n      toast({\n        title: \"Aktivitet påkrevd\",\n        description: \"Du må velge en aktivitet før du kan lagre.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (activities.length === 0) {\n      toast({\n        title: \"Ingen aktiviteter tilgjengelig\",\n        description: \"Det er ingen aktive aktiviteter konfigurert. Kontakt administrator.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Verify the selected activity exists\n    const selectedActivity = activities.find(a => a.id === aktivitetId);\n    if (!selectedActivity) {\n      toast({\n        title: \"Ugyldig aktivitet\",\n        description: \"Den valgte aktiviteten eksisterer ikke lenger.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (!validateTimeStep(timer)) {\n      toast({\n        title: \"Ugyldig timesteg\",\n        description: \"Timer må være i 0,25-steg (f.eks. 7,25, 7,50, 7,75, 8,00).\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Find specific overtime activities (50% and 100%)\n    let overtime50ActivityId = null;\n    let overtime100ActivityId = null;\n    \n    if (overtime100Timer > 0 || overtime50Timer > 0) {\n      try {\n        // Look for specific overtime activities\n        const { data: overtimeActivities, error: overtimeError } = await supabase\n          .from('ttx_activity_cache')\n          .select('id, navn, ttx_id')\n          .eq('org_id', orgId)\n          .eq('aktiv', true)\n          .ilike('navn', '%overtid%');\n\n        if (overtimeError) {\n          console.error('Error loading overtime activities:', overtimeError);\n        } else if (overtimeActivities && overtimeActivities.length > 0) {\n          console.log('Available overtime activities:', overtimeActivities.map(a => ({ id: a.id, navn: a.navn })));\n          \n          // Find specific overtime activities with more flexible search\n          const overtime50Activity = overtimeActivities.find(act => \n            act.navn && (\n              act.navn.toLowerCase().includes('50%') ||\n              act.navn.toLowerCase().includes('50') ||\n              act.navn.toLowerCase().includes('halv')\n            )\n          );\n          const overtime100Activity = overtimeActivities.find(act => \n            act.navn && (\n              act.navn.toLowerCase().includes('100%') ||\n              act.navn.toLowerCase().includes('100') ||\n              act.navn.toLowerCase().includes('full') ||\n              act.navn.toLowerCase().includes('hel')\n            )\n          );\n          \n          if (overtime50Activity) {\n            overtime50ActivityId = overtime50Activity.id;\n            console.log('Found 50% overtime activity:', overtime50Activity);\n          }\n          if (overtime100Activity) {\n            overtime100ActivityId = overtime100Activity.id;\n            console.log('Found 100% overtime activity:', overtime100Activity);\n          }\n        } else {\n          console.log('No overtime activities found in cache - edge function will create them automatically');\n        }\n      } catch (error) {\n        console.error('Error finding overtime activities:', error);\n      }\n    }\n\n    if (!validateTimeStep(timer)) {\n      toast({\n        title: \"Ugyldig tidsverdi\",\n        description: \"Timer må være i 0,25-steg (f.eks. 7,25, 7,50, 7,75, 8,00).\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (\n      totalOvertimeTimer > 0 &&\n      (!validateTimeStep(overtime100Timer) || !validateTimeStep(overtime50Timer))\n    ) {\n      toast({\n        title: \"Ugyldig overtidstidsverdi\",\n        description: \"Overtidstimer må være i 0,25-steg (f.eks. 1,25, 2,50, 3,75, 4,00).\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const previousStatus = status;\n    setStatus(nextStatus);\n    setLoading(true);\n    try {\n      // Delete all existing timer entries for this vakt to avoid duplicates\n      await supabase\n        .from('vakt_timer')\n        .delete()\n        .eq('vakt_id', vaktId);\n\n      // Save normal time entry\n      const normalTimeData = {\n        vakt_id: vaktId,\n        org_id: orgId,\n        timer,\n        aktivitet_id: aktivitetId || null, // Convert empty string to null\n        notat: notat || null,\n        status: nextStatus,\n        is_overtime: false\n      };\n\n      const result = await supabase\n        .from('vakt_timer')\n        .insert(normalTimeData);\n\n      if (result.error) throw result.error;\n\n      // Insert overtime entries if they exist\n      if (overtime100Timer > 0) {\n        const overtime100Data = {\n          vakt_id: vaktId,\n          org_id: orgId,\n          timer: overtime100Timer,\n          aktivitet_id: aktivitetId || null, // Convert empty string to null\n          overtime_aktivitet_id: overtime100ActivityId || null, // Use specific 100% overtime activity\n          notat: notat || null,\n          status: nextStatus,\n          is_overtime: true,\n          lonnstype: 'overtid_100' // Mark as 100% overtime\n        };\n\n        const overtime100Result = await supabase\n          .from('vakt_timer')\n          .insert(overtime100Data);\n\n        if (overtime100Result.error) throw overtime100Result.error;\n      }\n\n      if (overtime50Timer > 0) {\n        const overtime50Data = {\n          vakt_id: vaktId,\n          org_id: orgId,\n          timer: overtime50Timer,\n          aktivitet_id: aktivitetId || null, // Convert empty string to null\n          overtime_aktivitet_id: overtime50ActivityId || null, // Use specific 50% overtime activity\n          notat: notat || null,\n          status: nextStatus,\n          is_overtime: true,\n          lonnstype: 'overtid_50' // Mark as 50% overtime\n        };\n\n        const overtime50Result = await supabase\n          .from('vakt_timer')\n          .insert(overtime50Data);\n\n        if (overtime50Result.error) throw overtime50Result.error;\n      }\n\n      toast({\n        title: \"Lagret\",\n        description: `Timeføring lagret${totalOvertimeTimer > 0 ? ` med ${formatTimeValue(totalOvertimeTimer)} overtid` : ''}.`\n      });\n\n      onSave?.();\n    } catch (error: unknown) {\n      toast({\n        title: \"Lagring feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n      setStatus(previousStatus);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = () => {\n    switch (status) {\n      case 'godkjent':\n        return <Badge className=\"bg-green-500\">🟢 Godkjent</Badge>;\n      case 'sendt':\n        return <Badge className=\"bg-blue-500\">🔵 Sendt</Badge>;\n      default:\n        return <Badge variant=\"outline\">📝 Utkast</Badge>;\n    }\n  };\n\n  return (\n    <Card className=\"mb-4\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between\">\n          <span className=\"flex items-center gap-2\">\n            <Clock className=\"h-4 w-4\" />\n            Timeføring\n          </span>\n          {getStatusBadge()}\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"space-y-3\">\n          <Label>Timer</Label>\n          <div className=\"flex items-center justify-center gap-6 p-4 border rounded-lg bg-muted/20\">\n            {/* Hours Section */}\n            <div className=\"flex flex-col items-center space-y-2\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustHours(1)}\n                disabled={hours >= 8}\n              >\n                <ChevronUp className=\"h-4 w-4\" />\n              </Button>\n              <div className=\"text-3xl font-bold w-16 text-center\">\n                {hours.toString().padStart(2, '0')}\n                <div className=\"text-xs text-muted-foreground font-normal mt-1\">T</div>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustHours(-1)}\n                disabled={hours <= 0}\n              >\n                <ChevronDown className=\"h-4 w-4\" />\n              </Button>\n            </div>\n\n            {/* Minutes Section */}\n            <div className=\"flex flex-col items-center space-y-2\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustMinutes(15)}\n                disabled={minutes >= 45}\n              >\n                <ChevronUp className=\"h-4 w-4\" />\n              </Button>\n              <div className=\"text-3xl font-bold w-16 text-center\">\n                {minutes.toString().padStart(2, '0')}\n                <div className=\"text-xs text-muted-foreground font-normal mt-1\">M</div>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => adjustMinutes(-15)}\n                disabled={minutes <= 0}\n              >\n                <ChevronDown className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n          <div className=\"text-center text-sm text-muted-foreground\">\n            Total: {formatTimeValue(timer)} timer\n            {totalOvertimeTimer > 0 && (\n              <span className=\"ml-2 text-yellow-600 font-bold\">\n                + {formatTimeValue(totalOvertimeTimer)} overtid ⚡\n              </span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"aktivitet\">Aktivitet *</Label>\n          <Select \n            value={aktivitetId} \n            onValueChange={(value) => {\n              console.log('Activity selected:', value);\n              setAktivitetId(value);\n            }}\n            disabled={activities.length === 0}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder={activities.length === 0 ? \"Ingen aktiviteter tilgjengelig\" : \"Velg aktivitet\"} />\n            </SelectTrigger>\n            <SelectContent className=\"bg-background border z-50\">\n              {activities.length === 0 ? (\n                <div className=\"px-2 py-1.5 text-sm text-muted-foreground\">\n                  Ingen aktiviteter tilgjengelig\n                </div>\n              ) : (\n                activities.map((activity) => (\n                  <SelectItem key={activity.id} value={activity.id}>\n                    {activity.navn}\n                  </SelectItem>\n                ))\n              )}\n            </SelectContent>\n          </Select>\n          {activities.length === 0 && (\n            <p className=\"text-sm text-muted-foreground\">\n              Kontakt administrator for å få aktiviteter konfigurert.\n            </p>\n          )}\n        </div>\n\n        {/* Overtime Section */}\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              Overtid\n            </Label>\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setShowOvertime(!showOvertime)}\n              className=\"min-h-[44px] w-full sm:w-auto text-xs\"\n            >\n              {showOvertime ? 'Skjul' : 'Vis'}\n            </Button>\n          </div>\n          \n          {showOvertime && (\n            <div className=\"space-y-4 p-4 border rounded-lg bg-yellow-50 border-yellow-200\">\n              {/* 100% Overtime */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-blue-600 font-medium\">Overtidstillegg 100%</Label>\n                <div className=\"flex items-center justify-center gap-6\">\n                  {/* 100% Hours */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Hours(1)}\n                      disabled={overtime100Hours >= 12}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime100Hours.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">T</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Hours(-1)}\n                      disabled={overtime100Hours <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n\n                  {/* 100% Minutes */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Minutes(15)}\n                      disabled={overtime100Minutes >= 45}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime100Minutes.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">M</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime100Minutes(-15)}\n                      disabled={overtime100Minutes <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n\n              {/* 50% Overtime */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-blue-600 font-medium\">Overtidstillegg 50%</Label>\n                <div className=\"flex items-center justify-center gap-6\">\n                  {/* 50% Hours */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Hours(1)}\n                      disabled={overtime50Hours >= 12}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime50Hours.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">T</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Hours(-1)}\n                      disabled={overtime50Hours <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n\n                  {/* 50% Minutes */}\n                  <div className=\"flex flex-col items-center space-y-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Minutes(15)}\n                      disabled={overtime50Minutes >= 45}\n                    >\n                      <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"text-3xl font-bold w-16 text-center\">\n                      {overtime50Minutes.toString().padStart(2, '0')}\n                      <div className=\"text-xs text-muted-foreground font-normal mt-1\">M</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => adjustOvertime50Minutes(-15)}\n                      disabled={overtime50Minutes <= 0}\n                    >\n                      <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          {showOvertime && (\n            <div className=\"text-center text-sm text-muted-foreground\">\n              Overtid: {formatTimeValue(totalOvertimeTimer)} timer\n              {totalOvertimeTimer > 0 && <span className=\"ml-2 text-yellow-600 font-bold\">⚡</span>}\n            </div>\n          )}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"notat\">Notat</Label>\n          <Textarea\n            id=\"notat\"\n            value={notat}\n            onChange={(e) => setNotat(e.target.value)}\n            placeholder=\"Valgfritt notat...\"\n            rows={3}\n          />\n        </div>\n\n        <div className=\"flex gap-2\">\n          <Button\n            onClick={() => handleSave('utkast')}\n            disabled={loading}\n            variant=\"outline\"\n          >\n            {loading && status === 'utkast' ? 'Lagrer...' : 'Lagre utkast'}\n          </Button>\n          <Button\n            onClick={() => handleSave('sendt')}\n            disabled={loading}\n          >\n            {loading && status === 'sendt' ? 'Sender...' : 'Send til godkjenning'}\n          </Button>\n          {existingEntry && (\n            <div className=\"flex gap-1\">\n              <Button variant=\"outline\" size=\"icon\">\n                <MessageSquare className=\"h-4 w-4\" />\n              </Button>\n              <Button variant=\"outline\" size=\"icon\">\n                <Paperclip className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default TimeEntry;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3374, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/components/StaffingList.tsx"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogTrigger } from '@/components/ui/dialog';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useAuth } from '@/hooks/useAuth';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Plus, Check, Send, Palette, X, RefreshCw, Trash2, HelpCircle } from 'lucide-react';\nimport { getPersonDisplayName, generateProjectColor, getContrastColor, formatTimeValue, getWeekNumber } from '@/lib/displayNames';\nimport ProjectSearchDialog from './ProjectSearchDialog';\nimport ColorPickerDialog from './ColorPickerDialog';\nimport TimeEntry from './TimeEntry';\nimport { startOfISOWeek, addWeeks, addDays, isValid as isValidDate } from 'date-fns';\nimport { toLocalDateString, toLocalDateTimeString } from '@/lib/utils';\n\ninterface StaffingEntry {\n  id: string;\n  date: string;\n  person: {\n    id: string;\n    fornavn: string;\n    etternavn: string;\n    forventet_dagstimer: number | null;\n    tripletex_employee_id?: number | null;\n  };\n  project: {\n    id: string; // This is the UUID from ttx_project_cache.id\n    tripletex_project_id: number;\n    project_name: string;\n    project_number: number;\n    color?: string;\n  } | null;\n  activities: Array<{\n    id: string;\n    timer: number;\n    status: string;\n    activity_name: string;\n    lonnstype: string;\n    notat?: string;\n    is_overtime?: boolean;\n    approved_at?: string;\n    approved_by?: string;\n    tripletex_synced_at?: string;\n    tripletex_entry_id?: number;\n    sync_error?: string;\n    aktivitet_id?: string; // UUID reference in our DB\n    ttx_activity_id?: number; // Tripletex activity id\n  }>;\n  totalHours: number;\n  status: 'missing' | 'draft' | 'ready' | 'approved' | 'sent';\n}\n\ninterface WeekData {\n  week: number;\n  year: number;\n  dates: Date[];\n}\n\ninterface Profile {\n  id: string;\n  user_id: string;\n  org_id: string;\n  org?: {\n    name: string;\n  };\n}\n\ninterface Project {\n  id: string;\n  tripletex_project_id: number;\n  project_name: string;\n  project_number: number;\n  color?: string;\n}\n\ninterface Employee {\n  id: string;\n  fornavn: string;\n  etternavn: string;\n  forventet_dagstimer: number | null;\n  tripletex_employee_id?: number | null;\n}\n\ninterface StaffingListProps {\n  startWeek: number;\n  startYear: number;\n  weeksToShow?: number;\n}\n\ninterface TimeEntry {\n  id: string;\n  timer: number;\n  aktivitet_id?: string;\n  notat?: string;\n  status: string;\n}\n\ninterface VaktTimer {\n  id: string;\n  timer: number;\n  status: string;\n  lonnstype: string;\n  notat?: string;\n  is_overtime?: boolean;\n  approved_at?: string;\n  approved_by?: string;\n  tripletex_synced_at?: string;\n  tripletex_entry_id?: number;\n  sync_error?: string;\n  aktivitet_id?: string;\n  ttx_activity_id?: number;\n}\n\ninterface CalendarDay {\n  dato: string;\n  is_weekend: boolean;\n  is_holiday: boolean;\n}\n\nconst StaffingList = ({ startWeek, startYear, weeksToShow = 6 }: StaffingListProps) => {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  \n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [staffingData, setStaffingData] = useState<StaffingEntry[]>([]);\n  const [freeLines, setFreeLines] = useState<Array<{\n    id: string;\n    org_id: string;\n    week_number: number;\n    year: number;\n    name?: string | null;\n    display_order: number;\n    frie_bobler?: Array<{\n      id: string;\n      date: string;\n      text: string;\n      color: string;\n      display_order: number;\n    }>;\n  }>>([]);\n  const [projectColors, setProjectColors] = useState<Record<number, string>>({});\n  const [employees, setEmployees] = useState<Employee[]>([]);\n  const [selectedEntries, setSelectedEntries] = useState<Set<string>>(new Set());\n  const [loading, setLoading] = useState(true);\n  const [initialized, setInitialized] = useState(false);\n  const [showProjectSearch, setShowProjectSearch] = useState<{date: string, personId: string} | null>(null);\n  const [showColorPicker, setShowColorPicker] = useState<{\n    projectName: string;\n    projectNumber: number;\n    tripletexProjectId: number;\n    currentColor: string;\n  } | null>(null);\n  const [calendarDays, setCalendarDays] = useState<Record<string, { isWeekend: boolean; isHoliday: boolean }>>({});\n  const [sendingToTripletex, setSendingToTripletex] = useState<Set<string>>(new Set());\n  const [loadingOverlay, setLoadingOverlay] = useState<{\n    isVisible: boolean;\n    message: string;\n    count?: number;\n  }>({\n    isVisible: false,\n    message: '',\n  });\n  const [editDialog, setEditDialog] = useState<{ vaktId: string; existingEntry?: TimeEntry } | null>(null);\n  const [freeBubbleEditDialog, setFreeBubbleEditDialog] = useState<{\n    bubbleId: string;\n    text: string;\n    color: string;\n    lineId: string;\n  } | null>(null);\n  const [deleteLineDialog, setDeleteLineDialog] = useState<{\n    lineId: string;\n    lineNumber: number;\n  } | null>(null);\n\n  const [editLineNameDialog, setEditLineNameDialog] = useState<{\n    lineId: string;\n    currentName: string;\n  } | null>(null);\n  const [isProcessingUpdate, setIsProcessingUpdate] = useState(false);\n\n  const toDateKey = useCallback((d: Date): string => {\n    try {\n      if (!isValidDate(d)) return '';\n      return toLocalDateString(d);\n    } catch (error) {\n      console.error('Error formatting date:', error, d);\n      return '';\n    }\n  }, []);\n  \n  // Helper to safely access week/year with fallbacks\n  const coerceWeekRef = (item?: { week?: number; year?: number } | null): { week: number; year: number } => {\n    if (item?.week && item?.year) {\n      return { week: item.week, year: item.year };\n    }\n    // Fallback to current date's week/year\n    const now = new Date();\n    return {\n      week: getWeekNumber(now),\n      year: now.getFullYear()\n    };\n  };\n\n  // Coerce incoming props to safe week/year\n  const { week: safeStartWeek, year: safeStartYear } = coerceWeekRef({ week: startWeek, year: startYear });\n\n  // Get multiple weeks of data with robust date handling\n  const getMultipleWeeksData = useCallback((): WeekData[] => {\n    const weeks: WeekData[] = [];\n    let currentWeek = Math.max(1, Math.min(53, safeStartWeek)); // Clamp week to valid range\n    let currentYear = Math.max(1970, Math.min(3000, safeStartYear)); // Clamp year to reasonable range\n    \n    for (let i = 0; i < weeksToShow; i++) {\n      try {\n        // ISO Week 1 Monday via date-fns\n        const jan4 = new Date(currentYear, 0, 4);\n        const week1Monday = startOfISOWeek(jan4);\n        if (!isValidDate(week1Monday)) {\n          console.error(`Invalid week1Monday for year ${currentYear}`);\n          break;\n        }\n\n        const targetMonday = addWeeks(week1Monday, currentWeek - 1);\n        if (!isValidDate(targetMonday)) {\n          console.error(`Invalid targetMonday for week ${currentWeek}, year ${currentYear}`);\n          break;\n        }\n\n        // Generate 7 days\n        const dates: Date[] = [];\n        for (let j = 0; j < 7; j++) {\n          const date = addDays(targetMonday, j);\n          if (isValidDate(date)) dates.push(date);\n        }\n\n        if (dates.length === 7) {\n          weeks.push({ week: currentWeek, year: currentYear, dates });\n        }\n\n        // Next week with 53-week check\n        currentWeek++;\n        if (currentWeek > 53) {\n          currentYear++;\n          currentWeek = 1;\n        } else if (currentWeek > 52) {\n          const dec31 = new Date(currentYear, 11, 31);\n          const lastWeek = getWeekNumber(dec31);\n          if (currentWeek > lastWeek) {\n            currentYear++;\n            currentWeek = 1;\n          }\n        }\n      } catch (error) {\n        console.error(`Error generating week data for week ${currentWeek}, year ${currentYear}:`, error);\n        break;\n      }\n    }\n    \n    return weeks;\n  }, [safeStartWeek, safeStartYear, weeksToShow]);\n\n  // Memoize multiWeekData to prevent infinite loops\n  const multiWeekData = useMemo(() => getMultipleWeeksData(), [getMultipleWeeksData]);\n  \n  // Memoize allDates to prevent infinite loops\n  const allDates = useMemo(() => {\n    return multiWeekData.flatMap(w => w.dates).filter(d => d instanceof Date && !isNaN(d.getTime()));\n  }, [multiWeekData]);\n\n  // Safe access to last week data with fallback\n  const lastWeekData = multiWeekData.length > 0 ? multiWeekData[multiWeekData.length - 1] : null;\n  const safeLastWeek = coerceWeekRef(lastWeekData);\n\n  const loadUserProfile = useCallback(async () => {\n    if (!user) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*, org:org_id (id, name)')\n        .eq('user_id', user.id)\n        .maybeSingle();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      if (data) {\n        setProfile(data);\n        setInitialized(true);\n      } else {\n        setProfile(null);\n        setLoading(false);\n        setInitialized(true);\n      }\n    } catch (error) {\n      console.error('Error loading profile:', error);\n      setProfile(null);\n      setLoading(false);\n      setInitialized(true);\n    }\n  }, [user]);\n\n  const loadStaffingData = useCallback(async (silent: boolean = false) => {\n    if (!profile?.org_id) return;\n\n    if (!silent) setLoading(true);\n    try {\n      const dateStrings = allDates.map(toDateKey).filter(Boolean);\n      if (dateStrings.length === 0) {\n        console.warn('No valid dates generated for staffing query');\n        setStaffingData([]);\n        return;\n      }\n      \n      // Get all employees first \n      const { data: allEmployees, error: employeeError } = await supabase\n        .from('person')\n        .select('*')\n        .eq('org_id', profile.org_id)\n        .eq('aktiv', true)\n        .order('fornavn');\n\n      if (employeeError) throw employeeError;\n\n      // Get existing vakt data\n      const { data: vaktData, error } = await supabase\n        .from('vakt')\n        .select(`\n          id,\n          dato,\n          person_id,\n          person:person_id (\n            id,\n            fornavn,\n            etternavn,\n            forventet_dagstimer,\n            tripletex_employee_id\n          ),\n          ttx_project_cache:project_id (\n            id,\n            tripletex_project_id,\n            project_name,\n            project_number\n          ),\n          vakt_timer (\n            id,\n            timer,\n            status,\n            lonnstype,\n            notat,\n            is_overtime,\n            aktivitet_id,\n            tripletex_synced_at,\n            tripletex_entry_id,\n            sync_error,\n            approved_at,\n            approved_by,\n            original_timer,\n            original_aktivitet_id,\n            original_notat,\n            original_status,\n            ttx_activity_cache:aktivitet_id (\n              id,\n              navn,\n              ttx_id\n            )\n          )\n        `)\n        .in('dato', dateStrings)\n        .eq('org_id', profile.org_id);\n\n      if (error) throw error;\n\n      // Create a map of existing vakt data - allow multiple entries per person per day\n      const vaktMap = new Map<string, VaktTimer[]>();\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      vaktData?.forEach((vakt: any) => {\n        const key = `${vakt.dato}-${vakt.person_id}`;\n        if (!vaktMap.has(key)) {\n          vaktMap.set(key, []);\n        }\n        vaktMap.get(key)!.push(vakt);\n      });\n\n      // Generate staffing entries for all employees and dates\n      const entries: StaffingEntry[] = [];\n      \n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      allEmployees?.forEach((employee: any) => {\n        allDates.forEach((date) => {\n          const dateKey = toDateKey(date);\n          if (!dateKey) return;\n          \n          const vaktKey = `${dateKey}-${employee.id}`;\n          const existingVakts = vaktMap.get(vaktKey) || [];\n          \n          if (existingVakts.length > 0) {\n            // Process each vakt entry separately to create multiple StaffingEntry entries\n            existingVakts.forEach((existingVakt) => {\n              // Use existing vakt data and transform vaktTimer to activities\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              const activities = ((existingVakt as any).vakt_timer || []).map((timer: any) => ({\n              id: timer.id,\n              timer: timer.timer ?? 0,\n              status: timer.status,\n              activity_name: timer.ttx_activity_cache?.navn || 'Ukjent aktivitet',\n              lonnstype: timer.lonnstype,\n              notat: timer.notat,\n              is_overtime: timer.is_overtime,\n              approved_at: timer.approved_at,\n              approved_by: timer.approved_by,\n              tripletex_synced_at: timer.tripletex_synced_at,\n              tripletex_entry_id: timer.tripletex_entry_id,\n              sync_error: timer.sync_error,\n              aktivitet_id: timer.aktivitet_id,\n              ttx_activity_id: timer.ttx_activity_cache?.ttx_id ?? undefined,\n              original_timer: timer.original_timer,\n              original_aktivitet_id: timer.original_aktivitet_id,\n              original_notat: timer.original_notat,\n              original_status: timer.original_status\n            }));\n            \n            // Calculate total hours from activities\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const totalHours = activities.reduce((sum: number, activity: any) => sum + (activity.timer ?? 0), 0);\n            \n              entries.push({\n                id: existingVakt.id,\n                date: dateKey,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                person: (existingVakt as any).person,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                project: (existingVakt as any).ttx_project_cache,\n                activities: activities,\n                totalHours: totalHours,\n                status: activities.length > 0 ? \n                  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                  (activities.every((a: any) => a.status === 'godkjent') ? 'approved' : \n                   activities.some((a: any) => a.tripletex_synced_at) ? 'sent' : 'draft') : \n                  'missing'\n              });\n            });\n          } else {\n            // Create new entry\n            entries.push({\n              id: `new-${employee.id}-${dateKey}`,\n              date: dateKey,\n              person: employee,\n              project: null,\n              activities: [],\n              totalHours: 0,\n              status: 'missing'\n            });\n          }\n        });\n      });\n\n      setStaffingData(entries);\n    } catch (error) {\n      console.error('Error loading staffing data:', error);\n      toast({\n        title: \"Feil ved lasting av bemanningsdata\",\n        description: \"Kunne ikke laste bemanningsliste.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      if (!silent) setLoading(false);\n    }\n  }, [profile?.org_id, allDates, toDateKey, toast]);\n\n  const loadFreeLines = useCallback(async () => {\n    if (!profile?.org_id) return;\n\n    try {\n      // Load free lines for all weeks being displayed\n      const weekNumbers = multiWeekData.map(w => w.week);\n      const years = multiWeekData.map(w => w.year);\n\n      const { data, error } = await supabase\n        .from('frie_linjer')\n        .select(`\n          *,\n          frie_bobler (\n            id,\n            date,\n            text,\n            color,\n            display_order\n          )\n        `)\n        .eq('org_id', profile.org_id)\n        .in('week_number', weekNumbers)\n        .in('year', years)\n        .order('display_order');\n\n      if (error) throw error;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      setFreeLines((data as any) || []);\n    } catch (error) {\n      console.error('Error loading free lines:', error);\n    }\n  }, [profile?.org_id, multiWeekData]);\n\n  const loadProjectColors = useCallback(async () => {\n    if (!profile?.org_id) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('project_color')\n        .select('*')\n        .eq('org_id', profile.org_id);\n\n      if (error) throw error;\n      \n      const colorMap: Record<number, string> = {};\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      data?.forEach((color: any) => {\n        colorMap[color.tripletex_project_id] = color.hex;\n      });\n      \n      setProjectColors(colorMap);\n    } catch (error) {\n      console.error('Error loading project colors:', error);\n    }\n  }, [profile?.org_id]);\n\n  const loadCalendarDays = useCallback(async () => {\n    if (!profile?.org_id) return;\n\n    try {\n      const dateStrings = allDates.map(toDateKey).filter(Boolean);\n      if (dateStrings.length === 0) return;\n\n      const { data, error } = await supabase\n        .from('kalender_dag')\n        .select('*')\n        .in('dato', dateStrings);\n\n      if (error) throw error;\n      \n      const calendarMap: Record<string, { isWeekend: boolean; isHoliday: boolean }> = {};\n      data?.forEach((day: CalendarDay) => {\n        calendarMap[day.dato] = {\n          isWeekend: Boolean(day.is_weekend),\n          isHoliday: Boolean(day.is_holiday)\n        };\n      });\n      \n      setCalendarDays(calendarMap);\n    } catch (error) {\n      console.error('Error loading calendar days:', error);\n    }\n  }, [profile?.org_id, allDates, toDateKey]);\n\n  const loadEmployees = useCallback(async () => {\n    if (!profile?.org_id) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('person')\n        .select('*')\n        .eq('org_id', profile.org_id)\n        .eq('aktiv', true)\n        .order('fornavn');\n\n      if (error) throw error;\n      setEmployees(data || []);\n    } catch (error) {\n      console.error('Error loading employees:', error);\n    }\n  }, [profile?.org_id]);\n\n  useEffect(() => {\n    if (user) {\n      loadUserProfile();\n    }\n  }, [user, loadUserProfile]);\n\n  useEffect(() => {\n    if (profile) {\n      loadStaffingData();\n      loadProjectColors();\n      loadCalendarDays();\n      loadFreeLines();\n      loadEmployees();\n      setInitialized(true);\n    } else {\n      setLoading(false);\n      if (!initialized) {\n        setInitialized(true);\n      }\n    }\n  }, [profile, startWeek, startYear, weeksToShow, loadStaffingData, loadProjectColors, loadCalendarDays, loadFreeLines, loadEmployees, initialized]);\n\n\n  // Optimistic update helpers\n  const updateStaffingDataOptimistically = (updateFn: (data: StaffingEntry[]) => StaffingEntry[]) => {\n    setStaffingData(prev => updateFn(prev));\n  };\n\n  const revalidateInBackground = () => {\n    setTimeout(() => loadStaffingData(true), 100);\n  };\n\n  const rollbackUpdate = (previousData: StaffingEntry[], errorMessage: string) => {\n    setStaffingData(previousData);\n    toast({\n      title: \"Operasjon feilet\",\n      description: errorMessage,\n      variant: \"destructive\"\n    });\n  };\n\n  const getProjectColor = (tripletexProjectId?: number) => {\n    if (!tripletexProjectId) return '#94a3b8';\n    return projectColors[tripletexProjectId] || generateProjectColor(tripletexProjectId);\n  };\n\n  const setProjectColor = async (tripletexProjectId: number, color: string) => {\n    try {\n      const { error } = await supabase\n        .from('project_color')\n        .upsert({\n          org_id: profile?.org_id || '',\n          tripletex_project_id: tripletexProjectId,\n          hex: color\n        }, {\n          onConflict: 'org_id,tripletex_project_id'\n        });\n\n      if (error) throw error;\n      \n      setProjectColors(prev => ({ ...prev, [tripletexProjectId]: color }));\n      \n      // Count how many instances were updated\n      const affectedEntries = staffingData.filter(entry => \n        entry.project?.tripletex_project_id === tripletexProjectId\n      );\n      \n      // Optimistically update project colors  \n      setProjectColors(prev => ({ ...prev, [tripletexProjectId]: color }));\n      \n      toast({\n        title: \"Prosjektfarge oppdatert\",\n        description: `Fargen er endret på ${affectedEntries.length} forekomster av prosjektet`\n      });\n\n      // Revalidate in background\n      revalidateInBackground();\n    } catch (error) {\n      console.error('Error updating project color:', error);\n      toast({\n        title: \"Feil ved oppdatering\",\n        description: \"Kunne ikke oppdatere prosjektfarge\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleProjectColorClick = (project: Project, e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent drag from starting\n    setShowColorPicker({\n      projectName: project.project_name,\n      projectNumber: project.project_number,\n      tripletexProjectId: project.tripletex_project_id,\n      currentColor: getProjectColor(project.tripletex_project_id)\n    });\n  };\n\n  const deleteEntry = async (entryId: string) => {\n    const previousData = [...staffingData];\n    \n    try {\n      const entry = staffingData.find(e => e.id === entryId);\n      if (!entry) return;\n\n      // Optimistically remove the entry\n      updateStaffingDataOptimistically(data => data.filter(e => e.id !== entryId));\n\n      // Delete all vakt_timer entries associated with this vakt\n      const { error: timerError } = await supabase\n        .from('vakt_timer')\n        .delete()\n        .eq('vakt_id', entryId);\n\n      if (timerError) throw timerError;\n\n      // Delete the vakt entry\n      const { error: vaktError } = await supabase\n        .from('vakt')\n        .delete()\n        .eq('id', entryId);\n\n      if (vaktError) throw vaktError;\n\n      toast({\n        title: \"Timeføring slettet\",\n        description: `Timeføring for ${entry.project?.project_name || 'prosjekt'} er slettet`\n      });\n\n      revalidateInBackground();\n    } catch (error: unknown) {\n      rollbackUpdate(previousData, error instanceof Error ? error.message : 'En ukjent feil oppstod');\n    }\n  };\n\n  const moveEntryToEmployeeAndDate = async (entryId: string, targetPersonId: string, targetDate: string, shouldCopy: boolean = false) => {\n    if (isProcessingUpdate) return;\n    \n    const previousData = [...staffingData];\n    setIsProcessingUpdate(true);\n    \n    try {\n      const sourceEntry = staffingData.find(e => e.id === entryId);\n      if (!sourceEntry) return;\n\n      const targetEmployee = employees.find(e => e.id === targetPersonId);\n\n      if (shouldCopy) {\n        // For copying, check if target person already has this project on target date\n        const existingEntry = staffingData.find(e => \n          e.person.id === targetPersonId && \n          e.date === targetDate && \n          e.project?.id === sourceEntry.project?.id\n        );\n\n        if (existingEntry) {\n          toast({\n            title: \"Prosjekt finnes allerede\",\n            description: `${targetEmployee ? getPersonDisplayName(targetEmployee.fornavn, targetEmployee.etternavn) : 'Ansatt'} har allerede ${sourceEntry.project?.project_name} på ${new Date(targetDate).toLocaleDateString('no-NO')}`,\n            variant: \"destructive\"\n          });\n          setIsProcessingUpdate(false);\n          return;\n        }\n        \n        // Optimistically add copied entry to target\n        const copiedEntry: StaffingEntry = {\n          ...sourceEntry,\n          id: `temp-${Date.now()}`,\n          person: targetEmployee || sourceEntry.person,\n          date: targetDate,\n          activities: sourceEntry.activities.map(a => ({ \n            ...a, \n            id: `temp-${Date.now()}-${Math.random()}` \n          }))\n        };\n        \n        updateStaffingDataOptimistically(data => [...data, copiedEntry]);\n\n        // Create new vakt for target person/date\n        const { error: vaktError } = await supabase\n          .from('vakt')\n          .insert({\n            person_id: targetPersonId,\n            project_id: sourceEntry.project?.id,\n            dato: targetDate,\n            org_id: profile?.org_id || ''\n          })\n          .select()\n          .single();\n\n        if (vaktError) throw vaktError;\n\n        // No timer copying - both move and copy create empty project assignments\n\n        toast({\n          title: \"Prosjekt kopiert\",\n          description: `${sourceEntry.project?.project_name} kopiert til ${targetEmployee ? getPersonDisplayName(targetEmployee.fornavn, targetEmployee.etternavn) : 'ukjent ansatt'} på ${new Date(targetDate).toLocaleDateString('no-NO')}`\n        });\n\n        revalidateInBackground();\n        return;\n      }\n\n      // For moving, check if target person already has this project on target date\n      // (but exclude the source entry itself if it's the same person)\n      const existingEntry = staffingData.find(e => \n        e.person.id === targetPersonId && \n        e.date === targetDate && \n        e.project?.id === sourceEntry.project?.id &&\n        e.id !== entryId // Exclude the source entry itself\n      );\n\n      if (existingEntry) {\n        toast({\n          title: \"Prosjekt finnes allerede\",\n          description: `${targetEmployee ? getPersonDisplayName(targetEmployee.fornavn, targetEmployee.etternavn) : 'Ansatt'} har allerede ${sourceEntry.project?.project_name} på ${new Date(targetDate).toLocaleDateString('no-NO')}`,\n          variant: \"destructive\"\n        });\n        setIsProcessingUpdate(false);\n        return;\n      }\n\n      // Optimistically move the entry\n      updateStaffingDataOptimistically(data => {\n        return data.map(entry => \n          entry.id === entryId \n            ? { ...entry, person: targetEmployee || entry.person, date: targetDate }\n            : entry\n        );\n      });\n\n      // Create new vakt for target person/date\n      const { error: vaktError } = await supabase\n        .from('vakt')\n        .insert({\n          person_id: targetPersonId,\n          project_id: sourceEntry.project?.id || null,\n          dato: targetDate,\n          org_id: profile?.org_id || ''\n        })\n        .select()\n        .single();\n\n      if (vaktError) throw vaktError;\n\n      // No timer copying - both move and copy create empty project assignments\n\n      // If moving (not copying), only remove original if it has no timer entries\n      // This prevents losing existing time entries\n      if (!shouldCopy && sourceEntry.id.indexOf('empty-') !== 0 && sourceEntry.activities.length === 0) {\n        // Only delete original vakt if it has no timer entries\n        await supabase\n          .from('vakt')\n          .delete()\n          .eq('id', sourceEntry.id);\n      }\n\n      const action = shouldCopy ? \"kopiert til\" : \"flyttet til\";\n      const timerNote = (!shouldCopy && sourceEntry.activities.length > 0) ? \" (kopiert for å bevare timer)\" : \" (tom tilordning)\";\n      \n      toast({\n        title: `Prosjekt ${action}`,\n        description: `${sourceEntry.project?.project_name} ${action} ${targetEmployee ? getPersonDisplayName(targetEmployee.fornavn, targetEmployee.etternavn) : 'ukjent ansatt'} på ${new Date(targetDate).toLocaleDateString('no-NO')}${timerNote}`\n      });\n\n      revalidateInBackground();\n    } catch (error: unknown) {\n      rollbackUpdate(previousData, error instanceof Error ? error.message : 'En ukjent feil oppstod');\n    } finally {\n      setIsProcessingUpdate(false);\n    }\n  };\n\n  // Free lines CRUD functions\n  const addFreeLine = useCallback(async (weekNumber?: number, year?: number) => {\n    if (!profile?.org_id) return;\n\n    try {\n      // Use provided week/year or default to first week being displayed\n      const targetWeek = weekNumber || multiWeekData[0]?.week || startWeek;\n      const targetYear = year || multiWeekData[0]?.year || startYear;\n      \n      // Get the next display order for this specific week\n      const weekFreeLines = freeLines.filter(line => \n        line.week_number === targetWeek && line.year === targetYear\n      );\n      const maxOrder = weekFreeLines.length > 0 ? Math.max(...weekFreeLines.map(line => line.display_order)) : 0;\n      \n      const { error } = await supabase\n        .from('frie_linjer')\n        .insert({\n          org_id: profile.org_id,\n          week_number: targetWeek,\n          year: targetYear,\n          display_order: maxOrder + 1\n        });\n\n      if (error) throw error;\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Frie linje lagt til\",\n        description: \"En ny frie linje er opprettet.\",\n      });\n    } catch (error) {\n      console.error('Error adding free line:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke legge til frie linje.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, multiWeekData, startWeek, startYear, freeLines, loadFreeLines, toast]);\n\n  const addFreeBubble = useCallback(async (lineId: string, date: string) => {\n    if (!profile?.org_id) return;\n\n    try {\n      // Get the next display order for this line\n      const line = freeLines.find(l => l.id === lineId);\n      const maxOrder = line?.frie_bobler?.length ? Math.max(...line.frie_bobler.map(bubble => bubble.display_order)) : 0;\n      \n      const { error } = await supabase\n        .from('frie_bobler')\n        .insert({\n          frie_linje_id: lineId,\n          date: date,\n          text: 'Ny boble',\n          color: '#94a3b8', // Default gray color\n          display_order: maxOrder + 1\n        });\n\n      if (error) throw error;\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Boble lagt til\",\n        description: \"En ny boble er opprettet.\",\n      });\n    } catch (error) {\n      console.error('Error adding free bubble:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke legge til boble.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, freeLines, loadFreeLines, toast]);\n\n  const editFreeBubble = useCallback(async (bubbleId: string, text: string, color: string) => {\n    if (!profile?.org_id) return;\n\n    try {\n      // First, update the specific bubble\n      const { error } = await supabase\n        .from('frie_bobler')\n        .update({\n          text: text,\n          color: color\n        })\n        .eq('id', bubbleId);\n\n      if (error) throw error;\n\n      // Then, update all other bubbles with the same text to have the same color\n      const { error: updateSameTextError } = await supabase\n        .from('frie_bobler')\n        .update({\n          color: color\n        })\n        .eq('text', text)\n        .neq('id', bubbleId); // Don't update the bubble we just updated\n\n      if (updateSameTextError) {\n        console.error('Error updating same text bubbles:', updateSameTextError);\n        // Don't throw error here, as the main update succeeded\n      }\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Boble oppdatert\",\n        description: `Boblen er oppdatert. Alle bobler med navnet \"${text}\" har fått samme farge.`,\n      });\n    } catch (error) {\n      console.error('Error updating free bubble:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke oppdatere boble.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, loadFreeLines, toast]);\n\n  const deleteFreeBubble = useCallback(async (bubbleId: string) => {\n    if (!profile?.org_id) return;\n\n    try {\n      const { error } = await supabase\n        .from('frie_bobler')\n        .delete()\n        .eq('id', bubbleId);\n\n      if (error) throw error;\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Boble slettet\",\n        description: \"Boblen er slettet.\",\n      });\n    } catch (error) {\n      console.error('Error deleting free bubble:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke slette boble.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, loadFreeLines, toast]);\n\n  const deleteFreeLine = useCallback(async (lineId: string) => {\n    if (!profile?.org_id) return;\n\n    try {\n      // Delete all bubbles in this line first\n      const { error: deleteBubblesError } = await supabase\n        .from('frie_bobler')\n        .delete()\n        .eq('frie_linje_id', lineId);\n\n      if (deleteBubblesError) throw deleteBubblesError;\n\n      // Delete the line\n      const { error: deleteLineError } = await supabase\n        .from('frie_linjer')\n        .delete()\n        .eq('id', lineId);\n\n      if (deleteLineError) throw deleteLineError;\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Linje slettet\",\n        description: \"Hele linjen er slettet.\",\n      });\n    } catch (error) {\n      console.error('Error deleting free line:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke slette linje.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, loadFreeLines, toast]);\n\n  const copyFreeBubble = useCallback(async (bubbleId: string, targetDate: string, targetLineId: string) => {\n    if (!profile?.org_id) return;\n\n    try {\n      // Get the original bubble\n      const { data: originalBubble, error: fetchError } = await supabase\n        .from('frie_bobler')\n        .select('*')\n        .eq('id', bubbleId)\n        .single();\n\n      if (fetchError) throw fetchError;\n\n      // Find the specific target line directly\n      const targetLine = freeLines.find(line => line.id === targetLineId);\n\n      if (!targetLine) {\n        throw new Error(`Target line with ID ${targetLineId} not found`);\n      }\n\n      // Create a copy\n      const { error: insertError } = await supabase\n        .from('frie_bobler')\n        .insert({\n          frie_linje_id: targetLine.id,\n          date: targetDate,\n          text: originalBubble.text,\n          color: originalBubble.color,\n          display_order: (targetLine.frie_bobler?.length || 0) + 1\n        })\n        .select()\n        .single();\n\n      if (insertError) throw insertError;\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Boble kopiert\",\n        description: \"Boblen er kopiert til ny dato.\",\n      });\n    } catch (error) {\n      console.error('Error copying free bubble:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke kopiere boble.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, freeLines, loadFreeLines, toast]);\n\n  const moveFreeBubble = useCallback(async (bubbleId: string, sourceLineId: string, targetDate: string) => {\n    if (!profile?.org_id) return;\n\n    try {\n      // Find the target line for the target date - if none exists, find any line for the same week\n      let targetLine = freeLines.find(line => \n        line.frie_bobler?.some(bubble => bubble.date === targetDate)\n      );\n\n      // If no line exists for this date, find the first line for the same week\n      if (!targetLine) {\n        // Extract week and year from targetDate\n        const targetDateObj = new Date(targetDate);\n        const targetWeek = getWeekNumber(targetDateObj);\n        const targetYear = targetDateObj.getFullYear();\n        \n        targetLine = freeLines.find(line => \n          line.week_number === targetWeek && line.year === targetYear\n        );\n      }\n\n      // If still no line exists, create a new one for this week\n      if (!targetLine) {\n        const targetDateObj = new Date(targetDate);\n        const targetWeek = getWeekNumber(targetDateObj);\n        const targetYear = targetDateObj.getFullYear();\n        \n        const { data: newLine, error: lineError } = await supabase\n          .from('frie_linjer')\n          .insert({\n            org_id: profile.org_id,\n            week_number: targetWeek,\n            year: targetYear,\n            display_order: 1\n          })\n          .select()\n          .single();\n\n        if (lineError) throw lineError;\n        targetLine = newLine;\n      }\n\n      // Update the bubble's date and line\n      const { error } = await supabase\n        .from('frie_bobler')\n        .update({\n          frie_linje_id: targetLine.id,\n          date: targetDate,\n          display_order: (targetLine.frie_bobler?.length || 0) + 1\n        })\n        .eq('id', bubbleId);\n\n      if (error) throw error;\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Boble flyttet\",\n        description: \"Boblen er flyttet til ny dato.\",\n      });\n    } catch (error) {\n      console.error('Error moving free bubble:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke flytte boble.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, freeLines, loadFreeLines, toast]);\n\n  const updateLineName = useCallback(async (lineId: string, newName: string) => {\n    if (!profile?.org_id) return;\n\n    try {\n      const { error } = await supabase\n        .from('frie_linjer')\n        .update({\n          name: newName\n        })\n        .eq('id', lineId);\n\n      if (error) throw error;\n      \n      // Reload free lines\n      await loadFreeLines();\n      \n      toast({\n        title: \"Linje-navn oppdatert\",\n        description: `Linjen er nå kalt \"${newName}\".`,\n      });\n    } catch (error) {\n      console.error('Error updating line name:', error);\n      toast({\n        title: \"Feil\",\n        description: \"Kunne ikke oppdatere linje-navn.\",\n        variant: \"destructive\"\n      });\n    }\n  }, [profile?.org_id, loadFreeLines, toast]);\n\n  const sendToTripletex = async (entry: StaffingEntry) => {\n    if (!entry.project?.tripletex_project_id) {\n      toast({\n        title: \"Kan ikke sende til Tripletex\",\n        description: \"Prosjektet mangler Tripletex ID\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (!entry.person.tripletex_employee_id) {\n      toast({\n        title: \"Mangler Tripletex-ansatt\",\n        description: \"Den ansatte er ikke koblet til Tripletex. Kjør ansattsynk først.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Check if there are any activities to send\n    if (entry.activities.length === 0) {\n      toast({\n        title: \"Ingen timer å sende\",\n        description: \"Det finnes ingen timer for dette prosjektet\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Check if all activities are approved\n    const unapprovedActivities = entry.activities.filter(a => a.status !== 'godkjent');\n    if (unapprovedActivities.length > 0) {\n      toast({\n        title: \"Timer ikke godkjent\",\n        description: \"Alle timer må være godkjent før sending til Tripletex\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setSendingToTripletex(prev => new Set(prev).add(entry.id));\n\n    try {\n      // Send all activities for this entry in parallel (much faster!)\n      const activityPromises = entry.activities.map(async (activity) => {\n        const { data, error } = await supabase.functions.invoke('tripletex-api', {\n          body: {\n            action: 'send_timesheet_entry',\n            vakt_timer_id: activity.id,\n            employee_id: entry.person.tripletex_employee_id,\n            project_id: entry.project.tripletex_project_id,\n            activity_id: activity.ttx_activity_id || null,\n            hours: activity.timer,\n            date: entry.date,\n            is_overtime: !!activity.is_overtime,\n            description: activity.notat || '',\n            orgId: profile?.org_id || ''\n          }\n        });\n\n        if (error) {\n          throw new Error(error instanceof Error ? error.message : 'Failed to send to Tripletex');\n        }\n\n        if (!data?.success) {\n          throw new Error(data?.error || 'Failed to send to Tripletex');\n        }\n\n        return data;\n      });\n\n      // Wait for all activities to be sent\n      await Promise.all(activityPromises);\n\n      // Calculate total hours sent\n      const totalHours = entry.activities.reduce((sum, activity) => sum + activity.timer, 0);\n      \n      toast({\n        title: \"Timer sendt til Tripletex\",\n        description: `${formatTimeValue(totalHours)} timer (${entry.activities.length} ${entry.activities.length === 1 ? 'aktivitet' : 'aktiviteter'}) sendt for ${entry.project.project_name}`\n      });\n\n      revalidateInBackground(); // Refresh to show updated sync status\n    } catch (error: unknown) {\n      console.error('Error sending to Tripletex:', error);\n      toast({\n        title: \"Feil ved sending til Tripletex\",\n        description: error instanceof Error ? error.message : \"Ukjent feil oppstod\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setSendingToTripletex(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(entry.id);\n        return newSet;\n      });\n    }\n  };\n\n  const verifyTripletexStatus = async (entry: StaffingEntry) => {\n    try {\n      let verifiedActivities = 0;\n      let notFoundActivities = 0;\n      let verifiedHours = 0;\n      let notFoundHours = 0;\n\n      for (const activity of entry.activities) {\n        if (activity.tripletex_entry_id) {\n          const { data, error } = await supabase.functions.invoke('tripletex-api', {\n            body: {\n              action: 'verify-timesheet-entry',\n              tripletexEntryId: activity.tripletex_entry_id,\n              orgId: profile?.org_id\n            }\n          });\n\n          if (error) {\n            console.error('Error verifying timesheet entry:', error);\n            continue;\n          }\n\n          if (data?.data?.exists) {\n            verifiedActivities++;\n            verifiedHours += activity.timer || 0;\n          } else {\n            notFoundActivities++;\n            notFoundHours += activity.timer || 0;\n          }\n        }\n      }\n\n      if (verifiedActivities > 0 && notFoundActivities === 0) {\n        toast({\n          title: \"Bekreftet i Tripletex\",\n          description: `${verifiedHours} timer (${verifiedActivities} aktiviteter) er synkronisert med Tripletex`\n        });\n      } else if (notFoundActivities > 0) {\n        toast({\n          title: \"Timer ikke funnet i Tripletex\",\n          description: `${verifiedHours} timer bekreftet, ${notFoundHours} timer ikke funnet`,\n          variant: \"destructive\"\n        });\n      } else {\n        toast({\n          title: \"Ingen timer å sjekke\",\n          description: \"Ingen timer er sendt til Tripletex ennå\"\n        });\n      }\n    } catch (error: unknown) {\n      toast({\n        title: \"Sjekk feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const recallFromTripletex = async (entry: StaffingEntry) => {\n    try {\n      // Recall all activities for this entry in parallel (much faster!)\n      const activitiesToRecall = entry.activities.filter(activity => activity.tripletex_entry_id);\n      \n      if (activitiesToRecall.length === 0) {\n        return; // Nothing to recall\n      }\n\n      const recallPromises = activitiesToRecall.map(async (activity) => {\n        const { data, error } = await supabase.functions.invoke('tripletex-api', {\n          body: {\n            action: 'delete_timesheet_entry',\n            tripletex_entry_id: activity.tripletex_entry_id,\n            vakt_timer_id: activity.id,\n            orgId: profile?.org_id || ''\n          }\n        });\n\n        if (error) {\n          throw new Error(error instanceof Error ? error.message : 'Failed to recall from Tripletex');\n        }\n\n        if (!data?.success) {\n          throw new Error(data?.error || 'Failed to recall from Tripletex');\n        }\n\n        return data;\n      });\n\n      // Wait for all activities to be recalled\n      await Promise.all(recallPromises);\n\n      // Optimistically update UI immediately\n      updateStaffingDataOptimistically(prevData => {\n        const mapped = prevData.map(e => \n          e.id === entry.id \n            ? {\n                ...e,\n                activities: e.activities.map(a => ({\n                  ...a,\n                  tripletex_synced_at: null,\n                  tripletex_entry_id: null,\n                  sync_error: null,\n                  status: 'utkast'\n                }))\n              }\n            : e\n        );\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return mapped as any;\n      });\n\n      // Calculate total hours recalled\n      const totalHours = entry.activities.reduce((sum, activity) => sum + activity.timer, 0);\n      \n      toast({\n        title: \"Timer kalt tilbake fra Tripletex\",\n        description: `${formatTimeValue(totalHours)} timer (${entry.activities.length} ${entry.activities.length === 1 ? 'aktivitet' : 'aktiviteter'}) er nå tilbake til utkast-status og kan redigeres`\n      });\n\n      revalidateInBackground();\n    } catch (error: unknown) {\n      toast({\n        title: \"Tilbakekalling feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const unapproveSelectedEntries = async () => {\n    try {\n      const entryIds = Array.from(selectedEntries);\n      const timerIds = staffingData\n        .filter(e => entryIds.includes(e.id))\n        .flatMap(e => e.activities.map(a => a.id));\n\n      const { data, error } = await supabase.functions.invoke('tripletex-api', {\n        body: {\n          action: 'unapprove_timesheet_entries', \n          entry_ids: timerIds,\n          orgId: profile?.org_id || ''\n        }\n      });\n\n      if (error) {\n        throw new Error(error instanceof Error ? error.message : 'Failed to unapprove entries');\n      }\n\n      if (!data?.success) {\n        throw new Error(data?.error || 'Failed to unapprove entries');\n      }\n\n      toast({\n        title: \"Godkjenning trukket tilbake\",\n        description: `${entryIds.length} oppføringer satt tilbake til utkast`\n      });\n\n      setSelectedEntries(new Set());\n      revalidateInBackground();\n    } catch (error: unknown) {\n      toast({\n        title: \"Tilbaketrekking feilet\", \n        description: error instanceof Error ? error.message : \"Ukjent feil oppstod\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const approveSelectedEntries = async () => {\n    try {\n      const entryIds = Array.from(selectedEntries);\n      const timerIds = staffingData\n        .filter(e => entryIds.includes(e.id))\n        .flatMap(e => e.activities.map(a => a.id));\n\n      if (timerIds.length === 0) {\n        toast({\n          title: \"Ingen timer å godkjenne\",\n          description: `Velg timer som skal godkjennes. Valgte oppføringer: ${entryIds.length}, Timer funnet: ${timerIds.length}`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const { error } = await supabase\n        .from('vakt_timer')\n        .update({ \n          status: 'godkjent',\n          approved_at: toLocalDateTimeString(new Date()),\n          approved_by: user?.id\n        })\n        .in('id', timerIds);\n\n      if (error) throw error;\n\n      toast({\n        title: \"Timer godkjent\",\n        description: `${entryIds.length} oppføringer godkjent og klar for sending til Tripletex`\n      });\n\n      setSelectedEntries(new Set());\n      revalidateInBackground();\n    } catch (error: unknown) {\n      toast({\n        title: \"Godkjenning feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const approveAllEntriesForWeek = async (weekNumber: number, year: number) => {\n    try {\n      // Get dates for the specific week\n      const weekData = multiWeekData.find(w => w.week === weekNumber && w.year === year);\n      if (!weekData?.dates) {\n        toast({\n          title: \"Uke ikke funnet\",\n          description: `Kunne ikke finne data for uke ${weekNumber}, ${year}`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const weekDateKeys = weekData.dates.map(toDateKey).filter(Boolean);\n      \n      // Debug: Log all entries for this week\n      const weekEntries = staffingData.filter(entry => weekDateKeys.includes(entry.date));\n      console.log(`Week ${weekNumber} entries:`, weekEntries.map(e => ({\n        id: e.id,\n        date: e.date,\n        person: e.person?.fornavn + ' ' + e.person?.etternavn,\n        activities: e.activities.map(a => ({ id: a.id, status: a.status, timer: a.timer }))\n      })));\n      \n      // Debug: Show specific statuses for entries with activities\n      const entriesWithActivities = weekEntries.filter(e => e.activities.length > 0);\n      console.log(`Entries with activities:`, entriesWithActivities.map(e => ({\n        person: e.person?.fornavn + ' ' + e.person?.etternavn,\n        activities: e.activities.map(a => ({ status: a.status, timer: a.timer }))\n      })));\n      \n      // Debug: Show detailed status analysis\n      entriesWithActivities.forEach(entry => {\n        entry.activities.forEach(activity => {\n          console.log(`${entry.person?.fornavn}: status=\"${activity.status}\", timer=${activity.timer}, willApprove=${activity.status !== 'godkjent' && activity.status !== 'sendt'}`);\n        });\n      });\n      \n      // Find all entries that need approval for this specific week\n      // TEMPORARY: Include ALL entries with activities, regardless of status\n      const entriesToApprove = staffingData.filter(entry => \n        weekDateKeys.includes(entry.date) &&\n        entry.activities.length > 0\n      );\n      \n      console.log(`Entries to approve for week ${weekNumber}:`, entriesToApprove.map(e => ({\n        id: e.id,\n        date: e.date,\n        person: e.person?.fornavn + ' ' + e.person?.etternavn,\n        activities: e.activities.map(a => ({ id: a.id, status: a.status, timer: a.timer }))\n      })));\n      \n      // Debug: Show exactly what gets filtered\n      console.log(`Filter logic debug:`);\n      console.log(`Week date keys:`, weekDateKeys);\n      console.log(`Total staffing data entries:`, staffingData.length);\n      console.log(`Entries in week:`, weekEntries.length);\n      console.log(`Entries with activities:`, entriesWithActivities.length);\n      console.log(`Final entries to approve:`, entriesToApprove.length);\n\n      if (entriesToApprove.length === 0) {\n        // Debug: Show what entries exist but weren't selected for approval\n        const allWeekEntries = staffingData.filter(entry => weekDateKeys.includes(entry.date));\n        const debugInfo = allWeekEntries.map(e => `${e.person?.fornavn} ${e.person?.etternavn}: ${e.activities.map(a => a.status).join(', ')}`).join('; ');\n        \n        toast({\n          title: \"Ingen timer å godkjenne\",\n          description: `Alle timer for uke ${weekNumber} er allerede godkjent eller sendt. Debug: ${debugInfo}`,\n        });\n        return;\n      }\n\n      // TEMPORARY: Include ALL timer IDs from all activities\n      const timerIds = entriesToApprove.flatMap(entry => \n        entry.activities.map(activity => activity.id)\n      );\n\n      const { error } = await supabase\n        .from('vakt_timer')\n        .update({ \n          status: 'godkjent',\n          approved_at: toLocalDateTimeString(new Date()),\n          approved_by: user?.id\n        })\n        .in('id', timerIds);\n\n      if (error) throw error;\n\n      toast({\n        title: \"Alle timer godkjent\",\n        description: `${entriesToApprove.length} oppføringer for uke ${weekNumber} godkjent og klar for sending til Tripletex`\n      });\n\n      setSelectedEntries(new Set());\n      revalidateInBackground();\n    } catch (error: unknown) {\n      toast({\n        title: \"Godkjenning feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const unapproveAllEntriesForWeek = async (weekNumber: number, year: number) => {\n    try {\n      // Get dates for the specific week\n      const weekData = multiWeekData.find(w => w.week === weekNumber && w.year === year);\n      if (!weekData?.dates) {\n        toast({\n          title: \"Uke ikke funnet\",\n          description: `Kunne ikke finne data for uke ${weekNumber}, ${year}`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const weekDateKeys = weekData.dates.map(toDateKey).filter(Boolean);\n      \n      // Find all approved entries for this specific week\n      const approvedEntries = staffingData.filter(entry => \n        weekDateKeys.includes(entry.date) &&\n        entry.activities.some(activity => activity.status === 'godkjent')\n      );\n\n      if (approvedEntries.length === 0) {\n        toast({\n          title: \"Ingen godkjenninger å trekke tilbake\",\n          description: `Alle timer for uke ${weekNumber} er allerede i utkast-status eller sendt`,\n        });\n        return;\n      }\n\n      const timerIds = approvedEntries.flatMap(entry => \n        entry.activities\n          .filter(activity => activity.status === 'godkjent')\n          .map(activity => activity.id)\n      );\n\n      const { data, error } = await supabase.functions.invoke('tripletex-api', {\n        body: {\n          action: 'unapprove_timesheet_entries', \n          entry_ids: timerIds,\n          orgId: profile?.org_id\n        }\n      });\n\n      if (error) {\n        throw new Error(error instanceof Error ? error.message : 'Failed to unapprove entries');\n      }\n\n      if (!data?.success) {\n        throw new Error(data?.error || 'Failed to unapprove entries');\n      }\n\n      toast({\n        title: \"Alle godkjenninger trukket tilbake\",\n        description: `${approvedEntries.length} oppføringer for uke ${weekNumber} satt tilbake til utkast`\n      });\n\n      setSelectedEntries(new Set());\n      revalidateInBackground();\n    } catch (error: unknown) {\n      toast({\n        title: \"Tilbaketrekking feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const sendAllToTripletexForWeek = async (weekNumber: number, year: number) => {\n    try {\n      // Get dates for the specific week\n      const weekData = multiWeekData.find(w => w.week === weekNumber && w.year === year);\n      if (!weekData?.dates) {\n        toast({\n          title: \"Uke ikke funnet\",\n          description: `Kunne ikke finne data for uke ${weekNumber}, ${year}`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const weekDateKeys = weekData.dates.map(toDateKey).filter(Boolean);\n      \n      // Find all approved entries that haven't been sent yet\n      const entriesToSend = staffingData.filter(entry => \n        weekDateKeys.includes(entry.date) &&\n        entry.activities.length > 0 &&\n        entry.activities.every(a => a.status === 'godkjent') &&\n        !entry.activities.some(a => a.tripletex_synced_at)\n      );\n\n      if (entriesToSend.length === 0) {\n        toast({\n          title: \"Ingen timer å sende\",\n          description: `Alle godkjente timer for uke ${weekNumber} er allerede sendt til Tripletex`,\n        });\n        return;\n      }\n\n      // Show loading overlay\n      setLoadingOverlay({\n        isVisible: true,\n        message: 'Sender timer til Tripletex...',\n        count: entriesToSend.length\n      });\n\n      // Send all entries to Tripletex in parallel (much faster!)\n      const sendPromises = entriesToSend.map(async (entry) => {\n        try {\n          await sendToTripletex(entry);\n          return { success: true, hours: entry.activities.reduce((sum, a) => sum + a.timer, 0) };\n        } catch (error) {\n          console.error(`Failed to send entry ${entry.id}:`, error);\n          return { success: false, hours: 0 };\n        }\n      });\n\n      const results = await Promise.all(sendPromises);\n      \n      let successCount = results.filter(r => r.success).length;\n      let failCount = results.filter(r => !r.success).length;\n      let totalHours = results.reduce((sum, r) => sum + r.hours, 0);\n\n      if (successCount > 0) {\n        toast({\n          title: \"Timer sendt til Tripletex\",\n          description: `${formatTimeValue(totalHours)} timer fra ${successCount} prosjekt${successCount === 1 ? '' : 'er'} sendt til Tripletex${failCount > 0 ? ` (${failCount} feilet)` : ''}`\n        });\n      }\n\n      if (failCount > 0 && successCount === 0) {\n        toast({\n          title: \"Sending feilet\",\n          description: `Kunne ikke sende timer for uke ${weekNumber}`,\n          variant: \"destructive\"\n        });\n      }\n\n      // Hide loading overlay\n      setLoadingOverlay({ isVisible: false, message: '' });\n      revalidateInBackground();\n    } catch (error: unknown) {\n      // Hide loading overlay on error\n      setLoadingOverlay({ isVisible: false, message: '' });\n      toast({\n        title: \"Sending feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const recallAllFromTripletexForWeek = async (weekNumber: number, year: number) => {\n    try {\n      // Get dates for the specific week\n      const weekData = multiWeekData.find(w => w.week === weekNumber && w.year === year);\n      if (!weekData?.dates) {\n        toast({\n          title: \"Uke ikke funnet\",\n          description: `Kunne ikke finne data for uke ${weekNumber}, ${year}`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const weekDateKeys = weekData.dates.map(toDateKey).filter(Boolean);\n      \n      // Find all entries that have been sent to Tripletex\n      const entriesToRecall = staffingData.filter(entry => \n        weekDateKeys.includes(entry.date) &&\n        entry.activities.some(a => a.tripletex_synced_at)\n      );\n\n      if (entriesToRecall.length === 0) {\n        toast({\n          title: \"Ingen timer å tilbakekalle\",\n          description: `Ingen timer for uke ${weekNumber} er sendt til Tripletex`,\n        });\n        return;\n      }\n\n      // Show loading overlay\n      setLoadingOverlay({\n        isVisible: true,\n        message: 'Tilbakekaller timer fra Tripletex...',\n        count: entriesToRecall.length\n      });\n\n      // Recall all entries from Tripletex in parallel (much faster!)\n      const recallPromises = entriesToRecall.map(async (entry) => {\n        try {\n          await recallFromTripletex(entry);\n          return { success: true, hours: entry.activities.reduce((sum, a) => sum + a.timer, 0) };\n        } catch (error) {\n          console.error(`Failed to recall entry ${entry.id}:`, error);\n          return { success: false, hours: 0 };\n        }\n      });\n\n      const results = await Promise.all(recallPromises);\n      \n      let successCount = results.filter(r => r.success).length;\n      let failCount = results.filter(r => !r.success).length;\n      let totalHours = results.reduce((sum, r) => sum + r.hours, 0);\n\n      if (successCount > 0) {\n        toast({\n          title: \"Timer tilbakekalt fra Tripletex\",\n          description: `${formatTimeValue(totalHours)} timer fra ${successCount} prosjekt${successCount === 1 ? '' : 'er'} tilbakekalt${failCount > 0 ? ` (${failCount} feilet)` : ''}`\n        });\n      }\n\n      if (failCount > 0 && successCount === 0) {\n        toast({\n          title: \"Tilbakekalling feilet\",\n          description: `Kunne ikke tilbakekalle timer for uke ${weekNumber}`,\n          variant: \"destructive\"\n        });\n      }\n\n      // Hide loading overlay\n      setLoadingOverlay({ isVisible: false, message: '' });\n      revalidateInBackground();\n    } catch (error: unknown) {\n      // Hide loading overlay on error\n      setLoadingOverlay({ isVisible: false, message: '' });\n      toast({\n        title: \"Tilbakekalling feilet\",\n        description: error instanceof Error ? error.message : 'En ukjent feil oppstod',\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center\">Laster bemanningsdata...</div>\n      </div>\n    );\n  }\n\n  if (!profile && initialized) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Profil mangler</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-muted-foreground\">\n              Du må opprette en organisasjon og profil før du kan bruke bemanningslisten.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {/* Loading Overlay */}\n      {loadingOverlay.isVisible && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-8 shadow-xl text-center max-w-sm mx-4\">\n            <div className=\"mb-4\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              {loadingOverlay.message}\n            </h3>\n            {loadingOverlay.count && (\n              <p className=\"text-sm text-gray-600\">\n                Behandler {loadingOverlay.count} prosjekt{loadingOverlay.count === 1 ? '' : 'er'}...\n              </p>\n            )}\n          </div>\n        </div>\n      )}\n\n      <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Bemanningsliste</h1>\n          <p className=\"text-muted-foreground\">\n            {profile?.org?.name} - Uker {safeStartWeek}-{safeLastWeek.week}, {safeStartYear}\n          </p>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <Dialog>\n            <DialogTrigger asChild>\n              <Button variant=\"outline\" size=\"sm\" className=\"h-9 w-9 p-0\">\n                <HelpCircle className=\"h-4 w-4\" />\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-md\">\n              <DialogHeader>\n                <DialogTitle>Hjelp og tips</DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-3 text-sm\">\n                <div>\n                  <h4 className=\"font-medium mb-2\">Drag & Drop:</h4>\n                  <ul className=\"space-y-1 text-muted-foreground\">\n                    <li>• Dra prosjekter mellom ansatte</li>\n                    <li>• Prosjekter med timer kopieres (bevarer original)</li>\n                    <li>• Tomme prosjekter flyttes</li>\n                    <li>• Hold Shift/Option for å alltid kopiere</li>\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-2\">Prosjektstyring:</h4>\n                  <ul className=\"space-y-1 text-muted-foreground\">\n                    <li>• Prosjekter sorteres etter nummer</li>\n                    <li>• Klikk på prosjekt for å endre farge</li>\n                    <li>• Klikk på prosjekt for å redigere timer</li>\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-2\">Godkjenning:</h4>\n                  <ul className=\"space-y-1 text-muted-foreground\">\n                    <li>• Velg timer og klikk &quot;Godkjenn&quot;</li>\n                    <li>• Godkjente timer kan sendes til Tripletex</li>\n                    <li>• Bruk &quot;Hent tilbake&quot; for å redigere</li>\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-2\">Status-ikoner:</h4>\n                  <ul className=\"space-y-1 text-muted-foreground text-xs\">\n                    <li>✓ Godkjent (grønn)</li>\n                    <li>→ Send til Tripletex (blå)</li>\n                    <li>🔄 Kall tilbake fra Tripletex (oransje)</li>\n                    <li>! Klar for godkjenning (oransje)</li>\n                    <li>✎ Utkast (grå)</li>\n                    <li>⚠ Feil ved synkronisering (rød)</li>\n                    <li>⚡ Overtid (gul)</li>\n                    <li>🗑️ Sletting blokkert for godkjente/sendte prosjekter</li>\n                  </ul>\n                </div>\n              </div>\n            </DialogContent>\n          </Dialog>\n       \n        </div>\n        \n      </div>\n\n      {/* Multi-week Excel-like table */}\n      <div className=\"space-y-8\">\n        {multiWeekData.length > 0 ? multiWeekData.map(weekData => {\n          const safeWeek = coerceWeekRef(weekData);\n          return (\n            <div key={`${safeWeek.year}-${safeWeek.week}`} className=\"border rounded-lg overflow-hidden bg-white shadow-sm\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full border-collapse\">\n                  <thead>\n                    <tr className=\"bg-slate-100\">\n                      <th className=\"border border-gray-300 p-2 text-left font-bold w-40 bg-slate-200\">\n                        <div className=\"flex flex-col gap-2\">\n                          <div>UKE {safeWeek.week}</div>\n                          <div className=\"flex flex-col gap-1\">\n                            <div className=\"flex gap-1\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"default\" \n                                className=\"bg-green-600 hover:bg-green-700 text-xs px-1.5 py-0.5 h-5\"\n                                onClick={() => approveAllEntriesForWeek(safeWeek.week, safeWeek.year)}\n                                title=\"Godkjenn alle timer for uken\"\n                              >\n                                <Check className=\"h-3 w-3 mr-0.5\" />\n                                Godkjenn\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\" \n                                className=\"border-orange-500 text-orange-600 hover:bg-orange-50 text-xs px-1.5 py-0.5 h-5\"\n                                onClick={() => unapproveAllEntriesForWeek(safeWeek.week, safeWeek.year)}\n                                title=\"Avgodkjenn alle timer for uken\"\n                              >\n                                <X className=\"h-3 w-3 mr-0.5\" />\n                                Avgodkjenn\n                              </Button>\n                            </div>\n                            <div className=\"flex gap-1\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"default\" \n                                className=\"bg-blue-600 hover:bg-blue-700 text-xs px-1.5 py-0.5 h-5\"\n                                onClick={() => sendAllToTripletexForWeek(safeWeek.week, safeWeek.year)}\n                                title=\"Send alle godkjente timer til Tripletex\"\n                              >\n                                <Send className=\"h-3 w-3 mr-0.5\" />\n                                Tripletex\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\" \n                                className=\"border-purple-500 text-purple-600 hover:bg-purple-50 text-xs px-1.5 py-0.5 h-5\"\n                                onClick={() => recallAllFromTripletexForWeek(safeWeek.week, safeWeek.year)}\n                                title=\"Tilbakekall alle sendte timer fra Tripletex\"\n                              >\n                                <RefreshCw className=\"h-3 w-3 mr-0.5\" />\n                                Tilbakekall\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n                      </th>\n                      {weekData.dates?.map((date, idx) => (\n                        <th key={toDateKey(date) || `${safeWeek.year}-${safeWeek.week}-${idx}`} className=\"border border-gray-300 p-2 text-center min-w-[140px] font-bold\">\n                         <div className=\"space-y-1\">\n                           <div className=\"text-xs uppercase font-semibold\">\n                             {isNaN(date.getTime()) ? '' : date.toLocaleDateString('no-NO', { weekday: 'long' })}\n                           </div>\n                           <div className=\"text-sm\">\n                             {isNaN(date.getTime()) ? '' : date.toLocaleDateString('no-NO', { day: '2-digit', month: '2-digit', year: 'numeric' })}\n                           </div>\n                         </div>\n                       </th>\n                     ))}\n                  </tr>\n                </thead>\n                <tbody>\n                    {employees.map((employee, employeeIndex) => {\n                       const employeeEntries = staffingData.filter(e => \n                         e.person.id === employee.id && \n                         weekData.dates?.some(d => toDateKey(d) === e.date)\n                       );\n                       \n                       // Calculate max projects per day for this employee to ensure consistent row height\n                       const maxProjectsPerDay = Math.max(1, ...weekData.dates?.map(date => {\n                         const dateStr = toDateKey(date);\n                         return employeeEntries.filter(e => e.date === dateStr && e.project).length;\n                       }) || [1]);\n                       \n                       const isEvenRow = employeeIndex % 2 === 0;\n                       \n                       return (\n                         <tr key={employee.id} className={`hover:bg-gray-50 ${isEvenRow ? 'bg-white' : 'bg-gray-25'}`}>\n                          <td className={`border border-gray-300 p-3 font-medium sticky left-0 ${isEvenRow ? 'bg-slate-50' : 'bg-slate-75'}`}>\n                            <div className=\"flex items-center gap-2\">\n                              <Checkbox\n                                checked={employeeEntries.every(e => selectedEntries.has(e.id))}\n                                onCheckedChange={(checked) => {\n                                  const newSelection = new Set(selectedEntries);\n                                  employeeEntries.forEach(e => {\n                                    if (checked) {\n                                      newSelection.add(e.id);\n                                    } else {\n                                      newSelection.delete(e.id);\n                                    }\n                                  });\n                                  setSelectedEntries(newSelection);\n                                }}\n                              />\n                              <span>\n                                {getPersonDisplayName(employee.fornavn, employee.etternavn)}\n                                {(() => {\n                                  // Calculate total hours for this employee this week\n                                  const weekDateKeys = weekData.dates?.map(toDateKey).filter(Boolean) || [];\n                                  const weekEntries = employeeEntries.filter(e => weekDateKeys.includes(e.date));\n                                  \n                                  let totalRegularHours = 0;\n                                  let totalOvertimeHours = 0;\n                                  \n                                  weekEntries.forEach(entry => {\n                                    entry.activities.forEach(activity => {\n                                      if (activity.is_overtime) {\n                                        totalOvertimeHours += activity.timer || 0;\n                                      } else {\n                                        totalRegularHours += activity.timer || 0;\n                                      }\n                                    });\n                                  });\n                                  \n                                  const hasHours = totalRegularHours > 0 || totalOvertimeHours > 0;\n                                  \n                                  if (!hasHours) return null;\n                                  \n                                  return (\n                                    <span className=\"text-xs text-gray-500 ml-2\">\n                                      {totalRegularHours > 0 && `${formatTimeValue(totalRegularHours)}t`}\n                                      {totalRegularHours > 0 && totalOvertimeHours > 0 && ' '}\n                                      {totalOvertimeHours > 0 && `+${formatTimeValue(totalOvertimeHours)}o`}\n                                    </span>\n                                  );\n                                })()}\n                              </span>\n                            </div>\n                          </td>\n                          {weekData.dates?.map((date, idx) => {\n                            const dateStr = toDateKey(date);\n                            const dayEntries = employeeEntries.filter(e => e.date === dateStr && e.project);\n                            const isWeekend = date.getDay() === 0 || date.getDay() === 6; // Sunday = 0, Saturday = 6\n                            const isHoliday = calendarDays[dateStr]?.isHoliday || false;\n                            const isFreeDay = isWeekend || isHoliday;\n                            \n                            return (\n                               <td \n                                 key={dateStr || `${employee.id}-${safeWeek.week}-${idx}`}\n                               className={`border border-gray-300 p-1 min-w-[140px] relative group ${isEvenRow ? 'bg-white' : 'bg-gray-25'}`}\n                               style={{\n                                 minHeight: `${Math.max(120, maxProjectsPerDay * 70 + 40)}px`,\n                                 verticalAlign: 'top'\n                               }}\n                              data-employee-id={employee.id}\n                              data-date={dateStr}\n                              onDragOver={(e) => {\n                                e.preventDefault();\n                                // Indicate copy vs move while dragging\n                                try {\n                                  const copyMod = e.shiftKey || e.altKey || e.metaKey || e.ctrlKey;\n                                  e.dataTransfer.dropEffect = copyMod ? 'copy' : 'move';\n                                } catch (error) {\n                                  // Ignore dataTransfer errors in some browsers\n                                  console.debug('DataTransfer error:', error);\n                                }\n                                e.currentTarget.classList.add('bg-blue-50', 'border-blue-300');\n                              }}\n                              onDragLeave={(e) => {\n                                e.currentTarget.classList.remove('bg-blue-50', 'border-blue-300');\n                              }}\n                              onDrop={(e) => {\n                                e.preventDefault();\n                                e.currentTarget.classList.remove('bg-blue-50', 'border-blue-300');\n                                \n                                const draggedEntryId = e.dataTransfer.getData('text/plain');\n                                const sourcePersonId = e.dataTransfer.getData('application/x-source-person-id');\n                                const sourceDate = e.dataTransfer.getData('application/x-source-date');\n                                \n                                if (draggedEntryId) {\n                                  const intendsCopy = e.shiftKey || e.ctrlKey || e.metaKey || e.altKey || e.dataTransfer.dropEffect === 'copy';\n                                  const isSamePerson = sourcePersonId === employee.id;\n                                  const isSameDate = sourceDate === dateStr;\n                                  \n                                  if (isSamePerson && isSameDate) {\n                                    // Same cell - do nothing\n                                    return;\n                                  }\n                                  \n                                  // Prevent multiple simultaneous operations\n                                  if (isProcessingUpdate) return;\n                                  \n                                  // Move or copy based on modifier key\n                                  moveEntryToEmployeeAndDate(draggedEntryId, employee.id, dateStr, intendsCopy);\n                                }\n                              }}\n                            >\n                              {isFreeDay && (\n                                <div className=\"absolute inset-0 bg-red-500/10 pointer-events-none rounded-sm\" />\n                              )}\n                              <div className=\"flex flex-col gap-1 items-start h-full\">\n                                {dayEntries\n                                  .sort((a, b) => {\n                                    const aNum = a.project?.project_number || 999999;\n                                    const bNum = b.project?.project_number || 999999;\n                                    return aNum - bNum;\n                                  })\n                                  .map((entry) => (\n                                  <div\n                                    key={entry.id}\n                                    className=\"w-full h-14 p-2 text-xs font-medium text-white cursor-move rounded shadow-sm relative hover:shadow-lg transition-shadow group/project truncate\"\n                                    style={{ \n                                      backgroundColor: getProjectColor(entry.project?.tripletex_project_id),\n                                      color: getContrastColor(getProjectColor(entry.project?.tripletex_project_id))\n                                    }}\n                                    draggable\n                                    onDragStart={(e) => {\n                                      e.dataTransfer.setData('text/plain', entry.id);\n                                      e.dataTransfer.setData('application/x-source-person-id', employee.id);\n                                      e.dataTransfer.setData('application/x-source-date', dateStr);\n                                      e.dataTransfer.effectAllowed = 'copyMove';\n                                      \n                                      // Add visual feedback to the dragged element\n                                      e.currentTarget.style.opacity = '0.5';\n                                    }}\n                                     onDragEnd={(e) => {\n                                       // Reset visual feedback\n                                       e.currentTarget.style.opacity = '1';\n                                     }}\n                                     onClick={(e) => {\n                                        e.stopPropagation();\n                                        const firstActivity = entry.activities[0];\n                                        // Allow editing even if no activities exist yet - administrators can fill in time entries\n                                        setEditDialog({ \n                                          vaktId: entry.id, \n                                          existingEntry: firstActivity || null \n                                        });\n                                      }}\n                                     title={`#${entry.project?.tripletex_project_id} - ${entry.project?.project_name}\\n${formatTimeValue(entry.totalHours)} timer\\nKlikk for å redigere timer\\nDra for å flytte/kopiere prosjekt\\nHold Shift/Option for å alltid kopiere`}\n                                  >\n                                    {/* Action icons overlay */}\n                                    <div className=\"absolute -top-1 -right-1 flex gap-1 opacity-0 group-hover/project:opacity-100 transition-opacity\">\n                                      {/* Only show delete button if not approved or actually sent to Tripletex */}\n                                      {!entry.activities.some(a => a.status === 'godkjent' || a.tripletex_synced_at) && (\n                                        <button\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            deleteEntry(entry.id);\n                                          }}\n                                          className=\"bg-red-500 hover:bg-red-600 text-white rounded-full p-1 shadow-md border border-white/20\"\n                                          title=\"Slett prosjekt\"\n                                        >\n                                          <X className=\"h-2 w-2\" />\n                                        </button>\n                                      )}\n                                      {/* Show approval indicator if there are activities and all are approved */}\n                                      {entry.activities.length > 0 && entry.activities.every(a => a.status === 'godkjent') && (\n                                        <div className=\"absolute -top-1 -right-1 bg-green-500 text-white rounded-full w-4 h-4 flex items-center justify-center\">\n                                          <Check className=\"h-2 w-2\" />\n                                        </div>\n                                      )}\n                                      {/* Only show send button if there are activities, all are approved, and not already sent */}\n                                      {entry.activities.length > 0 && entry.activities.every(a => a.status === 'godkjent') && !entry.activities.some(a => a.tripletex_synced_at) && (\n                                        <button\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            sendToTripletex(entry);\n                                          }}\n                                          className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-full p-1 shadow-md border border-white/20\"\n                                          title=\"Send til Tripletex\"\n                                          disabled={sendingToTripletex.has(entry.id)}\n                                        >\n                                          <Send className=\"h-2 w-2\" />\n                                        </button>\n                                      )}\n                                    </div>\n                                    \n                                    {/* Tripletex action buttons - positioned at bottom center, show on hover */}\n                                    {entry.activities.some(a => a.tripletex_synced_at) && (\n                                      <>\n                                        {/* Recall button */}\n                                        <button\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            recallFromTripletex(entry);\n                                          }}\n                                          className=\"bg-orange-500 hover:bg-orange-600 text-white rounded-full p-1 shadow-md border border-white/20 opacity-0 group-hover/project:opacity-100 transition-opacity absolute bottom-1 left-1/2 transform -translate-x-1/2\"\n                                          title=\"Kall tilbake fra Tripletex\"\n                                        >\n                                          <RefreshCw className=\"h-2 w-2\" />\n                                        </button>\n                                        {/* Verify button */}\n                                        <button\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            verifyTripletexStatus(entry);\n                                          }}\n                                          className=\"bg-purple-500 hover:bg-purple-600 text-white rounded-full p-1 shadow-md border border-white/20 opacity-0 group-hover/project:opacity-100 transition-opacity absolute bottom-1 left-1/2 transform translate-x-4\"\n                                          title=\"Sjekk Tripletex-status\"\n                                        >\n                                          <Check className=\"h-2 w-2\" />\n                                        </button>\n                                      </>\n                                    )}\n                                    \n                                    {/* Color palette button - positioned at bottom right */}\n                                    {entry.project && (\n                                      <button\n                                        onClick={(e) => handleProjectColorClick(entry.project!, e)}\n                                        className=\"absolute bottom-1 right-1 bg-white rounded-full p-1 shadow-md border opacity-0 group-hover/project:opacity-100 transition-opacity\"\n                                        title=\"Endre farge\"\n                                      >\n                                        <Palette className=\"h-2 w-2 text-gray-600\" />\n                                      </button>\n                                    )}\n                                     <div className=\"space-y-1\">\n                                       {/* Project name */}\n                                       <div className=\"text-sm font-semibold leading-tight\">\n                                         <span className=\"block max-w-[200px] truncate\">\n                                           {entry.project?.project_name}\n                                         </span>\n                                       </div>\n                                       \n                                       {/* Status indicator overlay */}\n                                       {entry.activities.some(a => a.status === 'godkjent') && !entry.activities.some(a => a.tripletex_synced_at) && (\n                                         <div className=\"absolute -top-1 -right-1 bg-green-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs font-bold\">\n                                           ✓\n                                         </div>\n                                       )}\n                                       {entry.activities.some(a => a.tripletex_synced_at) && (\n                                         <div className=\"absolute -top-1 -right-1 bg-blue-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs font-bold\">\n                                           →\n                                         </div>\n                                       )}\n                                       \n                                       {/* Hours only */}\n                                       {entry.totalHours > 0 && (\n                                         <div className=\"text-sm font-medium\">\n                                           {formatTimeValue(entry.totalHours)} t\n                                           {entry.activities.some(a => a.is_overtime) && (\n                                             <span className=\"ml-1 text-yellow-200 font-bold\" title=\"Inneholder overtid\">⚡</span>\n                                           )}\n                                         </div>\n                                       )}\n                                     </div>\n                                    \n                                  </div>\n                                ))}\n                                \n                                {/* Add project button */}\n                                <div \n                                  className=\"w-full h-8 border-2 border-dashed border-gray-200 rounded opacity-0 group-hover:opacity-100 flex items-center justify-center cursor-pointer hover:border-blue-300\"\n                                  onClick={() => setShowProjectSearch({ date: dateStr, personId: employee.id })}\n                                >\n                                  <Plus className=\"h-4 w-4 text-gray-400\" />\n                                </div>\n                              </div>\n                            </td>\n                          );\n                        })}\n                      </tr>\n                    );\n                  })}\n                  \n                  {/* Free Lines for this week */}\n                  {(() => {\n                    const weekFreeLines = freeLines.filter(line => \n                      line.week_number === safeWeek.week && line.year === safeWeek.year\n                    );\n                    \n                    return weekFreeLines.length > 0 ? (\n                      <>\n                        {/* Separator line */}\n                        <tr>\n                          <td colSpan={weekData.dates?.length ? weekData.dates.length + 2 : 3} className=\"border-t-2 border-gray-400 bg-gray-100 p-2\">\n                            <div className=\"text-xs font-medium text-gray-600 text-center\">Frie linjer</div>\n                          </td>\n                        </tr>\n                      \n                      {weekFreeLines.map((line, lineIndex) => {\n                        return (\n                        <tr key={line.id} className=\"h-10 bg-gray-50\">\n              {/* Line label */}\n              <td className=\"border border-gray-300 p-1 text-xs text-muted-foreground text-center w-40 bg-slate-200\">\n                <button\n                  onClick={() => {\n                    setEditLineNameDialog({\n                      lineId: line.id,\n                      currentName: line.name || `Linje ${lineIndex + 1}`\n                    });\n                  }}\n                  className=\"hover:bg-gray-300 rounded px-2 py-1 transition-colors cursor-pointer w-full\"\n                  title=\"Klikk for å redigere navn\"\n                >\n                  {line.name || `Linje ${lineIndex + 1}`}\n                </button>\n              </td>\n                          \n                          {/* Bubbles for each date */}\n                          {weekData.dates?.map((date, idx) => {\n                            const dateKey = toDateKey(date);\n                            const bubble = line.frie_bobler?.find(bubble => bubble.date === dateKey);\n                            \n                            return (\n                              <td key={`${line.id}-${dateKey}-${idx}`} className=\"border border-gray-300 p-1 min-w-[140px] h-10\">\n                                {bubble ? (\n                                  <div\n                                    className=\"h-10 rounded p-1 text-xs text-white flex items-center justify-center cursor-pointer hover:opacity-80 relative group\"\n                                    style={{ backgroundColor: bubble.color }}\n                                    draggable\n                                    onDragStart={(e) => {\n                                      e.dataTransfer.setData('text/plain', bubble.id);\n                                      e.dataTransfer.setData('application/x-free-bubble', 'true');\n                                      e.dataTransfer.setData('application/x-source-date', bubble.date);\n                                      e.dataTransfer.setData('application/x-source-line', line.id);\n                                      e.dataTransfer.effectAllowed = 'copyMove';\n                                      e.currentTarget.style.opacity = '0.5';\n                                    }}\n                                    onDragEnd={(e) => {\n                                      e.currentTarget.style.opacity = '1';\n                                    }}\n                                    onClick={() => {\n                                      setFreeBubbleEditDialog({\n                                        bubbleId: bubble.id,\n                                        text: bubble.text,\n                                        color: bubble.color,\n                                        lineId: line.id\n                                      });\n                                    }}\n                                    title={`${bubble.text}\\nKlikk for å redigere\\nDra for å flytte\\nHold Shift/Option for å kopiere`}\n                                  >\n                                    {bubble.text}\n                                    {/* Delete bubble button */}\n                                    <div className=\"absolute top-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                      <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          deleteFreeBubble(bubble.id);\n                                        }}\n                                        className=\"h-4 w-4 p-0 bg-red-500/80 hover:bg-red-600 text-white\"\n                                        title=\"Slett denne boblen\"\n                                      >\n                                        <X className=\"h-2 w-2\" />\n                                      </Button>\n                                    </div>\n                                  </div>\n                                ) : (\n                                  <div \n                                    className=\"h-10 border border-dashed border-muted-foreground/30 rounded flex items-center justify-center\"\n                                    onDragOver={(e) => {\n                                      e.preventDefault();\n                                      try {\n                                        const copyMod = e.shiftKey || e.altKey || e.metaKey || e.ctrlKey;\n                                        e.dataTransfer.dropEffect = copyMod ? 'copy' : 'move';\n                                      } catch (error) {\n                                        console.debug('DataTransfer error:', error);\n                                      }\n                                      e.currentTarget.classList.add('bg-blue-50', 'border-blue-300');\n                                    }}\n                                    onDragLeave={(e) => {\n                                      e.currentTarget.classList.remove('bg-blue-50', 'border-blue-300');\n                                    }}\n                                    onDrop={(e) => {\n                                      e.preventDefault();\n                                      e.currentTarget.classList.remove('bg-blue-50', 'border-blue-300');\n                                      \n                                      const bubbleId = e.dataTransfer.getData('text/plain');\n                                      const isFreeBubble = e.dataTransfer.getData('application/x-free-bubble') === 'true';\n                                      const sourceDate = e.dataTransfer.getData('application/x-source-date');\n                                      const sourceLineId = e.dataTransfer.getData('application/x-source-line');\n                                      \n                                      if (isFreeBubble && bubbleId && (sourceDate !== dateKey || sourceLineId !== line.id)) {\n                                        const intendsCopy = e.shiftKey || e.ctrlKey || e.metaKey || e.altKey || e.dataTransfer.dropEffect === 'copy';\n                                        \n                                        if (intendsCopy) {\n                                          copyFreeBubble(bubbleId, dateKey, line.id);\n                                        } else {\n                                          moveFreeBubble(bubbleId, sourceLineId, dateKey);\n                                        }\n                                      }\n                                    }}\n                                  >\n                                    <Button\n                                      variant=\"ghost\"\n                                      size=\"sm\"\n                                      onClick={() => {\n                                        addFreeBubble(line.id, dateKey);\n                                      }}\n                                      className=\"h-6 w-6 p-0 text-muted-foreground\"\n                                    >\n                                      <Plus className=\"h-3 w-3\" />\n                                    </Button>\n                                  </div>\n                                )}\n                              </td>\n                            );\n                          })}\n                          \n                          {/* Delete line button */}\n                          <td className=\"border border-gray-300 p-1 w-10\">\n                            <Button\n                              variant=\"destructive\"\n                              size=\"sm\"\n                              onClick={() => {\n                                setDeleteLineDialog({\n                                  lineId: line.id,\n                                  lineNumber: lineIndex + 1\n                                });\n                              }}\n                              className=\"h-8 w-8 p-0\"\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </td>\n                        </tr>\n                        );\n                      })}\n                      \n                      {/* Add new line button */}\n                      <tr className=\"h-10 bg-gray-50\">\n                        <td className=\"border border-gray-300 p-1 w-40 bg-slate-200\"></td>\n                        {weekData.dates?.map((date, idx) => (\n                          <td key={idx} className=\"border border-gray-300 p-1 min-w-[140px] h-10\"></td>\n                        ))}\n                        <td className=\"border border-gray-300 p-1 w-10\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                              addFreeLine(safeWeek.week, safeWeek.year);\n                            }}\n                            className=\"h-8 w-8 p-0\"\n                          >\n                            <Plus className=\"h-4 w-4\" />\n                          </Button>\n                        </td>\n                      </tr>\n                    </>\n                  ) : (\n                    <tr>\n                      <td colSpan={weekData.dates?.length ? weekData.dates.length + 2 : 3} className=\"border-t-2 border-gray-400 bg-gray-100 p-2\">\n                        <div className=\"flex justify-center\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                              addFreeLine(safeWeek.week, safeWeek.year);\n                            }}\n                            className=\"h-8 px-3\"\n                          >\n                            <Plus className=\"h-4 w-4 mr-1\" />\n                            Legg til frie linje\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  );\n                })()}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        );\n        }) : (\n          <div className=\"text-center py-8\">\n            <div className=\"text-muted-foreground\">\n              <p>Ingen bemanningsdata tilgjengelig for valgte periode.</p>\n              <p className=\"text-sm mt-2\">Kontroller at uke og år er gyldige, eller prøv en annen periode.</p>\n            </div>\n          </div>\n        )}\n      </div>\n      {/* Color Picker Dialog */}\n      {showColorPicker && (\n        <ColorPickerDialog\n          open={!!showColorPicker}\n          onClose={() => setShowColorPicker(null)}\n          projectName={showColorPicker.projectName}\n          projectNumber={showColorPicker.projectNumber}\n          currentColor={showColorPicker.currentColor}\n          onColorChange={(color) => setProjectColor(showColorPicker.tripletexProjectId, color)}\n        />\n      )}\n\n      {/* Project Search Dialog */}\n      <ProjectSearchDialog\n        open={!!showProjectSearch}\n        onClose={() => setShowProjectSearch(null)}\n        date={showProjectSearch?.date || ''}\n        personId={showProjectSearch?.personId || ''}\n        orgId={profile?.org_id || ''}\n        onProjectAssigned={() => revalidateInBackground()}\n      />\n\n      {/* Time Entry Edit Dialog */}\n      <Dialog open={!!editDialog} onOpenChange={() => setEditDialog(null)}>\n        <DialogContent \n          className=\"max-w-2xl h-[95vh] flex flex-col p-0\" \n          style={{ \n            maxHeight: '95vh !important', \n            height: '95vh !important', \n            display: 'flex !important', \n            flexDirection: 'column' as const, \n            padding: '0 !important'\n          }}\n        >\n          <div className=\"flex-1 overflow-y-auto p-6\" style={{ flex: 1, overflowY: 'auto' as const, padding: '1.5rem' }}>\n            <DialogHeader className=\"pb-4\">\n              <DialogTitle>Rediger timeføring</DialogTitle>\n              <DialogDescription>\n                Rediger timer, aktivitet og andre detaljer for denne arbeidsoppgaven.\n              </DialogDescription>\n            </DialogHeader>\n            {editDialog && (\n              <TimeEntry\n                vaktId={editDialog.vaktId}\n                orgId={profile?.org_id || ''}\n                onSave={() => {\n                  revalidateInBackground();\n                  setEditDialog(null);\n                }}\n                defaultTimer={8.0}\n                existingEntry={editDialog.existingEntry ? {\n                  id: editDialog.existingEntry.id,\n                  timer: editDialog.existingEntry.timer,\n                  aktivitet_id: editDialog.existingEntry.aktivitet_id || '',\n                  notat: editDialog.existingEntry.notat || '',\n                  status: editDialog.existingEntry.status\n                } : undefined}\n              />\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Free Bubble Edit Dialog */}\n      <Dialog open={!!freeBubbleEditDialog} onOpenChange={() => setFreeBubbleEditDialog(null)}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Rediger boble</DialogTitle>\n            <DialogDescription>\n              Rediger tekst og farge for denne boblen.\n            </DialogDescription>\n          </DialogHeader>\n          {freeBubbleEditDialog && (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"text-sm font-medium\">Tekst</label>\n                <Input\n                  defaultValue={freeBubbleEditDialog.text}\n                  onChange={(e) => {\n                    // Use local state for immediate UI update without causing lag\n                    const newText = e.target.value;\n                    setFreeBubbleEditDialog(prev => prev ? { ...prev, text: newText } : null);\n                  }}\n                  placeholder=\"Skriv tekst her...\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Farge</label>\n                <div className=\"flex gap-2 mt-2 flex-wrap\">\n                  {[\n                    '#ef4444', // Red\n                    '#f97316', // Orange\n                    '#eab308', // Yellow\n                    '#22c55e', // Green\n                    '#06b6d4', // Cyan\n                    '#3b82f6', // Blue\n                    '#8b5cf6', // Purple\n                    '#ec4899', // Pink\n                    '#94a3b8', // Gray\n                    '#f59e0b', // Amber\n                    '#10b981', // Emerald\n                    '#14b8a6', // Teal\n                    '#0ea5e9', // Sky\n                    '#6366f1', // Indigo\n                    '#a855f7', // Violet\n                    '#f43f5e', // Rose\n                    '#6b7280', // Gray-500\n                    '#374151', // Gray-700\n                    '#1f2937', // Gray-800\n                    '#111827'  // Gray-900\n                  ].map(color => (\n                    <button\n                      key={color}\n                      className={`w-8 h-8 rounded border-2 ${\n                        freeBubbleEditDialog.color === color ? 'border-gray-900' : 'border-gray-300'\n                      }`}\n                      style={{ backgroundColor: color }}\n                      onClick={() => {\n                        setFreeBubbleEditDialog(prev => prev ? { ...prev, color: color } : null);\n                      }}\n                    />\n                  ))}\n                </div>\n              </div>\n              <div className=\"flex justify-between\">\n                <Button\n                  variant=\"destructive\"\n                  onClick={() => {\n                    deleteFreeBubble(freeBubbleEditDialog.bubbleId);\n                    setFreeBubbleEditDialog(null);\n                  }}\n                >\n                  Slett\n                </Button>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => setFreeBubbleEditDialog(null)}\n                  >\n                    Avbryt\n                  </Button>\n                  <Button\n                    onClick={() => {\n                      editFreeBubble(\n                        freeBubbleEditDialog.bubbleId,\n                        freeBubbleEditDialog.text,\n                        freeBubbleEditDialog.color\n                      );\n                      setFreeBubbleEditDialog(null);\n                    }}\n                  >\n                    Lagre\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n      \n    {/* Delete Line Confirmation Dialog */}\n    <Dialog open={!!deleteLineDialog} onOpenChange={() => setDeleteLineDialog(null)}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Slett frie linje</DialogTitle>\n          <DialogDescription>\n            Er du sikker på at du vil slette hele linjen? Alle bobler i linjen vil også bli slettet.\n          </DialogDescription>\n        </DialogHeader>\n        {deleteLineDialog && (\n          <div className=\"flex justify-end gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setDeleteLineDialog(null)}\n            >\n              Avbryt\n            </Button>\n            <Button\n              variant=\"destructive\"\n              onClick={() => {\n                deleteFreeLine(deleteLineDialog.lineId);\n                setDeleteLineDialog(null);\n              }}\n            >\n              Slett linje\n            </Button>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n\n    {/* Edit Line Name Dialog */}\n    <Dialog open={!!editLineNameDialog} onOpenChange={() => setEditLineNameDialog(null)}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Rediger linje-navn</DialogTitle>\n          <DialogDescription>\n            Endre navnet på denne linjen.\n          </DialogDescription>\n        </DialogHeader>\n        {editLineNameDialog && (\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium\">Navn</label>\n              <Input\n                value={editLineNameDialog.currentName}\n                onChange={(e) => setEditLineNameDialog({\n                  ...editLineNameDialog,\n                  currentName: e.target.value\n                })}\n                placeholder=\"Skriv linje-navn her...\"\n              />\n            </div>\n            <div className=\"flex justify-end gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setEditLineNameDialog(null)}\n              >\n                Avbryt\n              </Button>\n              <Button\n                onClick={() => {\n                  updateLineName(\n                    editLineNameDialog.lineId,\n                    editLineNameDialog.currentName\n                  );\n                  setEditLineNameDialog(null);\n                }}\n              >\n                Lagre\n              </Button>\n            </div>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n      </div>\n    </>\n  );\n};\n\nexport default StaffingList;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6876, "column": 0}, "map": {"version":3,"sources":["file:///Users/kristianwalberg/Documents/Cursor/Bemanningsliste/bemanningsliste/src/app/admin/bemanningsliste/%5Byear%5D/%5Bweek%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nexport const dynamic = 'force-dynamic';\n\nimport { useEffect } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport StaffingList from \"@/components/StaffingList\";\nimport { getWeekNumber } from \"@/lib/displayNames\";\n\nconst getWeeksInYear = (targetYear: number) => {\n  const dec28 = new Date(targetYear, 11, 28);\n  return getWeekNumber(dec28);\n};\n\nexport default function BemanningslisteWeekPage() {\n  const params = useParams<{ year: string; week: string }>();\n  const router = useRouter();\n\n  const now = new Date();\n  const defaultYear = now.getFullYear();\n  const defaultWeek = getWeekNumber(now);\n\n  const parsedYear = Number(params?.year ?? \"\");\n  const parsedWeek = Number(params?.week ?? \"\");\n\n  const currentYear = Number.isNaN(parsedYear) ? defaultYear : parsedYear;\n  const weeksInCurrentYear = getWeeksInYear(currentYear);\n  const currentWeek = Number.isNaN(parsedWeek)\n    ? defaultWeek\n    : Math.max(1, Math.min(weeksInCurrentYear, parsedWeek));\n\n  useEffect(() => {\n    const invalid = Number.isNaN(parsedYear) || Number.isNaN(parsedWeek);\n    const noParams = !params?.year || !params?.week;\n\n    if (invalid || noParams) {\n      router.replace(`/admin/bemanningsliste/${currentYear}/${String(currentWeek).padStart(2, \"0\")}`);\n    }\n  }, [parsedYear, parsedWeek, router, currentYear, currentWeek, params?.year, params?.week]);\n\n  const navigateWeeks = (delta: number) => {\n    let newYear = currentYear;\n    let newWeek = currentWeek + delta;\n    let weeksInYear = getWeeksInYear(newYear);\n\n    while (newWeek > weeksInYear) {\n      newWeek -= weeksInYear;\n      newYear += 1;\n      weeksInYear = getWeeksInYear(newYear);\n    }\n\n    while (newWeek < 1) {\n      newYear -= 1;\n      weeksInYear = getWeeksInYear(newYear);\n      newWeek += weeksInYear;\n    }\n\n    router.push(`/admin/bemanningsliste/${newYear}/${newWeek.toString().padStart(2, \"0\")}`);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"border-b bg-card p-4\">\n        <div className=\"mx-auto flex max-w-7xl items-center justify-center gap-4\">\n          <Button variant=\"outline\" onClick={() => navigateWeeks(-6)}>\n            <ChevronLeft className=\"h-4 w-4\" />\n            Forrige 6 uker\n          </Button>\n          <div className=\"text-lg font-medium\">\n            Fra uke {currentWeek}, {currentYear}\n          </div>\n          <Button variant=\"outline\" onClick={() => navigateWeeks(6)}>\n            Neste 6 uker\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n\n      <StaffingList startWeek={currentWeek} startYear={currentYear} weeksToShow={6} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAIA;AACA;AACA;AACA;AAAA;AACA;AACA;;;AATA;AAEO,MAAM,UAAU;;;;;;;AASvB,MAAM,iBAAiB,CAAC;IACtB,MAAM,QAAQ,IAAI,KAAK,YAAY,IAAI;IACvC,OAAO,IAAA,2MAAa,EAAC;AACvB;AAEe,SAAS;;IACtB,MAAM,SAAS,IAAA,+MAAS;IACxB,MAAM,SAAS,IAAA,+MAAS;IAExB,MAAM,MAAM,IAAI;IAChB,MAAM,cAAc,IAAI,WAAW;IACnC,MAAM,cAAc,IAAA,2MAAa,EAAC;QAER;IAA1B,MAAM,aAAa,OAAO,CAAA,eAAA,mBAAA,6BAAA,OAAQ,IAAI,cAAZ,0BAAA,eAAgB;QAChB;IAA1B,MAAM,aAAa,OAAO,CAAA,eAAA,mBAAA,6BAAA,OAAQ,IAAI,cAAZ,0BAAA,eAAgB;IAE1C,MAAM,cAAc,OAAO,KAAK,CAAC,cAAc,cAAc;IAC7D,MAAM,qBAAqB,eAAe;IAC1C,MAAM,cAAc,OAAO,KAAK,CAAC,cAC7B,cACA,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,oBAAoB;IAE7C,IAAA,uOAAS;6CAAC;YACR,MAAM,UAAU,OAAO,KAAK,CAAC,eAAe,OAAO,KAAK,CAAC;YACzD,MAAM,WAAW,EAAC,mBAAA,6BAAA,OAAQ,IAAI,KAAI,EAAC,mBAAA,6BAAA,OAAQ,IAAI;YAE/C,IAAI,WAAW,UAAU;gBACvB,OAAO,OAAO,CAAC,AAAC,0BAAwC,OAAf,aAAY,KAAwC,OAArC,OAAO,aAAa,QAAQ,CAAC,GAAG;YAC1F;QACF;4CAAG;QAAC;QAAY;QAAY;QAAQ;QAAa;QAAa,mBAAA,6BAAA,OAAQ,IAAI;QAAE,mBAAA,6BAAA,OAAQ,IAAI;KAAC;IAEzF,MAAM,gBAAgB,CAAC;QACrB,IAAI,UAAU;QACd,IAAI,UAAU,cAAc;QAC5B,IAAI,cAAc,eAAe;QAEjC,MAAO,UAAU,YAAa;YAC5B,WAAW;YACX,WAAW;YACX,cAAc,eAAe;QAC/B;QAEA,MAAO,UAAU,EAAG;YAClB,WAAW;YACX,cAAc,eAAe;YAC7B,WAAW;QACb;QAEA,OAAO,IAAI,CAAC,AAAC,0BAAoC,OAAX,SAAQ,KAAuC,OAApC,QAAQ,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClF;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAI,WAAU;0BACb,cAAA,0PAAC;oBAAI,WAAU;;sCACb,0PAAC,4MAAM;4BAAC,SAAQ;4BAAU,SAAS,IAAM,cAAc,CAAC;;8CACtD,0PAAC,mSAAW;oCAAC,WAAU;;;;;;gCAAY;;;;;;;sCAGrC,0PAAC;4BAAI,WAAU;;gCAAsB;gCAC1B;gCAAY;gCAAG;;;;;;;sCAE1B,0PAAC,4MAAM;4BAAC,SAAQ;4BAAU,SAAS,IAAM,cAAc;;gCAAI;8CAEzD,0PAAC,sSAAY;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAK9B,0PAAC,6MAAY;gBAAC,WAAW;gBAAa,WAAW;gBAAa,aAAa;;;;;;;;;;;;AAGjF;GAnEwB;;QACP,+MAAS;QACT,+MAAS;;;KAFF","debugId":null}}]
}